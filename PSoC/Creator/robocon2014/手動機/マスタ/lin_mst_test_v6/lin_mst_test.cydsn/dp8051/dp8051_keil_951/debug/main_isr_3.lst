C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN_ISR_3
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\main_isr_3.obj
COMPILER INVOKED BY: C:\Program Files\Cypress\PSoC Creator\3.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe .\main
                    -_isr_3.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051\DP8051_Keil_951\Debug\main_isr_3.lst) CD DB NOIP OT(2,SIZE) DF(DEBUG) 
                    -INCDIR(.,.\Generated_Source\PSoC3) OJ(.\DP8051\DP8051_Keil_951\Debug\main_isr_3.obj)

line level    source

   1          /*
   2          robocon 2014 手動機　メインマスタープログラム
   3          version : 5
   4          ToDo
   5          
   6          
   7          tatsuya
   8          */
   9          #include <project.h>
  10          #include <stdio.h>
  11          
  12          #include "ps2_controller.h"
  13          #include <math.h>
  14          
  15          // etc define
  16          #define MOTOR_DATA  0x1
  17          #define AIR_DATA    0x2
  18          #define RAIL_DATA   0x4
  19          #define K_DATA      0x8
  20          
  21          // lin define
  22          #define LIN_RX_EMPTY            0x01
  23          #define LIN_RX_COMPLETE         0x02
  24          #define LIN_RX_SEND             0x04
  25          #define LIN_RX_SUM_ERR          0x08
  26          #define LIN_RX_TIMEOUT_ERR  0x10
  27          #define LIN_TX_SEND     1
  28          
  29          // lin method
  30          uint16 LIN_Master_id_send(const uint8 id);
  31          uint8 LIN_Master_GetArray(const uint8 id,const uint8 length,const uint8* buffer);
  32          uint8 LIN_Master_ReadRxStatus(void);
  33          uint8 LIN_Master_PutArray(const uint8 id,const uint8 length,const uint8* const buffer);
  34          uint8 LIN_Master_ReadTxStatus(void);
  35          
  36          // lin value
  37          uint8 lin_id_flag;
  38          uint8 lin_tx_flag = 0;
  39          uint8 lin_rx_flag = 1;
  40          uint8 lin_rx_sync_flag;
  41          uint16 rx_sum;
  42          uint8 rx_length;
  43          uint8* rx_buffer;
  44          uint8 rx_i;
  45          uint8 i;
  46          
  47          uint8 Rxbuffer[10] = {0};
  48          uint8 line_data[2][10];// R:0 L:1
  49          uint8 line_m[2]; // R:0 L:1 
  50          uint16 rori;
  51          union Airdata
  52          {
  53                  uint8 Trans;
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 2   

  54                  struct
  55                  {
  56                          uint8 TBD : 2;          // 未定
  57                          uint8 blanco1 : 1;      // 上体起こし　中心からみて1番目
  58                          uint8 free : 1;
  59                          uint8 incline : 1;      // 傾斜
  60                          uint8 roll : 1;
  61                          uint8 blanco3 : 1;      // 中心からみて3番目
  62                          uint8 blanco2 : 1;      // 中心からみて2番目
  63                  } Bit;
  64          };
  65          union Raildata
  66          {
  67                  uint8 Trans;
  68                  struct
  69                  {
  70                          uint8 underRail : 6;
  71                          uint8 seesawPush : 1;
  72                          uint8 seesawUp : 1;
  73                  } Bit;
  74          };
  75          
  76          typedef struct
  77          {
  78                  uint8 Select;
  79                  union Airdata Air;
  80                  //uint8 Air;
  81                  union Raildata Rail;
  82                  uint8 K[3];
  83          } LinData;
  84          
  85          float R_speed = 0.1;
  86          typedef struct
  87          {
  88                  int8 x;
  89                  int8 y;
  90                  int8 m;
  91                  int16 a;
  92                  int16 b;
  93                  int16 c;
  94                  int16 max;
  95          } Speed;
  96          
  97          /*
  98          モーターバランス計算
  99          */
 100          
 101          void calcSpeed(Speed * const sp)
 102          {
 103   1              const float root3 = pow(3, 0.5);
 104   1              const float coef = ((float)sp->max / (128 * (1 + R_speed + root3)));
 105   1              const float y_speed = (root3 * (float)sp->y);
 106   1              const float m_speed = (R_speed * (float)sp->m);
 107   1              
 108   1              const float tmpa = (-2 * (float)sp->x) + m_speed;
 109   1              const float tmpb = (float)sp->x - y_speed + m_speed;
 110   1              const float tmpc = (float)sp->x + y_speed + m_speed;
 111   1              
 112   1              sp->a = floor(coef * tmpa + 0.5);
 113   1              sp->b = floor(coef * tmpb + 0.5);
 114   1              sp->c = floor(coef * tmpc + 0.5);
 115   1              
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 3   

 116   1              return;
 117   1      }
 118          // 左右アナログパッドから足回り速度(x,y,m)を決定
 119          // ppsdata --> omuni
 120          // r   : 旋回比   0 ~ 1
 121          // mag : 速度倍率 0 ~ 1 
 122          void PS2OmuniControl(PS2Controller * ppsData,Speed * omuni,float r,float mag)
 123          {
 124   1              if(!PS2_Analog_Flag() || PS2_Timeout_Flag())
 125   1              {
 126   2                      ppsData->ANALOG_LX = 0;
 127   2                      ppsData->ANALOG_LY = 0;
 128   2                      ppsData->ANALOG_RX = 0;
 129   2                      ppsData->ANALOG_RY = 0;
 130   2              }
 131   1              
 132   1              // コントラーラ信号整形
 133   1              if((ppsData->ANALOG_LX != 0) || (ppsData->ANALOG_LY != 0))
 134   1              {
 135   2                      if (ppsData->ANALOG_LX > (127 + 40))
 136   2                              omuni->x = -(ppsData->ANALOG_LX - 128);
 137   2                      else if (ppsData->ANALOG_LX < (127 - 40))
 138   2                              omuni->x = (127 - ppsData->ANALOG_LX);
 139   2                      else
 140   2                              omuni->x = 0;
 141   2                      
 142   2                      if (ppsData->ANALOG_LY > (127 + 40))
 143   2                              omuni->y = (ppsData->ANALOG_LY - 128);
 144   2                      else if (ppsData->ANALOG_LY < (127 - 40))
 145   2                              omuni->y = -(127 - ppsData->ANALOG_LY);
 146   2                      else
 147   2                              omuni->y = 0;
 148   2              }
 149   1              if((ppsData->ANALOG_RX != 0) || (ppsData->ANALOG_RY != 0))
 150   1              {
 151   2                      if (ppsData->ANALOG_RX > (127 + 40))
 152   2                      {
 153   3                              omuni->m = -(ppsData->ANALOG_RX - 128);
 154   3                              R_speed = -((float)omuni->m/128);
 155   3                      }
 156   2                      else if (ppsData->ANALOG_RX < (127 - 40))
 157   2                      {
 158   3                              omuni->m = 127 - ppsData->ANALOG_RX;
 159   3                              R_speed = ((float)omuni->m/128);
 160   3                      }
 161   2                      else
 162   2                      {
 163   3                              omuni->m = 0;
 164   3                              R_speed = 0;
 165   3                      }
 166   2              }
 167   1              if(mag <= 1)
 168   1              {
 169   2                      omuni->x *= mag;
 170   2                      omuni->y *= mag;
 171   2              }
 172   1              if(r <= 1)
 173   1              {
 174   2                      R_speed *= r;
 175   2              }
 176   1      }
 177          
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 4   

 178          // PS2コントローラからデータを受け取り整形
 179          // 足回り、pidパラメータ、空気、レール
 180          void PS2ControlMachine(Speed * omuni,LinData* lindata)
 181          {
 182   1              static PS2Controller psData;
 183   1              static uint8 start_flag = 0;
 184   1              static uint8 air_flag = 0;
 185   1              static uint8 rail_flag = 0;
 186   1              static uint8 up_flag = 0;
 187   1              static uint8 down_flag = 0;
 188   1              
 189   1              psData = PS2_Controller_get();
 190   1                      
 191   1              if(!PS2_Analog_Flag() || PS2_Timeout_Flag())
 192   1              {
 193   2                      psData.ANALOG_LX = 0;
 194   2                      psData.ANALOG_LY = 0;
 195   2                      psData.ANALOG_RX = 0;
 196   2                      psData.ANALOG_RY = 0;
 197   2              }
 198   1              
 199   1              // コントラーラ信号整形
 200   1              if((psData.ANALOG_LX != 0) || (psData.ANALOG_LY != 0))
 201   1              {
 202   2                      if (psData.ANALOG_LX > (127 + 40))
 203   2                              omuni->x = -(psData.ANALOG_LX - 128);
 204   2                      else if (psData.ANALOG_LX < (127 - 40))
 205   2                              omuni->x = (127 - psData.ANALOG_LX);
 206   2                      else
 207   2                              omuni->x = 0;
 208   2                      
 209   2                      if (psData.ANALOG_LY > (127 + 40))
 210   2                              omuni->y = (psData.ANALOG_LY - 128);
 211   2                      else if (psData.ANALOG_LY < (127 - 40))
 212   2                              omuni->y = -(127 - psData.ANALOG_LY);
 213   2                      else
 214   2                              omuni->y = 0;
 215   2              }
 216   1              if((psData.ANALOG_RX != 0) || (psData.ANALOG_RY != 0))
 217   1              {
 218   2                      if (psData.ANALOG_RX > (127 + 40))
 219   2                      {
 220   3                              omuni->m = -(psData.ANALOG_RX - 128);
 221   3                              R_speed = -((float)omuni->m/128);
 222   3                      }
 223   2                      else if (psData.ANALOG_RX < (127 - 40))
 224   2                      {
 225   3                              omuni->m = 127 - psData.ANALOG_RX;
 226   3                              R_speed = ((float)omuni->m/128);
 227   3                      }
 228   2                      else
 229   2                      {
 230   3                              omuni->m = 0;
 231   3                              R_speed = 0;
 232   3                      }
 233   2              }
 234   1          //kp,ki,kd値送信
 235   1          if(psData.START)
 236   1          {
 237   2              if(!start_flag)
 238   2              {
 239   3                  lindata->Select |= K_DATA;
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 5   

 240   3                  start_flag = 1;
 241   3              }
 242   2          }
 243   1          else
 244   1          {
 245   2              start_flag = 0;
 246   2          }
 247   1              // 空気データ整形
 248   1              if(psData.TRIANGLE)
 249   1              {
 250   2                      if(!(air_flag & 0x01))
 251   2                      {
 252   3                              if(lindata->Air.Bit.blanco1)
 253   3                              {
 254   4                                      lindata->Air.Bit.blanco1 = 0;
 255   4                              }
 256   3                              else
 257   3                              {
 258   4                                      lindata->Air.Bit.blanco1 = 1;
 259   4                              }
 260   3                              air_flag |= 0x01;
 261   3                      }
 262   2              }
 263   1              else
 264   1              {
 265   2                      air_flag &= 0xfe;
 266   2              }
 267   1              if(psData.CROSS)
 268   1              {
 269   2                      if(!(air_flag & 0x02))
 270   2                      {
 271   3                              if(lindata->Air.Bit.blanco2)
 272   3                              {
 273   4                                      lindata->Air.Bit.blanco2 = 0;
 274   4                              }
 275   3                              else
 276   3                              {
 277   4                                      lindata->Air.Bit.blanco2 = 1;
 278   4                              }
 279   3                              air_flag |= 0x02;
 280   3                      }
 281   2              }
 282   1              else
 283   1              {
 284   2                      air_flag &= 0xfd;
 285   2              }
 286   1              if(psData.CIRCLE)
 287   1              {
 288   2                      if(!(air_flag & 0x04))
 289   2                      {
 290   3                              if(lindata->Air.Bit.blanco3)
 291   3                              {
 292   4                                      lindata->Air.Bit.blanco3 = 0;
 293   4                              }
 294   3                              else
 295   3                              {
 296   4                                      lindata->Air.Bit.blanco3 = 1;
 297   4                              }
 298   3                              air_flag |= 0x04;
 299   3                      }
 300   2              }
 301   1              else
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 6   

 302   1              {
 303   2                      air_flag &= 0xfb;
 304   2              }
 305   1              if(psData.SQUARE)
 306   1              {
 307   2                      if(!(air_flag & 0x08))
 308   2                      {
 309   3                              if(lindata->Air.Bit.incline)
 310   3                              {
 311   4                                      lindata->Air.Bit.incline = 0;
 312   4                              }
 313   3                              else
 314   3                              {
 315   4                                      lindata->Air.Bit.incline = 1;
 316   4                              }
 317   3                              air_flag |= 0x08;
 318   3                      }
 319   2              }
 320   1              else
 321   1              {
 322   2                      air_flag &= 0xf7;
 323   2              }
 324   1              if(psData.R1)
 325   1              {
 326   2                      if(!(air_flag & 0x10))
 327   2                      {
 328   3                              if(lindata->Air.Bit.roll)
 329   3                              {
 330   4                                      lindata->Air.Bit.roll = 0;
 331   4                              }
 332   3                              else
 333   3                              {
 334   4                                      lindata->Air.Bit.roll = 1;
 335   4                              }
 336   3                              air_flag |= 0x10;
 337   3                      }
 338   2              }
 339   1              else
 340   1              {
 341   2                      air_flag &= 0xef;
 342   2              }
 343   1              if(psData.R2)
 344   1              {
 345   2                      if(!(air_flag & 0x20))
 346   2                      {
 347   3                              if(lindata->Air.Bit.free)
 348   3                              {
 349   4                                      lindata->Air.Bit.free = 0;
 350   4                              }
 351   3                              else
 352   3                              {
 353   4                                      lindata->Air.Bit.free = 1;
 354   4                              }
 355   3                              air_flag |= 0x20;
 356   3                      }
 357   2              }
 358   1              else
 359   1              {
 360   2                      air_flag &= 0xdf;
 361   2              }
 362   1              // レールデータ整形
 363   1              if(psData.L1)
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 7   

 364   1              {
 365   2                      if(!(air_flag & 0x80))
 366   2                      {
 367   3                              if(lindata->Rail.Bit.seesawUp)
 368   3                              {
 369   4                                      lindata->Rail.Bit.seesawUp = 0;
 370   4                              }
 371   3                              else
 372   3                              {
 373   4                                      lindata->Rail.Bit.seesawUp = 1;
 374   4                              }
 375   3                              air_flag |= 0x80;
 376   3                      }
 377   2              }
 378   1              else
 379   1              {
 380   2                      air_flag &= ~0x80;
 381   2              }
 382   1              if(psData.L2)
 383   1              {
 384   2                      if(!(air_flag & 0x40))
 385   2                      {
 386   3                              if(lindata->Rail.Bit.seesawPush)
 387   3                              {
 388   4                                      lindata->Rail.Bit.seesawPush = 0;
 389   4                              }
 390   3                              else
 391   3                              {
 392   4                                      lindata->Rail.Bit.seesawPush = 1;
 393   4                              }
 394   3                              air_flag |= 0x40;
 395   3                      }
 396   2              }
 397   1              else
 398   1              {
 399   2                      air_flag &= ~0x40;
 400   2              }
 401   1              
 402   1              // レールデータ整形
 403   1              
 404   1              if(psData.UP)
 405   1                      lindata->Rail.Bit.underRail = 16;
 406   1              else if(psData.DOWN)
 407   1                      lindata->Rail.Bit.underRail = 2;
 408   1              else
 409   1                      lindata->Rail.Bit.underRail = 8;
 410   1              /*
 411   1              if(psData.UP)
 412   1              {
 413   1                      if(up_flag)
 414   1                      {
 415   1                              up_flag = 0;
 416   1                              if(lindata->Rail.Bit.underRail < 16)
 417   1                              {
 418   1                                      lindata->Rail.Bit.underRail += 2;
 419   1                              }
 420   1                              else
 421   1                              {
 422   1                                      lindata->Rail.Bit.underRail = 16;
 423   1                              }
 424   1                      }
 425   1              }
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 8   

 426   1              else
 427   1              {
 428   1                      up_flag = 1;
 429   1              }
 430   1              if(psData.DOWN)
 431   1              {
 432   1                      if(down_flag)
 433   1                      {
 434   1                              down_flag = 0;
 435   1                              if(lindata->Rail.Bit.underRail > 2)
 436   1                              {
 437   1                                      lindata->Rail.Bit.underRail -= 2;
 438   1                              }
 439   1                              else
 440   1                              {
 441   1                                      lindata->Rail.Bit.underRail = 2;
 442   1                              }
 443   1                      }
 444   1              }
 445   1              else
 446   1              {
 447   1                      down_flag = 1;
 448   1              }
 449   1              */
 450   1      }
*** WARNING C280 IN LINE 185 OF .\main_isr_3.c: 'rail_flag': unreferenced local variable
*** WARNING C280 IN LINE 186 OF .\main_isr_3.c: 'up_flag': unreferenced local variable
*** WARNING C280 IN LINE 187 OF .\main_isr_3.c: 'down_flag': unreferenced local variable
 451          
 452          // 半自動操縦(ライントレース)
 453          void PS2AutoMachine(Speed * omuni,LinData* lindata)
 454          {
 455   1              const double line_kp = 0.4;
 456   1              int8 line_left = line_data[0][0]-64;
 457   1              int8 line_right = line_data[1][0]-64;
 458   1              int16 line_roll = (int)((line_right - line_left)*1.2);
 459   1              int16 line_center = -(line_right + line_left);
 460   1              static PS2Controller psData;
 461   1              psData = PS2_Controller_get();
 462   1              R_speed = 1;
 463   1              
 464   1              if(psData.RIGHT)
 465   1              {
 466   2                      omuni->x = -127;
 467   2                      omuni->y = 0;
 468   2                      omuni->m = 64;
 469   2              }
 470   1              else if(psData.LEFT)
 471   1              {
 472   2                      /*
 473   2                      omuni->x = 127;
 474   2                      omuni->y = 0;
 475   2                      omuni->m = -64;
 476   2                      */
 477   2                      omuni->x = 0;
 478   2                      omuni->y = 0;
 479   2                      omuni->m = -125;
 480   2              }
 481   1              else
 482   1              {
 483   2                      if(((line_center <= 10)&&(line_center >= -10)&&(line_roll <= 10)&&(line_roll >= -10)) 
 484   2                              || ((line_data[0][0] == 0) || (line_data[1][0] == 0)))
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 9   

 485   2                      {
 486   3                              omuni->x = 0;
 487   3                              omuni->y = 0;
 488   3                              omuni->m = 0;
 489   3                      }
 490   2                      else
 491   2                      {
 492   3                              omuni->x = 0;
 493   3                              //omuni->m = 0;
 494   3                              // m
 495   3                              if(line_roll > 127)
 496   3                                      omuni->m = 127;
 497   3                              else if(line_roll < -127)
 498   3                                      omuni->m = -127;
 499   3                              else
 500   3                                      omuni->m = (int)line_roll;
 501   3                              // y
 502   3                              if(line_center*line_kp > 127)
 503   3                                      omuni->y = 127;
 504   3                              else if(line_center*line_kp < -127)
 505   3                                      omuni->y = -127;
 506   3                              else
 507   3                              {
 508   4                                      omuni->y = (int)line_center*line_kp;
 509   4                              }
 510   3                      }
 511   2              }
 512   1      }
*** WARNING C280 IN LINE 453 OF .\main_isr_3.c: 'lindata': unreferenced local variable
 513          
 514          // LINでデータ送信
 515          void LinSendData(Speed * omuni,LinData* lindata)
 516          {
 517   1              static uint8 air_data_old;
 518   1              static uint8 rail_data_old;
 519   1              static uint8 rori_flag;
 520   1              uint8 put_data[8];
 521   1              // 空気フラグ立て
 522   1              if(air_data_old != lindata->Air.Trans)
 523   1              {
 524   2                      lindata->Select |= AIR_DATA;
 525   2              }
 526   1              air_data_old = lindata->Air.Trans;
 527   1              
 528   1              // レール&昇降フラグ
 529   1              if(rail_data_old != lindata->Rail.Trans)
 530   1              {
 531   2                      // ダメなパターンなのん
 532   2                      if(lindata->Rail.Bit.seesawPush && lindata->Rail.Bit.seesawUp)
 533   2                      {
 534   3                              // 前のデータを採用するのん
 535   3                              lindata->Rail.Trans = rail_data_old;
 536   3                      }
 537   2                      
 538   2                      lindata->Select |= RAIL_DATA;
 539   2              }
 540   1              rail_data_old = lindata->Rail.Trans;
 541   1              
 542   1              // LIN送信
 543   1              if(rori_flag == 1)
 544   1              {
 545   2                      if(LIN_Master_ReadTxStatus() != LIN_TX_SEND)
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 10  

 546   2                      {
 547   3                              rori_flag = 0;
 548   3                      }
 549   2              }
 550   1              else if(rori_flag == 0)
 551   1              {
 552   2              if(lindata->Select & K_DATA)
 553   2              {
 554   3                  LIN_Master_PutArray(4, 3, lindata->K);
 555   3                              lindata->Select |= MOTOR_DATA;
 556   3                              lindata->Select &= ~K_DATA;
 557   3              }
 558   2                      else if(lindata->Select & AIR_DATA)
 559   2                      {
 560   3                              //air_data = 128;
 561   3                              LIN_Master_PutArray(2, 1, &(lindata->Air.Trans));
 562   3                              lindata->Select |= MOTOR_DATA;
 563   3                              lindata->Select &= ~AIR_DATA;
 564   3                      }
 565   2                      else if(lindata->Select & RAIL_DATA)
 566   2                      {
 567   3                              // 下位6ビット：1~24　上位2ビット motor x2
 568   3                              LIN_Master_PutArray(5, 1, &lindata->Rail.Trans);
 569   3                              lindata->Select |= MOTOR_DATA;
 570   3                              lindata->Select &= ~RAIL_DATA;
 571   3                      }
 572   2                      else if((lindata->Select & MOTOR_DATA))
 573   2                      {
 574   3                              //omuni.x = (int8)(x_sum/sumcount);
 575   3                              //omuni.y = (int8)(y_sum/sumcount);
 576   3                              calcSpeed(omuni);
 577   3                              put_data[1] = 0xff & (omuni->a >> 8);
 578   3                              put_data[0] = 0xff & omuni->a;
 579   3                              put_data[3] = 0xff & (omuni->b >> 8);
 580   3                              put_data[2] = 0xff & omuni->b;
 581   3                              put_data[5] = 0xff & (omuni->c >> 8);
 582   3                              put_data[4] = 0xff & omuni->c;
 583   3                              LIN_Master_PutArray(0,6,put_data);
 584   3                              //x_sum = 0;
 585   3                              //y_sum = 0;
 586   3                              //sumcount = 0;
 587   3                      }
 588   2                      
 589   2                      rori_flag = 1;
 590   2              }
 591   1      }
 592          
 593          
 594          
 595          /*
 596          CY_ISR(isr_1_isr)
 597          {
 598                  //LIN_Master_GetArray(0,8,Rxbuffer);
 599          }
 600          */
 601          CY_ISR(uart_tx_isr)
 602          {
 603   1              if(LIN_ReadTxStatus() & LIN_TX_STS_FIFO_EMPTY)
 604   1              {
 605   2                      if(lin_id_flag == 1)
 606   2                      {
 607   3                              lin_id_flag = 0;
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 11  

 608   3                      }
 609   2                      if(lin_tx_flag == LIN_TX_SEND)
 610   2                      {
 611   3                              // 7bit分待つ
 612   3                              // PSoC Slaveの仕様だと思われる。
 613   3                              CyDelayUs(365);
 614   3                              lin_tx_flag = 0;
 615   3                      }
 616   2              }
 617   1      }
 618          
 619          CY_ISR(uart_rx_isr)
 620          {
 621   1              if(lin_rx_flag & LIN_RX_SEND)
 622   1              {
 623   2                      if(rx_i < rx_length)
 624   2                      {
 625   3                              rx_buffer[rx_i] = LIN_GetByte() & 0xff;
 626   3                              
 627   3                              if(lin_rx_sync_flag == 0)
 628   3                              {
 629   4                                      /*
 630   4                                      if(rx_buffer[rx_i] == 0x55)
 631   4                                      {
 632   4                                              return;
 633   4                                      }
 634   4                                      */
 635   4                                      lin_rx_sync_flag = 1;
 636   4                                      return;
 637   4                              }
 638   3                              
 639   3                              else if(lin_rx_sync_flag == 1)
 640   3                              {
 641   4                                      /*
 642   4                                      if(rx_buffer[rx_i] == rx_sum)
 643   4                                      {
 644   4                                              return;
 645   4                                      }
 646   4                                      */
 647   4                                      lin_rx_sync_flag = 2;
 648   4                                      return;
 649   4                              }
 650   3                              
 651   3                              rx_sum += rx_buffer[rx_i];
 652   3                              rx_i++;
 653   3                      }
 654   2                      else
 655   2                      {
 656   3                              LIN_Timer_Stop();
 657   3                              rx_sum = 0xff & (~( ((rx_sum >> 8) & 0xf) + (rx_sum & 0xff)));
 658   3                              if((rx_sum & 0xff) == (LIN_GetByte() & 0xff))
 659   3                              {
 660   4                                      lin_rx_flag &= ~LIN_RX_SEND;
 661   4                                      lin_rx_flag &= ~LIN_RX_SUM_ERR;
 662   4                                      lin_rx_flag &= ~LIN_RX_TIMEOUT_ERR;
 663   4                                      lin_rx_flag |= LIN_RX_COMPLETE;
 664   4                                      lin_rx_flag |= LIN_RX_EMPTY;
 665   4                              }
 666   3                              else
 667   3                              {
 668   4                                      lin_rx_flag &= ~LIN_RX_SEND;
 669   4                                      lin_rx_flag &= ~LIN_RX_COMPLETE;
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 12  

 670   4                                      lin_rx_flag |= LIN_RX_EMPTY;
 671   4                                      lin_rx_flag |= LIN_RX_SUM_ERR;
 672   4                              }
 673   3                      }
 674   2              }
 675   1      }
 676          
 677          CY_ISR(lin_timeout_isr)
 678          {
 679   1              //char str[40];
 680   1              if(lin_rx_flag & LIN_RX_SEND)
 681   1              {
 682   2                      /*
 683   2                      while(1)
 684   2                      {
 685   2                              if(UART_2_ReadTxStatus() & UART_2_TX_STS_FIFO_EMPTY)
 686   2                              {
 687   2                                      sprintf(str,"err %x \n",(int)lin_rx_flag);
 688   2                                      UART_2_PutString(str);
 689   2                              }
 690   2                      }
 691   2                      */
 692   2                      LIN_Timer_WriteCounter(255);
 693   2                      LIN_Timer_Stop();
 694   2                      lin_rx_flag &= ~LIN_RX_SEND;
 695   2                      lin_rx_flag &= ~LIN_RX_COMPLETE;
 696   2                      lin_rx_flag |= LIN_RX_EMPTY;
 697   2                      lin_rx_flag |= LIN_RX_TIMEOUT_ERR;
 698   2                      /*
 699   2                      LIN_Stop();
 700   2                      LIN_Start();
 701   2                      LIN_EnableRxInt();
 702   2                      LIN_EnableTxInt();
 703   2                      LIN_ClearRxBuffer();
 704   2                      LIN_ClearTxBuffer();
 705   2                      lin_rx_flag = LIN_RX_EMPTY;
 706   2                      lin_id_flag = 0;
 707   2                      lin_tx_flag = 0;
 708   2                      lin_rx_sync_flag = 0;
 709   2                      rx_sum = 0;
 710   2                      rx_length = 0;
 711   2                      rx_buffer = 0;
 712   2                      rx_i = 0;
 713   2                      */
 714   2                      /*
 715   2                      sprintf(str,"err\n");
 716   2                      UART_2_PutString(str);
 717   2                      */
 718   2              }
 719   1      }
 720          
 721          // Line Scan
 722          CY_ISR(line_isr)
 723          {
 724   1              static uint8 line_flag;
 725   1              static int line_i;
 726   1              uint16 line_get; 
 727   1              
 728   1              do
 729   1              {
 730   2                      line_get = Line_GetByte();
 731   2                      
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 13  

 732   2                      if(((line_get & 0xff) == 0x82) && (line_flag == 0))
 733   2                      {
 734   3                              line_flag = 1;
 735   3                              line_i = 0;
 736   3                      }
 737   2                      else if(((line_get & 0xff) == 0x83) && (line_flag == 1))
 738   2                      {
 739   3                              line_flag = 2;
 740   3                              line_data[0][line_i] = '\0';
 741   3                              line_m[0] = line_i;
 742   3                              line_i = 0;
 743   3                      }
 744   2                      else if(((line_get & 0xff) == 0x84) && (line_flag == 2))
 745   2                      {
 746   3                              line_m[1] = line_i;
 747   3                              line_flag = 0;
 748   3                              line_data[1][line_i] = '\0';
 749   3                      }
 750   2                      else if(line_flag == 1)
 751   2                      {
 752   3                              line_data[0][line_i] = (uint8)(line_get & 0xff);
 753   3                              line_i++;
 754   3                      }
 755   2                      else if(line_flag == 2)
 756   2                      {
 757   3                              line_data[1][line_i] = (uint8)(line_get & 0xff);
 758   3                              line_i++;
 759   3                      }
 760   2              }while(((line_get >> 8) & 0xff) & Line_RX_STS_FIFO_NOTEMPTY);
 761   1              return;
 762   1      }
 763          
 764          int main()
 765          {
 766   1              enum MODE_STATUS{
 767   1                  NOT_STATUS,
 768   1                  SEESAW,
 769   1                  BLANCO,
 770   1                  PAULWALK,
 771   1                  JUNGLEGYM
 772   1              };
 773   1              char str[30];
 774   1              uint8 modeSelect = NOT_STATUS;
 775   1              uint8 modeCount = 0;
 776   1              uint8 circle_flag;
 777   1              uint8 cross_flag;
 778   1              
 779   1              // ps2 controller data
 780   1              PS2Controller psData;
 781   1              
 782   1              LinData lindata;
 783   1              
 784   1              // speed
 785   1              Speed omuni;
 786   1              omuni.max = 3000;
 787   1          /* Place your initialization/startup code here (e.g. MyInst_Start()) */
 788   1      
 789   1          CyGlobalIntEnable;  /* Uncomment this line to enable global interrupts. */
 790   1          LIN_Start();
 791   1              UART_2_Start();
 792   1              PS2_Start();
 793   1              Line_Start();
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 14  

 794   1              
 795   1              uart_tx_isr_StartEx(uart_tx_isr);
 796   1              uart_rx_isr_StartEx(uart_rx_isr);
 797   1              lin_timer_isr_StartEx(lin_timeout_isr);
 798   1              isr_line_StartEx(line_isr);
 799   1      //      isr_1_StartEx(isr_1_isr);
 800   1              UART_2_EnableTxInt();
 801   1              LIN_EnableRxInt();
 802   1              LIN_EnableTxInt();
 803   1              Line_EnableRxInt();
 804   1              
 805   1              //LIN_Master_PutArray(2,8,Txbuffer);
 806   1              
 807   1              lindata.Select = MOTOR_DATA;
 808   1              // PID data
 809   1              // 0.01*x
 810   1              lindata.K[0] = 30;  // p
 811   1              lindata.K[1] = 30;  // i
 812   1              lindata.K[2] = 0;   // d
 813   1              lindata.Rail.Bit.underRail = 8;
 814   1              
 815   1          // analog押すまで待機
 816   1          while (!PS2_Analog_Flag());
 817   1              
 818   1          // startボタンを押すまで待機
 819   1          while (!PS2_Controller_get().START);
 820   1          
 821   1              for(;;)
 822   1              {
 823   2                      // ps2 get
 824   2                      psData = PS2_Controller_get();
 825   2                      PS2ControlMachine(&omuni,&lindata);
 826   2                      LinSendData(&omuni,&lindata);
 827   2                      
 828   2                      if(psData.SELECT && psData.TRIANGLE)
 829   2                              modeSelect = JUNGLEGYM;
 830   2                      if(psData.SELECT && psData.CIRCLE)
 831   2                              modeSelect = BLANCO;
 832   2                      if(psData.SELECT && psData.CROSS)
 833   2                              modeSelect = SEESAW;
 834   2                      if(psData.SELECT && psData.SQUARE)
 835   2                              modeSelect = PAULWALK;
 836   2                      /*
 837   2                      if(modeSelect == JUNGLEGYM)
 838   2                      {
 839   2                              
 840   2                      }
 841   2                      */
 842   2                      if(modeSelect == BLANCO)
 843   2                      {
 844   3                              // 本当はこの前に子供をブランコに乗せる動きがあるのん
 845   3                              // init
 846   3                              lindata.Air.Bit.blanco1 = 1;
 847   3                              lindata.Air.Bit.blanco2 = 0;
 848   3                              lindata.Air.Bit.blanco3 = 1;
 849   3                              lindata.Air.Bit.roll = 0;
 850   3                              lindata.Air.Bit.incline = 0;
 851   3                              lindata.Rail.Bit.seesawPush = 0;
 852   3                              lindata.Rail.Bit.seesawUp = 0;
 853   3                              //lindata.Rail.Bit.underRail = 24;
 854   3                              modeCount = 0;
 855   3                              circle_flag = 0;
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 15  

 856   3                              cross_flag  = 0;
 857   3                              LinSendData(&omuni,&lindata);
 858   3                              while(1)
 859   3                              {
 860   4                                      psData = PS2_Controller_get();
 861   4                                      // モードカウントを上げる
 862   4                                      if(psData.CIRCLE)
 863   4                                      {
 864   5                                              if(circle_flag)
 865   5                                              {
 866   6                                                      if(modeCount < 9)
 867   6                                                              modeCount++;
 868   6                                                      circle_flag = 0;
 869   6                                              }
 870   5                                      }
 871   4                                      else
 872   4                                      {
 873   5                                              circle_flag = 1;
 874   5                                      }
 875   4                                      // モードカウントを下げる
 876   4                                      if(psData.CROSS)
 877   4                                      {
 878   5                                              if(cross_flag)
 879   5                                              {
 880   6                                                      if(modeCount > 0)
 881   6                                                              modeCount--;
 882   6                                                      cross_flag = 0;
 883   6                                              }
 884   5                                      }
 885   4                                      else
 886   4                                      {
 887   5                                              cross_flag = 1;
 888   5                                      }
 889   4                                      // モードクリア
 890   4                                      if(psData.START)
 891   4                                      {
 892   5                                              modeSelect = NOT_STATUS;
 893   5                                              break;
 894   5                                      }
 895   4                                      // 自由に動いてブランコをつかむ
 896   4                                      if(modeCount == 0)
 897   4                                      {
 898   5                                              lindata.Air.Bit.blanco1 = 1;
 899   5                                              lindata.Air.Bit.blanco2 = 0;
 900   5                                              lindata.Air.Bit.blanco3 = 1;
 901   5                                              // 旋回比:1 速度倍率:0.3
 902   5                                              PS2OmuniControl(&psData,&omuni,1,0.3);
 903   5                                      }
 904   4                                      // ブランコを引っ掛ける
 905   4                                      else if(modeCount == 1)
 906   4                                      {
 907   5                                              lindata.Air.Bit.blanco1 = 1;
 908   5                                              lindata.Air.Bit.blanco2 = 1;
 909   5                                              lindata.Air.Bit.blanco3 = 1;
 910   5                                              //lindata.Rail.Bit.underRail = 24;      
 911   5                                      }
 912   4                                      // ブランコを引く
 913   4                                      else if(modeCount == 2)
 914   4                                      {
 915   5                                              lindata.Air.Bit.blanco1 = 0;
 916   5                                              lindata.Air.Bit.blanco2 = 1;
 917   5                                              lindata.Air.Bit.blanco3 = 1;
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 16  

 918   5                                              //lindata.Rail.Bit.underRail = 5;
 919   5                                              PS2OmuniControl(&psData,&omuni,1,0.3);
 920   5                                      }
 921   4                                      // 子供受け取り
 922   4                                      else if(modeCount == 3)
 923   4                                      {
 924   5                                              lindata.Air.Bit.blanco1 = 1;
 925   5                                              lindata.Air.Bit.blanco2 = 0;
 926   5                                              lindata.Air.Bit.blanco3 = 0;
 927   5                                              //lindata.Rail.Bit.underRail = 5;       
 928   5                                              PS2OmuniControl(&psData,&omuni,1,0.3);
 929   5                                      }
 930   4                                      else
 931   4                                      {
 932   5                                              modeSelect = NOT_STATUS;
 933   5                                              break;
 934   5                                      }
 935   4                                      LinSendData(&omuni,&lindata);
 936   4                              }
 937   3                      }
 938   2                      
 939   2                      if(modeSelect == SEESAW)
 940   2                      {
 941   3                              // init
 942   3                              lindata.Air.Bit.blanco1 = 1;
 943   3                              lindata.Air.Bit.blanco2 = 0;
 944   3                              lindata.Air.Bit.blanco3 = 0;
 945   3                              lindata.Air.Bit.roll = 0;
 946   3                              lindata.Air.Bit.incline = 0;
 947   3                              lindata.Rail.Bit.seesawPush = 0;
 948   3                              lindata.Rail.Bit.seesawUp = 0;
 949   3                              //lindata.Rail.Bit.underRail = 16;
 950   3                              LinSendData(&omuni,&lindata);
 951   3                              modeCount = 0;
 952   3                              circle_flag = 0;
 953   3                              cross_flag  = 0;
 954   3                              LinSendData(&omuni,&lindata);
 955   3                              //CyDelay(1000);
 956   3                              //while()
 957   3                              // 手動モード
 958   3                              //while()
 959   3                              // 半自動モード
 960   3                              while(1)
 961   3                              {
 962   4                                      psData = PS2_Controller_get();
 963   4                                      //PS2AutoMachine(&omuni,&lindata);
 964   4                                      PS2ControlMachine(&omuni,&lindata);
 965   4                                      // モードカウントを上げる
 966   4                                      if(psData.CIRCLE)
 967   4                                      {
 968   5                                              if(circle_flag)
 969   5                                              {
 970   6                                                      if(modeCount < 10)
 971   6                                                              modeCount++;
 972   6                                                      circle_flag = 0;
 973   6                                              }
 974   5                                      }
 975   4                                      else
 976   4                                      {
 977   5                                              circle_flag = 1;
 978   5                                      }
 979   4                                      // モードカウントを下げる
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 17  

 980   4                                      if(psData.CROSS)
 981   4                                      {
 982   5                                              if(cross_flag)
 983   5                                              {
 984   6                                                      if(modeCount > 0)
 985   6                                                              modeCount--;
 986   6                                                      cross_flag = 0;
 987   6                                              }
 988   5                                      }
 989   4                                      else
 990   4                                      {
 991   5                                              cross_flag = 1;
 992   5                                      }
 993   4                                      // モードクリア
 994   4                                      if(psData.START)
 995   4                                      {
 996   5                                              modeSelect = NOT_STATUS;
 997   5                                              break;
 998   5                                      }
 999   4                                      // 自由に動くのん
1000   4                                      if(modeCount == 0)
1001   4                                      {
1002   5                                              PS2OmuniControl(&psData,&omuni,1,0.3);
1003   5                                      }
1004   4                                      // 子供ロボットを置くのん(未実装)
1005   4                                      // 白線をなぞるように動くのん
1006   4                                      else if(modeCount == 1)
1007   4                                      {
1008   5                                              lindata.Air.Bit.blanco1 = 1;
1009   5                                              lindata.Air.Bit.blanco2 = 0;
1010   5                                              lindata.Air.Bit.blanco3 = 0;
1011   5                                              lindata.Rail.Bit.seesawPush = 0;
1012   5                                              lindata.Rail.Bit.seesawUp = 0;
1013   5                                              PS2AutoMachine(&omuni,&lindata);
1014   5                                      }
1015   4                                      // 1ラップ目降下
1016   4                                      else if(modeCount == 2)
1017   4                                              lindata.Rail.Bit.seesawUp = 1;
1018   4                                      // 1ラップ目上昇
1019   4                                      else if(modeCount == 3)
1020   4                                              lindata.Rail.Bit.seesawUp = 0;
1021   4                                      // 2ラップ目降下
1022   4                                      else if(modeCount == 4)
1023   4                                              lindata.Rail.Bit.seesawUp = 1;
1024   4                                      // 2ラップ目上昇
1025   4                                      else if(modeCount == 5)
1026   4                                              lindata.Rail.Bit.seesawUp = 0;
1027   4                                      // 3ラップ目降下
1028   4                                      else if(modeCount == 6)
1029   4                                              lindata.Rail.Bit.seesawUp = 1;
1030   4                                      // 3ラップ目上昇
1031   4                                      else if(modeCount == 7)
1032   4                                              lindata.Rail.Bit.seesawUp = 0;
1033   4                                      // 白線をなぞるように動くのん
1034   4                                      else if(modeCount == 8)
1035   4                                      {
1036   5                                              lindata.Air.Bit.blanco1 = 1;
1037   5                                              lindata.Air.Bit.blanco2 = 0;
1038   5                                              lindata.Air.Bit.blanco3 = 0;
1039   5                                              lindata.Rail.Bit.seesawPush = 0;
1040   5                                              lindata.Rail.Bit.seesawUp = 0;
1041   5                                              PS2AutoMachine(&omuni,&lindata);
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 18  

1042   5                                      }
1043   4                                      // 子供を回収するのん(未実装)
1044   4                                      // モード終了
1045   4                                      else
1046   4                                      {
1047   5                                              modeSelect = NOT_STATUS;
1048   5                                              break;
1049   5                                      }
1050   4                                      LinSendData(&omuni,&lindata);
1051   4                              }
1052   3                      }
1053   2                      /*
1054   2                      if(modeSelect == PAULWALK)
1055   2                      {
1056   2                              
1057   2                      }
1058   2                      */
1059   2                      if(UART_2_ReadTxStatus() & UART_2_TX_STS_FIFO_EMPTY)
1060   2                      {
1061   3                              //sprintf(str,"%4d,%4d,%4d,%5d,%5d,%5d\n",(int16)omuni.x,(int)omuni.y,(int)omuni.m,(int16)omuni.a,(int1
             -6)omuni.b,(int16)omuni.c);
1062   3                              
1063   3                              sprintf(str,"%4d\n",(int)lindata.Air.Trans);
1064   3                              //sprintf(str,"L:%2x,%2x R:%2x,%2x\n",(int)psData.ANALOG_LX,(int)psData.ANALOG_LY,(int)psData.ANALOG_RX
             -,(int)psData.ANALOG_RY);
1065   3                              //sprintf(str,"R:%4x,%4x  L:%4x,%4x\n",(int)line_data[0][0],(int)line_data[0][1],(int)line_data[1][0],(
             -int)line_data[1][1]);
1066   3                              //sprintf(str,"Rail = %d\n",(int)lindata.Rail);
1067   3                              UART_2_PutString(str);
1068   3                      }
1069   2          }
1070   1      }
1071          
1072          uint16 LIN_Master_id_send(const uint8 id)
1073          {
1074   1              uint8 p0 = 0;
1075   1              uint8 p1 = 0;
1076   1              uint8 get_id;
1077   1              if(lin_id_flag == 0)
1078   1              {
1079   2                      p0 = (id&0x01)^((id >> 1)&0x01)^((id >> 2)&0x01)^((id >> 4)&0x01);
1080   2                      p1 = ~(((id >> 1)&0x01)^((id >> 3)&0x01)^((id >> 4)&0x01)^((id >> 5)&0x01));
1081   2                      get_id = (id&0x3f)|((p0 << 6)&0x40)|((p1 << 7)&0x80);
1082   2                      LIN_SendBreak(LIN_SEND_WAIT_REINIT);
1083   2                      CyDelayUs(100);
1084   2                      LIN_ClearTxBuffer();
1085   2                      LIN_ClearRxBuffer();
1086   2                      LIN_PutChar(0x55);
1087   2                      LIN_PutChar(get_id);
1088   2                      lin_id_flag = 1;
1089   2                      return 0xff&get_id;
1090   2              }
1091   1              else
1092   1              {
1093   2                      return 0x100;
1094   2              }
1095   1      }
1096          
1097          uint8 LIN_Master_GetArray(const uint8 id,const uint8 length,const uint8* buffer)
1098          {
1099   1              if((lin_rx_flag & LIN_RX_EMPTY) &(lin_tx_flag == 0))
1100   1              {
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 19  

1101   2                      rx_sum = LIN_Master_id_send(id);
1102   2                      if(rx_sum == 0x100)
1103   2                      {
1104   3                              lin_rx_flag |= LIN_RX_EMPTY;
1105   3                              lin_rx_flag &= ~LIN_RX_SEND;
1106   3                              LIN_Timer_Stop();
1107   3                              return 1;
1108   3                      }               
1109   2                      LIN_ClearRxBuffer();
1110   2                      rx_length = length;
1111   2                      rx_buffer = buffer;
1112   2                      rx_i = 0;
1113   2                      lin_rx_sync_flag = 0;
1114   2                      lin_rx_flag &= ~LIN_RX_EMPTY;
1115   2                      lin_rx_flag &= ~LIN_RX_COMPLETE;
1116   2                      lin_rx_flag |= LIN_RX_SEND;
1117   2                      LIN_Timer_WriteCounter(255);
1118   2                      LIN_Timer_Start();
1119   2      
1120   2              }
1121   1              else
1122   1              {
1123   2                      return 1;
1124   2              }
1125   1              return 0;
1126   1      }
1127          
1128          uint8 LIN_Master_ReadRxStatus()
1129          {
1130   1              uint8 flag = lin_rx_flag;
1131   1              //lin_rx_flag &= ~LIN_RX_SUM_ERR; 
1132   1              return flag;
1133   1      }
1134          
1135          uint8 LIN_Master_ReadTxStatus()
1136          {
1137   1              return lin_tx_flag;
1138   1      }
1139          
1140          uint8 LIN_Master_PutArray(const uint8 id,const uint8 length,const uint8 *buffer)
1141          {
1142   1              if((lin_tx_flag == 0))/* && (lin_rx_flag & LIN_RX_EMPTY))*/
1143   1              {
1144   2                      uint8 i;
1145   2                      uint16 sum;
1146   2                      LIN_DisableTxInt();
1147   2                      sum = LIN_Master_id_send(id);
1148   2                      lin_tx_flag = LIN_TX_SEND;
1149   2                      if(sum == 0x100)
1150   2                      {
1151   3                              LIN_EnableTxInt();
1152   3                              return 1;
1153   3                      }
1154   2                      
1155   2                      //LIN_ClearTxBuffer();
1156   2                      for(i = 0; i < length; i++)
1157   2                      {
1158   3                              sum += buffer[i];
1159   3                              LIN_PutChar(buffer[i]);
1160   3                              //while(!(LIN_ReadTxStatus() & LIN_TX_STS_COMPLETE));   
1161   3                      }
1162   2                      
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 20  

1163   2                      sum = 0xff & (~( ((sum >> 8) & 0x7) + (sum & 0xff)));
1164   2                      LIN_PutChar(sum);
1165   2                      //while(!(LIN_ReadTxStatus() & LIN_TX_STS_COMPLETE));
1166   2                      lin_tx_flag = LIN_TX_SEND;
1167   2                      LIN_EnableTxInt();
1168   2                      return 0;
1169   2              }
1170   1              else
1171   1              {
1172   2                      return 1;
1173   2              }
1174   1      }
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 21  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _calcSpeed (BEGIN)
                                           ; SOURCE LINE # 101
0000 900000      R     MOV     DPTR,#sp
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 102
                                           ; SOURCE LINE # 103
0006 7F00              MOV     R7,#00H
0008 7E00              MOV     R6,#00H
000A 7D40              MOV     R5,#040H
000C 7C40              MOV     R4,#040H
000E C004              PUSH    AR4
0010 C005              PUSH    AR5
0012 C006              PUSH    AR6
0014 C007              PUSH    AR7
0016 7F00              MOV     R7,#00H
0018 7E00              MOV     R6,#00H
001A 7D00              MOV     R5,#00H
001C 7C3F              MOV     R4,#03FH
001E 900000      E     MOV     DPTR,#?_pow?BYTE+04H
0021 120000      E     LCALL   ?C?LSTXDATA
0024 D007              POP     AR7
0026 D006              POP     AR6
0028 D005              POP     AR5
002A D004              POP     AR4
002C 120000      E     LCALL   _pow
002F 900000      R     MOV     DPTR,#root3
0032 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 104
0035 7F00              MOV     R7,#00H
0037 7E00              MOV     R6,#00H
0039 7D80              MOV     R5,#080H
003B 7C3F              MOV     R4,#03FH
003D 900000      R     MOV     DPTR,#R_speed
0040 120000      E     LCALL   ?C?LLDXDATA0
0043 120000      E     LCALL   ?C?FPADD
0046 900000      R     MOV     DPTR,#root3
0049 120000      E     LCALL   ?C?LLDXDATA0
004C 120000      E     LCALL   ?C?FPADD
004F 7B00              MOV     R3,#00H
0051 7A00              MOV     R2,#00H
0053 7900              MOV     R1,#00H
0055 7843              MOV     R0,#043H
0057 120000      E     LCALL   ?C?FPMUL
005A C004              PUSH    AR4
005C C005              PUSH    AR5
005E C006              PUSH    AR6
0060 C007              PUSH    AR7
0062 900000      R     MOV     DPTR,#sp
0065 120000      E     LCALL   ?C?PLDXDATA
0068 E9                MOV     A,R1
0069 2409              ADD     A,#09H
006B F9                MOV     R1,A
006C EA                MOV     A,R2
006D 3400              ADDC    A,#00H
006F FA                MOV     R2,A
0070 120000      E     LCALL   ?C?ILDPTR
0073 FD                MOV     R5,A
0074 ACF0              MOV     R4,B
0076 EC                MOV     A,R4
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 22  

0077 120000      E     LCALL   ?C?FCASTI
007A D003              POP     AR3
007C D002              POP     AR2
007E D001              POP     AR1
0080 D000              POP     AR0
0082 120000      E     LCALL   ?C?FPDIV
0085 900000      R     MOV     DPTR,#coef
0088 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 105
008B 900000      R     MOV     DPTR,#sp
008E 120000      E     LCALL   ?C?PLDXDATA
0091 E9                MOV     A,R1
0092 2401              ADD     A,#01H
0094 F9                MOV     R1,A
0095 EA                MOV     A,R2
0096 3400              ADDC    A,#00H
0098 FA                MOV     R2,A
0099 120000      E     LCALL   ?C?CLDPTR
009C FC                MOV     R4,A
009D EC                MOV     A,R4
009E 120000      E     LCALL   ?C?FCASTC
00A1 900000      R     MOV     DPTR,#root3
00A4 120000      E     LCALL   ?C?LLDXDATA0
00A7 120000      E     LCALL   ?C?FPMUL
00AA 900000      R     MOV     DPTR,#y_speed
00AD 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 106
00B0 900000      R     MOV     DPTR,#sp
00B3 120000      E     LCALL   ?C?PLDXDATA
00B6 E9                MOV     A,R1
00B7 2402              ADD     A,#02H
00B9 F9                MOV     R1,A
00BA EA                MOV     A,R2
00BB 3400              ADDC    A,#00H
00BD FA                MOV     R2,A
00BE 120000      E     LCALL   ?C?CLDPTR
00C1 FC                MOV     R4,A
00C2 EC                MOV     A,R4
00C3 120000      E     LCALL   ?C?FCASTC
00C6 900000      R     MOV     DPTR,#R_speed
00C9 120000      E     LCALL   ?C?LLDXDATA0
00CC 120000      E     LCALL   ?C?FPMUL
00CF 900000      R     MOV     DPTR,#m_speed
00D2 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 108
00D5 900000      R     MOV     DPTR,#sp
00D8 120000      E     LCALL   ?C?PLDXDATA
00DB 120000      E     LCALL   ?C?CLDPTR
00DE FC                MOV     R4,A
00DF EC                MOV     A,R4
00E0 120000      E     LCALL   ?C?FCASTC
00E3 7B00              MOV     R3,#00H
00E5 7A00              MOV     R2,#00H
00E7 7900              MOV     R1,#00H
00E9 78C0              MOV     R0,#0C0H
00EB 120000      E     LCALL   ?C?FPMUL
00EE 900000      R     MOV     DPTR,#m_speed
00F1 120000      E     LCALL   ?C?LLDXDATA0
00F4 120000      E     LCALL   ?C?FPADD
00F7 900000      R     MOV     DPTR,#tmpa
00FA 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 109
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 23  

00FD 900000      R     MOV     DPTR,#sp
0100 120000      E     LCALL   ?C?PLDXDATA
0103 120000      E     LCALL   ?C?CLDPTR
0106 FC                MOV     R4,A
0107 EC                MOV     A,R4
0108 120000      E     LCALL   ?C?FCASTC
010B 900000      R     MOV     DPTR,#y_speed
010E 120000      E     LCALL   ?C?LLDXDATA0
0111 120000      E     LCALL   ?C?FPSUB
0114 900000      R     MOV     DPTR,#m_speed
0117 120000      E     LCALL   ?C?LLDXDATA0
011A 120000      E     LCALL   ?C?FPADD
011D 900000      R     MOV     DPTR,#tmpb
0120 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 110
0123 900000      R     MOV     DPTR,#sp
0126 120000      E     LCALL   ?C?PLDXDATA
0129 120000      E     LCALL   ?C?CLDPTR
012C FC                MOV     R4,A
012D EC                MOV     A,R4
012E 120000      E     LCALL   ?C?FCASTC
0131 900000      R     MOV     DPTR,#y_speed
0134 120000      E     LCALL   ?C?LLDXDATA0
0137 120000      E     LCALL   ?C?FPADD
013A 900000      R     MOV     DPTR,#m_speed
013D 120000      E     LCALL   ?C?LLDXDATA0
0140 120000      E     LCALL   ?C?FPADD
0143 900000      R     MOV     DPTR,#tmpc
0146 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 112
0149 900000      R     MOV     DPTR,#tmpa
014C 120000      E     LCALL   ?C?LLDXDATA
014F 900000      R     MOV     DPTR,#coef
0152 120000      E     LCALL   ?C?LLDXDATA0
0155 120000      E     LCALL   ?C?FPMUL
0158 7B00              MOV     R3,#00H
015A 7A00              MOV     R2,#00H
015C 7900              MOV     R1,#00H
015E 783F              MOV     R0,#03FH
0160 120000      E     LCALL   ?C?FPADD
0163 120000      E     LCALL   _floor
0166 120000      E     LCALL   ?C?CASTF
0169 900000      R     MOV     DPTR,#sp
016C 120000      E     LCALL   ?C?PLDXDATA
016F E9                MOV     A,R1
0170 2403              ADD     A,#03H
0172 F9                MOV     R1,A
0173 EA                MOV     A,R2
0174 3400              ADDC    A,#00H
0176 FA                MOV     R2,A
0177 EE                MOV     A,R6
0178 8FF0              MOV     B,R7
017A 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 113
017D 900000      R     MOV     DPTR,#tmpb
0180 120000      E     LCALL   ?C?LLDXDATA
0183 900000      R     MOV     DPTR,#coef
0186 120000      E     LCALL   ?C?LLDXDATA0
0189 120000      E     LCALL   ?C?FPMUL
018C 7B00              MOV     R3,#00H
018E 7A00              MOV     R2,#00H
0190 7900              MOV     R1,#00H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 24  

0192 783F              MOV     R0,#03FH
0194 120000      E     LCALL   ?C?FPADD
0197 120000      E     LCALL   _floor
019A 120000      E     LCALL   ?C?CASTF
019D 900000      R     MOV     DPTR,#sp
01A0 120000      E     LCALL   ?C?PLDXDATA
01A3 E9                MOV     A,R1
01A4 2405              ADD     A,#05H
01A6 F9                MOV     R1,A
01A7 EA                MOV     A,R2
01A8 3400              ADDC    A,#00H
01AA FA                MOV     R2,A
01AB EE                MOV     A,R6
01AC 8FF0              MOV     B,R7
01AE 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 114
01B1 900000      R     MOV     DPTR,#tmpc
01B4 120000      E     LCALL   ?C?LLDXDATA
01B7 900000      R     MOV     DPTR,#coef
01BA 120000      E     LCALL   ?C?LLDXDATA0
01BD 120000      E     LCALL   ?C?FPMUL
01C0 7B00              MOV     R3,#00H
01C2 7A00              MOV     R2,#00H
01C4 7900              MOV     R1,#00H
01C6 783F              MOV     R0,#03FH
01C8 120000      E     LCALL   ?C?FPADD
01CB 120000      E     LCALL   _floor
01CE 120000      E     LCALL   ?C?CASTF
01D1 900000      R     MOV     DPTR,#sp
01D4 120000      E     LCALL   ?C?PLDXDATA
01D7 E9                MOV     A,R1
01D8 2407              ADD     A,#07H
01DA F9                MOV     R1,A
01DB EA                MOV     A,R2
01DC 3400              ADDC    A,#00H
01DE FA                MOV     R2,A
01DF EE                MOV     A,R6
01E0 8FF0              MOV     B,R7
01E2 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 117
01E5         ?C0001:
01E5 22                RET     
             ; FUNCTION _calcSpeed (END)

             ; FUNCTION _PS2OmuniControl (BEGIN)
                                           ; SOURCE LINE # 122
0000 900000      R     MOV     DPTR,#ppsData
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 123
                                           ; SOURCE LINE # 124
0006 120000      E     LCALL   PS2_Analog_Flag
0009 5005              JNC     ?C0003
000B 120000      E     LCALL   PS2_Timeout_Flag
000E 5048              JNC     ?C0002
0010         ?C0003:
                                           ; SOURCE LINE # 125
                                           ; SOURCE LINE # 126
0010 900000      R     MOV     DPTR,#ppsData
0013 120000      E     LCALL   ?C?PLDXDATA
0016 E9                MOV     A,R1
0017 2404              ADD     A,#04H
0019 F9                MOV     R1,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 25  

001A EA                MOV     A,R2
001B 3400              ADDC    A,#00H
001D FA                MOV     R2,A
001E E4                CLR     A
001F 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 127
0022 900000      R     MOV     DPTR,#ppsData
0025 120000      E     LCALL   ?C?PLDXDATA
0028 E9                MOV     A,R1
0029 2405              ADD     A,#05H
002B F9                MOV     R1,A
002C EA                MOV     A,R2
002D 3400              ADDC    A,#00H
002F FA                MOV     R2,A
0030 E4                CLR     A
0031 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 128
0034 900000      R     MOV     DPTR,#ppsData
0037 120000      E     LCALL   ?C?PLDXDATA
003A E9                MOV     A,R1
003B 2402              ADD     A,#02H
003D F9                MOV     R1,A
003E EA                MOV     A,R2
003F 3400              ADDC    A,#00H
0041 FA                MOV     R2,A
0042 E4                CLR     A
0043 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 129
0046 900000      R     MOV     DPTR,#ppsData
0049 120000      E     LCALL   ?C?PLDXDATA
004C E9                MOV     A,R1
004D 2403              ADD     A,#03H
004F F9                MOV     R1,A
0050 EA                MOV     A,R2
0051 3400              ADDC    A,#00H
0053 FA                MOV     R2,A
0054 E4                CLR     A
0055 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 130
0058         ?C0002:
                                           ; SOURCE LINE # 133
0058 900000      R     MOV     DPTR,#ppsData
005B 120000      E     LCALL   ?C?PLDXDATA
005E E9                MOV     A,R1
005F 2404              ADD     A,#04H
0061 F9                MOV     R1,A
0062 EA                MOV     A,R2
0063 3400              ADDC    A,#00H
0065 FA                MOV     R2,A
0066 120000      E     LCALL   ?C?CLDPTR
0069 FF                MOV     R7,A
006A EF                MOV     A,R7
006B 7018              JNZ     ?C0005
006D 900000      R     MOV     DPTR,#ppsData
0070 120000      E     LCALL   ?C?PLDXDATA
0073 E9                MOV     A,R1
0074 2405              ADD     A,#05H
0076 F9                MOV     R1,A
0077 EA                MOV     A,R2
0078 3400              ADDC    A,#00H
007A FA                MOV     R2,A
007B 120000      E     LCALL   ?C?CLDPTR
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 26  

007E FF                MOV     R7,A
007F EF                MOV     A,R7
0080 7003              JNZ     $ + 5H
0082 020000      R     LJMP    ?C0004
0085         ?C0005:
                                           ; SOURCE LINE # 134
                                           ; SOURCE LINE # 135
0085 900000      R     MOV     DPTR,#ppsData
0088 120000      E     LCALL   ?C?PLDXDATA
008B E9                MOV     A,R1
008C 2404              ADD     A,#04H
008E F9                MOV     R1,A
008F EA                MOV     A,R2
0090 3400              ADDC    A,#00H
0092 FA                MOV     R2,A
0093 120000      E     LCALL   ?C?CLDPTR
0096 FF                MOV     R7,A
0097 EF                MOV     A,R7
0098 D3                SETB    C
0099 94A7              SUBB    A,#0A7H
009B 4026              JC      ?C0006
                                           ; SOURCE LINE # 136
009D 900000      R     MOV     DPTR,#ppsData
00A0 120000      E     LCALL   ?C?PLDXDATA
00A3 E9                MOV     A,R1
00A4 2404              ADD     A,#04H
00A6 F9                MOV     R1,A
00A7 EA                MOV     A,R2
00A8 3400              ADDC    A,#00H
00AA FA                MOV     R2,A
00AB 120000      E     LCALL   ?C?CLDPTR
00AE FF                MOV     R7,A
00AF EF                MOV     A,R7
00B0 2480              ADD     A,#080H
00B2 FF                MOV     R7,A
00B3 EF                MOV     A,R7
00B4 F4                CPL     A
00B5 04                INC     A
00B6 FF                MOV     R7,A
00B7 900000      R     MOV     DPTR,#omuni
00BA 120000      E     LCALL   ?C?PLDXDATA
00BD EF                MOV     A,R7
00BE 120000      E     LCALL   ?C?CSTPTR
00C1 8045              SJMP    ?C0007
00C3         ?C0006:
                                           ; SOURCE LINE # 137
00C3 900000      R     MOV     DPTR,#ppsData
00C6 120000      E     LCALL   ?C?PLDXDATA
00C9 E9                MOV     A,R1
00CA 2404              ADD     A,#04H
00CC F9                MOV     R1,A
00CD EA                MOV     A,R2
00CE 3400              ADDC    A,#00H
00D0 FA                MOV     R2,A
00D1 120000      E     LCALL   ?C?CLDPTR
00D4 FF                MOV     R7,A
00D5 EF                MOV     A,R7
00D6 C3                CLR     C
00D7 9457              SUBB    A,#057H
00D9 5023              JNC     ?C0008
                                           ; SOURCE LINE # 138
00DB 900000      R     MOV     DPTR,#ppsData
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 27  

00DE 120000      E     LCALL   ?C?PLDXDATA
00E1 E9                MOV     A,R1
00E2 2404              ADD     A,#04H
00E4 F9                MOV     R1,A
00E5 EA                MOV     A,R2
00E6 3400              ADDC    A,#00H
00E8 FA                MOV     R2,A
00E9 120000      E     LCALL   ?C?CLDPTR
00EC FF                MOV     R7,A
00ED C3                CLR     C
00EE 747F              MOV     A,#07FH
00F0 9F                SUBB    A,R7
00F1 FF                MOV     R7,A
00F2 900000      R     MOV     DPTR,#omuni
00F5 120000      E     LCALL   ?C?PLDXDATA
00F8 EF                MOV     A,R7
00F9 120000      E     LCALL   ?C?CSTPTR
00FC 800A              SJMP    ?C0007
00FE         ?C0008:
                                           ; SOURCE LINE # 140
00FE 900000      R     MOV     DPTR,#omuni
0101 120000      E     LCALL   ?C?PLDXDATA
0104 E4                CLR     A
0105 120000      E     LCALL   ?C?CSTPTR
0108         ?C0007:
                                           ; SOURCE LINE # 142
0108 900000      R     MOV     DPTR,#ppsData
010B 120000      E     LCALL   ?C?PLDXDATA
010E E9                MOV     A,R1
010F 2405              ADD     A,#05H
0111 F9                MOV     R1,A
0112 EA                MOV     A,R2
0113 3400              ADDC    A,#00H
0115 FA                MOV     R2,A
0116 120000      E     LCALL   ?C?CLDPTR
0119 FF                MOV     R7,A
011A EF                MOV     A,R7
011B D3                SETB    C
011C 94A7              SUBB    A,#0A7H
011E 402A              JC      ?C0010
                                           ; SOURCE LINE # 143
0120 900000      R     MOV     DPTR,#ppsData
0123 120000      E     LCALL   ?C?PLDXDATA
0126 E9                MOV     A,R1
0127 2405              ADD     A,#05H
0129 F9                MOV     R1,A
012A EA                MOV     A,R2
012B 3400              ADDC    A,#00H
012D FA                MOV     R2,A
012E 120000      E     LCALL   ?C?CLDPTR
0131 FF                MOV     R7,A
0132 EF                MOV     A,R7
0133 2480              ADD     A,#080H
0135 FF                MOV     R7,A
0136 900000      R     MOV     DPTR,#omuni
0139 120000      E     LCALL   ?C?PLDXDATA
013C E9                MOV     A,R1
013D 2401              ADD     A,#01H
013F F9                MOV     R1,A
0140 EA                MOV     A,R2
0141 3400              ADDC    A,#00H
0143 FA                MOV     R2,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 28  

0144 EF                MOV     A,R7
0145 120000      E     LCALL   ?C?CSTPTR
0148 8059              SJMP    ?C0004
014A         ?C0010:
                                           ; SOURCE LINE # 144
014A 900000      R     MOV     DPTR,#ppsData
014D 120000      E     LCALL   ?C?PLDXDATA
0150 E9                MOV     A,R1
0151 2405              ADD     A,#05H
0153 F9                MOV     R1,A
0154 EA                MOV     A,R2
0155 3400              ADDC    A,#00H
0157 FA                MOV     R2,A
0158 120000      E     LCALL   ?C?CLDPTR
015B FF                MOV     R7,A
015C EF                MOV     A,R7
015D C3                CLR     C
015E 9457              SUBB    A,#057H
0160 502F              JNC     ?C0012
                                           ; SOURCE LINE # 145
0162 900000      R     MOV     DPTR,#ppsData
0165 120000      E     LCALL   ?C?PLDXDATA
0168 E9                MOV     A,R1
0169 2405              ADD     A,#05H
016B F9                MOV     R1,A
016C EA                MOV     A,R2
016D 3400              ADDC    A,#00H
016F FA                MOV     R2,A
0170 120000      E     LCALL   ?C?CLDPTR
0173 FF                MOV     R7,A
0174 C3                CLR     C
0175 747F              MOV     A,#07FH
0177 9F                SUBB    A,R7
0178 FF                MOV     R7,A
0179 EF                MOV     A,R7
017A F4                CPL     A
017B 04                INC     A
017C FF                MOV     R7,A
017D 900000      R     MOV     DPTR,#omuni
0180 120000      E     LCALL   ?C?PLDXDATA
0183 E9                MOV     A,R1
0184 2401              ADD     A,#01H
0186 F9                MOV     R1,A
0187 EA                MOV     A,R2
0188 3400              ADDC    A,#00H
018A FA                MOV     R2,A
018B EF                MOV     A,R7
018C 120000      E     LCALL   ?C?CSTPTR
018F 8012              SJMP    ?C0004
0191         ?C0012:
                                           ; SOURCE LINE # 147
0191 900000      R     MOV     DPTR,#omuni
0194 120000      E     LCALL   ?C?PLDXDATA
0197 E9                MOV     A,R1
0198 2401              ADD     A,#01H
019A F9                MOV     R1,A
019B EA                MOV     A,R2
019C 3400              ADDC    A,#00H
019E FA                MOV     R2,A
019F E4                CLR     A
01A0 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 148
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 29  

01A3         ?C0004:
                                           ; SOURCE LINE # 149
01A3 900000      R     MOV     DPTR,#ppsData
01A6 120000      E     LCALL   ?C?PLDXDATA
01A9 E9                MOV     A,R1
01AA 2402              ADD     A,#02H
01AC F9                MOV     R1,A
01AD EA                MOV     A,R2
01AE 3400              ADDC    A,#00H
01B0 FA                MOV     R2,A
01B1 120000      E     LCALL   ?C?CLDPTR
01B4 FF                MOV     R7,A
01B5 EF                MOV     A,R7
01B6 7018              JNZ     ?C0015
01B8 900000      R     MOV     DPTR,#ppsData
01BB 120000      E     LCALL   ?C?PLDXDATA
01BE E9                MOV     A,R1
01BF 2403              ADD     A,#03H
01C1 F9                MOV     R1,A
01C2 EA                MOV     A,R2
01C3 3400              ADDC    A,#00H
01C5 FA                MOV     R2,A
01C6 120000      E     LCALL   ?C?CLDPTR
01C9 FF                MOV     R7,A
01CA EF                MOV     A,R7
01CB 7003              JNZ     $ + 5H
01CD 020000      R     LJMP    ?C0014
01D0         ?C0015:
                                           ; SOURCE LINE # 150
                                           ; SOURCE LINE # 151
01D0 900000      R     MOV     DPTR,#ppsData
01D3 120000      E     LCALL   ?C?PLDXDATA
01D6 E9                MOV     A,R1
01D7 2402              ADD     A,#02H
01D9 F9                MOV     R1,A
01DA EA                MOV     A,R2
01DB 3400              ADDC    A,#00H
01DD FA                MOV     R2,A
01DE 120000      E     LCALL   ?C?CLDPTR
01E1 FF                MOV     R7,A
01E2 EF                MOV     A,R7
01E3 D3                SETB    C
01E4 94A7              SUBB    A,#0A7H
01E6 4059              JC      ?C0016
                                           ; SOURCE LINE # 152
                                           ; SOURCE LINE # 153
01E8 900000      R     MOV     DPTR,#ppsData
01EB 120000      E     LCALL   ?C?PLDXDATA
01EE E9                MOV     A,R1
01EF 2402              ADD     A,#02H
01F1 F9                MOV     R1,A
01F2 EA                MOV     A,R2
01F3 3400              ADDC    A,#00H
01F5 FA                MOV     R2,A
01F6 120000      E     LCALL   ?C?CLDPTR
01F9 FF                MOV     R7,A
01FA EF                MOV     A,R7
01FB 2480              ADD     A,#080H
01FD FF                MOV     R7,A
01FE EF                MOV     A,R7
01FF F4                CPL     A
0200 04                INC     A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 30  

0201 FF                MOV     R7,A
0202 900000      R     MOV     DPTR,#omuni
0205 120000      E     LCALL   ?C?PLDXDATA
0208 E9                MOV     A,R1
0209 2402              ADD     A,#02H
020B F9                MOV     R1,A
020C EA                MOV     A,R2
020D 3400              ADDC    A,#00H
020F FA                MOV     R2,A
0210 EF                MOV     A,R7
0211 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 154
0214 900000      R     MOV     DPTR,#omuni
0217 120000      E     LCALL   ?C?PLDXDATA
021A E9                MOV     A,R1
021B 2402              ADD     A,#02H
021D F9                MOV     R1,A
021E EA                MOV     A,R2
021F 3400              ADDC    A,#00H
0221 FA                MOV     R2,A
0222 120000      E     LCALL   ?C?CLDPTR
0225 FC                MOV     R4,A
0226 EC                MOV     A,R4
0227 120000      E     LCALL   ?C?FCASTC
022A 7B00              MOV     R3,#00H
022C 7A00              MOV     R2,#00H
022E 7900              MOV     R1,#00H
0230 7843              MOV     R0,#043H
0232 120000      E     LCALL   ?C?FPDIV
0235 120000      E     LCALL   ?C?FPNEG
0238 900000      R     MOV     DPTR,#R_speed
023B 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 155
023E 020000      R     LJMP    ?C0014
0241         ?C0016:
                                           ; SOURCE LINE # 156
0241 900000      R     MOV     DPTR,#ppsData
0244 120000      E     LCALL   ?C?PLDXDATA
0247 E9                MOV     A,R1
0248 2402              ADD     A,#02H
024A F9                MOV     R1,A
024B EA                MOV     A,R2
024C 3400              ADDC    A,#00H
024E FA                MOV     R2,A
024F 120000      E     LCALL   ?C?CLDPTR
0252 FF                MOV     R7,A
0253 EF                MOV     A,R7
0254 C3                CLR     C
0255 9457              SUBB    A,#057H
0257 5052              JNC     ?C0018
                                           ; SOURCE LINE # 157
                                           ; SOURCE LINE # 158
0259 900000      R     MOV     DPTR,#ppsData
025C 120000      E     LCALL   ?C?PLDXDATA
025F E9                MOV     A,R1
0260 2402              ADD     A,#02H
0262 F9                MOV     R1,A
0263 EA                MOV     A,R2
0264 3400              ADDC    A,#00H
0266 FA                MOV     R2,A
0267 120000      E     LCALL   ?C?CLDPTR
026A FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 31  

026B C3                CLR     C
026C 747F              MOV     A,#07FH
026E 9F                SUBB    A,R7
026F FF                MOV     R7,A
0270 900000      R     MOV     DPTR,#omuni
0273 120000      E     LCALL   ?C?PLDXDATA
0276 E9                MOV     A,R1
0277 2402              ADD     A,#02H
0279 F9                MOV     R1,A
027A EA                MOV     A,R2
027B 3400              ADDC    A,#00H
027D FA                MOV     R2,A
027E EF                MOV     A,R7
027F 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 159
0282 900000      R     MOV     DPTR,#omuni
0285 120000      E     LCALL   ?C?PLDXDATA
0288 E9                MOV     A,R1
0289 2402              ADD     A,#02H
028B F9                MOV     R1,A
028C EA                MOV     A,R2
028D 3400              ADDC    A,#00H
028F FA                MOV     R2,A
0290 120000      E     LCALL   ?C?CLDPTR
0293 FC                MOV     R4,A
0294 EC                MOV     A,R4
0295 120000      E     LCALL   ?C?FCASTC
0298 7B00              MOV     R3,#00H
029A 7A00              MOV     R2,#00H
029C 7900              MOV     R1,#00H
029E 7843              MOV     R0,#043H
02A0 120000      E     LCALL   ?C?FPDIV
02A3 900000      R     MOV     DPTR,#R_speed
02A6 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 160
02A9 8020              SJMP    ?C0014
02AB         ?C0018:
                                           ; SOURCE LINE # 162
                                           ; SOURCE LINE # 163
02AB 900000      R     MOV     DPTR,#omuni
02AE 120000      E     LCALL   ?C?PLDXDATA
02B1 E9                MOV     A,R1
02B2 2402              ADD     A,#02H
02B4 F9                MOV     R1,A
02B5 EA                MOV     A,R2
02B6 3400              ADDC    A,#00H
02B8 FA                MOV     R2,A
02B9 E4                CLR     A
02BA 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 164
02BD 7F00              MOV     R7,#00H
02BF 7E00              MOV     R6,#00H
02C1 7D00              MOV     R5,#00H
02C3 7C00              MOV     R4,#00H
02C5 900000      R     MOV     DPTR,#R_speed
02C8 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 165
                                           ; SOURCE LINE # 166
02CB         ?C0014:
                                           ; SOURCE LINE # 167
02CB 7F00              MOV     R7,#00H
02CD 7E00              MOV     R6,#00H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 32  

02CF 7D80              MOV     R5,#080H
02D1 7C3F              MOV     R4,#03FH
02D3 900000      R     MOV     DPTR,#mag
02D6 120000      E     LCALL   ?C?LLDXDATA0
02D9 120000      E     LCALL   ?C?FPCMP3
02DC 6002              JZ      $ + 4H
02DE 5058              JNC     ?C0020
                                           ; SOURCE LINE # 168
                                           ; SOURCE LINE # 169
02E0 900000      R     MOV     DPTR,#omuni
02E3 120000      E     LCALL   ?C?PLDXDATA
02E6 120000      E     LCALL   ?C?CLDPTR
02E9 FC                MOV     R4,A
02EA EC                MOV     A,R4
02EB 120000      E     LCALL   ?C?FCASTC
02EE 900000      R     MOV     DPTR,#mag
02F1 120000      E     LCALL   ?C?LLDXDATA0
02F4 120000      E     LCALL   ?C?FPMUL
02F7 120000      E     LCALL   ?C?CASTF
02FA 900000      R     MOV     DPTR,#omuni
02FD 120000      E     LCALL   ?C?PLDXDATA
0300 EF                MOV     A,R7
0301 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 170
0304 900000      R     MOV     DPTR,#omuni
0307 120000      E     LCALL   ?C?PLDXDATA
030A E9                MOV     A,R1
030B 2401              ADD     A,#01H
030D F9                MOV     R1,A
030E EA                MOV     A,R2
030F 3400              ADDC    A,#00H
0311 FA                MOV     R2,A
0312 120000      E     LCALL   ?C?CLDPTR
0315 FC                MOV     R4,A
0316 EC                MOV     A,R4
0317 120000      E     LCALL   ?C?FCASTC
031A 900000      R     MOV     DPTR,#mag
031D 120000      E     LCALL   ?C?LLDXDATA0
0320 120000      E     LCALL   ?C?FPMUL
0323 120000      E     LCALL   ?C?CASTF
0326 900000      R     MOV     DPTR,#omuni
0329 120000      E     LCALL   ?C?PLDXDATA
032C E9                MOV     A,R1
032D 2401              ADD     A,#01H
032F F9                MOV     R1,A
0330 EA                MOV     A,R2
0331 3400              ADDC    A,#00H
0333 FA                MOV     R2,A
0334 EF                MOV     A,R7
0335 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 171
0338         ?C0020:
                                           ; SOURCE LINE # 172
0338 7F00              MOV     R7,#00H
033A 7E00              MOV     R6,#00H
033C 7D80              MOV     R5,#080H
033E 7C3F              MOV     R4,#03FH
0340 900000      R     MOV     DPTR,#r
0343 120000      E     LCALL   ?C?LLDXDATA0
0346 120000      E     LCALL   ?C?FPCMP3
0349 6002              JZ      $ + 4H
034B 5015              JNC     ?C0022
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 33  

                                           ; SOURCE LINE # 173
                                           ; SOURCE LINE # 174
034D 900000      R     MOV     DPTR,#R_speed
0350 120000      E     LCALL   ?C?LLDXDATA
0353 900000      R     MOV     DPTR,#r
0356 120000      E     LCALL   ?C?LLDXDATA0
0359 120000      E     LCALL   ?C?FPMUL
035C 900000      R     MOV     DPTR,#R_speed
035F 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 175
                                           ; SOURCE LINE # 176
0362         ?C0022:
0362 22                RET     
             ; FUNCTION _PS2OmuniControl (END)

             ; FUNCTION _PS2ControlMachine (BEGIN)
                                           ; SOURCE LINE # 180
0000 900000      R     MOV     DPTR,#omuni
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 181
                                           ; SOURCE LINE # 189
0006 120000      E     LCALL   PS2_Controller_get
0009 C003              PUSH    AR3
000B C002              PUSH    AR2
000D C001              PUSH    AR1
000F 7B01              MOV     R3,#01H
0011 7A00        R     MOV     R2,#HIGH psData
0013 7900        R     MOV     R1,#LOW psData
0015 A801              MOV     R0,AR1
0017 AC02              MOV     R4,AR2
0019 AD03              MOV     R5,AR3
001B D001              POP     AR1
001D D002              POP     AR2
001F D003              POP     AR3
0021 7E00              MOV     R6,#00H
0023 7F06              MOV     R7,#06H
0025 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 191
0028 120000      E     LCALL   PS2_Analog_Flag
002B 5005              JNC     ?C0024
002D 120000      E     LCALL   PS2_Timeout_Flag
0030 5014              JNC     ?C0023
0032         ?C0024:
                                           ; SOURCE LINE # 192
                                           ; SOURCE LINE # 193
0032 900000      R     MOV     DPTR,#psData+04H
0035 E4                CLR     A
0036 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 194
0037 900000      R     MOV     DPTR,#psData+05H
003A E4                CLR     A
003B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 195
003C 900000      R     MOV     DPTR,#psData+02H
003F E4                CLR     A
0040 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 196
0041 900000      R     MOV     DPTR,#psData+03H
0044 E4                CLR     A
0045 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 197
0046         ?C0023:
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 34  

                                           ; SOURCE LINE # 200
0046 900000      R     MOV     DPTR,#psData+04H
0049 E0                MOVX    A,@DPTR
004A FF                MOV     R7,A
004B EF                MOV     A,R7
004C 700B              JNZ     ?C0026
004E 900000      R     MOV     DPTR,#psData+05H
0051 E0                MOVX    A,@DPTR
0052 FF                MOV     R7,A
0053 EF                MOV     A,R7
0054 7003              JNZ     $ + 5H
0056 020000      R     LJMP    ?C0025
0059         ?C0026:
                                           ; SOURCE LINE # 201
                                           ; SOURCE LINE # 202
0059 900000      R     MOV     DPTR,#psData+04H
005C E0                MOVX    A,@DPTR
005D FF                MOV     R7,A
005E EF                MOV     A,R7
005F D3                SETB    C
0060 94A7              SUBB    A,#0A7H
0062 4019              JC      ?C0027
                                           ; SOURCE LINE # 203
0064 900000      R     MOV     DPTR,#psData+04H
0067 E0                MOVX    A,@DPTR
0068 FF                MOV     R7,A
0069 EF                MOV     A,R7
006A 2480              ADD     A,#080H
006C FF                MOV     R7,A
006D EF                MOV     A,R7
006E F4                CPL     A
006F 04                INC     A
0070 FF                MOV     R7,A
0071 900000      R     MOV     DPTR,#omuni
0074 120000      E     LCALL   ?C?PLDXDATA
0077 EF                MOV     A,R7
0078 120000      E     LCALL   ?C?CSTPTR
007B 802B              SJMP    ?C0028
007D         ?C0027:
                                           ; SOURCE LINE # 204
007D 900000      R     MOV     DPTR,#psData+04H
0080 E0                MOVX    A,@DPTR
0081 FF                MOV     R7,A
0082 EF                MOV     A,R7
0083 C3                CLR     C
0084 9457              SUBB    A,#057H
0086 5016              JNC     ?C0029
                                           ; SOURCE LINE # 205
0088 900000      R     MOV     DPTR,#psData+04H
008B E0                MOVX    A,@DPTR
008C FF                MOV     R7,A
008D C3                CLR     C
008E 747F              MOV     A,#07FH
0090 9F                SUBB    A,R7
0091 FF                MOV     R7,A
0092 900000      R     MOV     DPTR,#omuni
0095 120000      E     LCALL   ?C?PLDXDATA
0098 EF                MOV     A,R7
0099 120000      E     LCALL   ?C?CSTPTR
009C 800A              SJMP    ?C0028
009E         ?C0029:
                                           ; SOURCE LINE # 207
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 35  

009E 900000      R     MOV     DPTR,#omuni
00A1 120000      E     LCALL   ?C?PLDXDATA
00A4 E4                CLR     A
00A5 120000      E     LCALL   ?C?CSTPTR
00A8         ?C0028:
                                           ; SOURCE LINE # 209
00A8 900000      R     MOV     DPTR,#psData+05H
00AB E0                MOVX    A,@DPTR
00AC FF                MOV     R7,A
00AD EF                MOV     A,R7
00AE D3                SETB    C
00AF 94A7              SUBB    A,#0A7H
00B1 401D              JC      ?C0031
                                           ; SOURCE LINE # 210
00B3 900000      R     MOV     DPTR,#psData+05H
00B6 E0                MOVX    A,@DPTR
00B7 FF                MOV     R7,A
00B8 EF                MOV     A,R7
00B9 2480              ADD     A,#080H
00BB FF                MOV     R7,A
00BC 900000      R     MOV     DPTR,#omuni
00BF 120000      E     LCALL   ?C?PLDXDATA
00C2 E9                MOV     A,R1
00C3 2401              ADD     A,#01H
00C5 F9                MOV     R1,A
00C6 EA                MOV     A,R2
00C7 3400              ADDC    A,#00H
00C9 FA                MOV     R2,A
00CA EF                MOV     A,R7
00CB 120000      E     LCALL   ?C?CSTPTR
00CE 803F              SJMP    ?C0025
00D0         ?C0031:
                                           ; SOURCE LINE # 211
00D0 900000      R     MOV     DPTR,#psData+05H
00D3 E0                MOVX    A,@DPTR
00D4 FF                MOV     R7,A
00D5 EF                MOV     A,R7
00D6 C3                CLR     C
00D7 9457              SUBB    A,#057H
00D9 5022              JNC     ?C0033
                                           ; SOURCE LINE # 212
00DB 900000      R     MOV     DPTR,#psData+05H
00DE E0                MOVX    A,@DPTR
00DF FF                MOV     R7,A
00E0 C3                CLR     C
00E1 747F              MOV     A,#07FH
00E3 9F                SUBB    A,R7
00E4 FF                MOV     R7,A
00E5 EF                MOV     A,R7
00E6 F4                CPL     A
00E7 04                INC     A
00E8 FF                MOV     R7,A
00E9 900000      R     MOV     DPTR,#omuni
00EC 120000      E     LCALL   ?C?PLDXDATA
00EF E9                MOV     A,R1
00F0 2401              ADD     A,#01H
00F2 F9                MOV     R1,A
00F3 EA                MOV     A,R2
00F4 3400              ADDC    A,#00H
00F6 FA                MOV     R2,A
00F7 EF                MOV     A,R7
00F8 120000      E     LCALL   ?C?CSTPTR
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 36  

00FB 8012              SJMP    ?C0025
00FD         ?C0033:
                                           ; SOURCE LINE # 214
00FD 900000      R     MOV     DPTR,#omuni
0100 120000      E     LCALL   ?C?PLDXDATA
0103 E9                MOV     A,R1
0104 2401              ADD     A,#01H
0106 F9                MOV     R1,A
0107 EA                MOV     A,R2
0108 3400              ADDC    A,#00H
010A FA                MOV     R2,A
010B E4                CLR     A
010C 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 215
010F         ?C0025:
                                           ; SOURCE LINE # 216
010F 900000      R     MOV     DPTR,#psData+02H
0112 E0                MOVX    A,@DPTR
0113 FF                MOV     R7,A
0114 EF                MOV     A,R7
0115 700B              JNZ     ?C0036
0117 900000      R     MOV     DPTR,#psData+03H
011A E0                MOVX    A,@DPTR
011B FF                MOV     R7,A
011C EF                MOV     A,R7
011D 7003              JNZ     $ + 5H
011F 020000      R     LJMP    ?C0035
0122         ?C0036:
                                           ; SOURCE LINE # 217
                                           ; SOURCE LINE # 218
0122 900000      R     MOV     DPTR,#psData+02H
0125 E0                MOVX    A,@DPTR
0126 FF                MOV     R7,A
0127 EF                MOV     A,R7
0128 D3                SETB    C
0129 94A7              SUBB    A,#0A7H
012B 404B              JC      ?C0037
                                           ; SOURCE LINE # 219
                                           ; SOURCE LINE # 220
012D 900000      R     MOV     DPTR,#psData+02H
0130 E0                MOVX    A,@DPTR
0131 FF                MOV     R7,A
0132 EF                MOV     A,R7
0133 2480              ADD     A,#080H
0135 FF                MOV     R7,A
0136 EF                MOV     A,R7
0137 F4                CPL     A
0138 04                INC     A
0139 FF                MOV     R7,A
013A 900000      R     MOV     DPTR,#omuni
013D 120000      E     LCALL   ?C?PLDXDATA
0140 E9                MOV     A,R1
0141 2402              ADD     A,#02H
0143 F9                MOV     R1,A
0144 EA                MOV     A,R2
0145 3400              ADDC    A,#00H
0147 FA                MOV     R2,A
0148 EF                MOV     A,R7
0149 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 221
014C 900000      R     MOV     DPTR,#omuni
014F 120000      E     LCALL   ?C?PLDXDATA
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 37  

0152 E9                MOV     A,R1
0153 2402              ADD     A,#02H
0155 F9                MOV     R1,A
0156 EA                MOV     A,R2
0157 3400              ADDC    A,#00H
0159 FA                MOV     R2,A
015A 120000      E     LCALL   ?C?CLDPTR
015D FC                MOV     R4,A
015E EC                MOV     A,R4
015F 120000      E     LCALL   ?C?FCASTC
0162 7B00              MOV     R3,#00H
0164 7A00              MOV     R2,#00H
0166 7900              MOV     R1,#00H
0168 7843              MOV     R0,#043H
016A 120000      E     LCALL   ?C?FPDIV
016D 120000      E     LCALL   ?C?FPNEG
0170 900000      R     MOV     DPTR,#R_speed
0173 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 222
0176 8070              SJMP    ?C0035
0178         ?C0037:
                                           ; SOURCE LINE # 223
0178 900000      R     MOV     DPTR,#psData+02H
017B E0                MOVX    A,@DPTR
017C FF                MOV     R7,A
017D EF                MOV     A,R7
017E C3                CLR     C
017F 9457              SUBB    A,#057H
0181 5045              JNC     ?C0039
                                           ; SOURCE LINE # 224
                                           ; SOURCE LINE # 225
0183 900000      R     MOV     DPTR,#psData+02H
0186 E0                MOVX    A,@DPTR
0187 FF                MOV     R7,A
0188 C3                CLR     C
0189 747F              MOV     A,#07FH
018B 9F                SUBB    A,R7
018C FF                MOV     R7,A
018D 900000      R     MOV     DPTR,#omuni
0190 120000      E     LCALL   ?C?PLDXDATA
0193 E9                MOV     A,R1
0194 2402              ADD     A,#02H
0196 F9                MOV     R1,A
0197 EA                MOV     A,R2
0198 3400              ADDC    A,#00H
019A FA                MOV     R2,A
019B EF                MOV     A,R7
019C 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 226
019F 900000      R     MOV     DPTR,#omuni
01A2 120000      E     LCALL   ?C?PLDXDATA
01A5 E9                MOV     A,R1
01A6 2402              ADD     A,#02H
01A8 F9                MOV     R1,A
01A9 EA                MOV     A,R2
01AA 3400              ADDC    A,#00H
01AC FA                MOV     R2,A
01AD 120000      E     LCALL   ?C?CLDPTR
01B0 FC                MOV     R4,A
01B1 EC                MOV     A,R4
01B2 120000      E     LCALL   ?C?FCASTC
01B5 7B00              MOV     R3,#00H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 38  

01B7 7A00              MOV     R2,#00H
01B9 7900              MOV     R1,#00H
01BB 7843              MOV     R0,#043H
01BD 120000      E     LCALL   ?C?FPDIV
01C0 900000      R     MOV     DPTR,#R_speed
01C3 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 227
01C6 8020              SJMP    ?C0035
01C8         ?C0039:
                                           ; SOURCE LINE # 229
                                           ; SOURCE LINE # 230
01C8 900000      R     MOV     DPTR,#omuni
01CB 120000      E     LCALL   ?C?PLDXDATA
01CE E9                MOV     A,R1
01CF 2402              ADD     A,#02H
01D1 F9                MOV     R1,A
01D2 EA                MOV     A,R2
01D3 3400              ADDC    A,#00H
01D5 FA                MOV     R2,A
01D6 E4                CLR     A
01D7 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 231
01DA 7F00              MOV     R7,#00H
01DC 7E00              MOV     R6,#00H
01DE 7D00              MOV     R5,#00H
01E0 7C00              MOV     R4,#00H
01E2 900000      R     MOV     DPTR,#R_speed
01E5 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 232
                                           ; SOURCE LINE # 233
01E8         ?C0035:
                                           ; SOURCE LINE # 235
01E8 900000      R     MOV     DPTR,#psData
01EB E0                MOVX    A,@DPTR
01EC FF                MOV     R7,A
01ED EF                MOV     A,R7
01EE 30E322            JNB     ACC.3,?C0041
                                           ; SOURCE LINE # 236
                                           ; SOURCE LINE # 237
01F1 900000      R     MOV     DPTR,#start_flag
01F4 E0                MOVX    A,@DPTR
01F5 FF                MOV     R7,A
01F6 EF                MOV     A,R7
01F7 701F              JNZ     ?C0043
                                           ; SOURCE LINE # 238
                                           ; SOURCE LINE # 239
01F9 900000      R     MOV     DPTR,#lindata
01FC 120000      E     LCALL   ?C?PLDXDATA
01FF 120000      E     LCALL   ?C?CLDPTR
0202 FF                MOV     R7,A
0203 EF                MOV     A,R7
0204 4408              ORL     A,#08H
0206 FF                MOV     R7,A
0207 EF                MOV     A,R7
0208 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 240
020B 900000      R     MOV     DPTR,#start_flag
020E 7401              MOV     A,#01H
0210 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 241
                                           ; SOURCE LINE # 242
0211 8005              SJMP    ?C0043
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 39  

0213         ?C0041:
                                           ; SOURCE LINE # 244
                                           ; SOURCE LINE # 245
0213 900000      R     MOV     DPTR,#start_flag
0216 E4                CLR     A
0217 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 246
0218         ?C0043:
                                           ; SOURCE LINE # 248
0218 900000      R     MOV     DPTR,#psData+01H
021B E0                MOVX    A,@DPTR
021C FF                MOV     R7,A
021D EF                MOV     A,R7
021E 30E46B            JNB     ACC.4,?C0044
                                           ; SOURCE LINE # 249
                                           ; SOURCE LINE # 250
0221 900000      R     MOV     DPTR,#air_flag
0224 E0                MOVX    A,@DPTR
0225 FF                MOV     R7,A
0226 EF                MOV     A,R7
0227 20E070            JB      ACC.0,?C0048
                                           ; SOURCE LINE # 251
                                           ; SOURCE LINE # 252
022A 900000      R     MOV     DPTR,#lindata
022D 120000      E     LCALL   ?C?PLDXDATA
0230 E9                MOV     A,R1
0231 2401              ADD     A,#01H
0233 F9                MOV     R1,A
0234 EA                MOV     A,R2
0235 3400              ADDC    A,#00H
0237 FA                MOV     R2,A
0238 120000      E     LCALL   ?C?CLDPTR
023B FF                MOV     R7,A
023C EF                MOV     A,R7
023D 13                RRC     A
023E 13                RRC     A
023F 543F              ANL     A,#03FH
0241 FF                MOV     R7,A
0242 EF                MOV     A,R7
0243 30E01C            JNB     ACC.0,?C0046
                                           ; SOURCE LINE # 253
                                           ; SOURCE LINE # 254
0246 900000      R     MOV     DPTR,#lindata
0249 120000      E     LCALL   ?C?PLDXDATA
024C E9                MOV     A,R1
024D 2401              ADD     A,#01H
024F F9                MOV     R1,A
0250 EA                MOV     A,R2
0251 3400              ADDC    A,#00H
0253 FA                MOV     R2,A
0254 120000      E     LCALL   ?C?CLDPTR
0257 FF                MOV     R7,A
0258 EF                MOV     A,R7
0259 54FB              ANL     A,#0FBH
025B FF                MOV     R7,A
025C EF                MOV     A,R7
025D 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 255
0260 801A              SJMP    ?C0047
0262         ?C0046:
                                           ; SOURCE LINE # 257
                                           ; SOURCE LINE # 258
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 40  

0262 900000      R     MOV     DPTR,#lindata
0265 120000      E     LCALL   ?C?PLDXDATA
0268 E9                MOV     A,R1
0269 2401              ADD     A,#01H
026B F9                MOV     R1,A
026C EA                MOV     A,R2
026D 3400              ADDC    A,#00H
026F FA                MOV     R2,A
0270 120000      E     LCALL   ?C?CLDPTR
0273 FF                MOV     R7,A
0274 EF                MOV     A,R7
0275 4404              ORL     A,#04H
0277 FF                MOV     R7,A
0278 EF                MOV     A,R7
0279 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 259
027C         ?C0047:
                                           ; SOURCE LINE # 260
027C 900000      R     MOV     DPTR,#air_flag
027F E0                MOVX    A,@DPTR
0280 FF                MOV     R7,A
0281 EF                MOV     A,R7
0282 4401              ORL     A,#01H
0284 FF                MOV     R7,A
0285 900000      R     MOV     DPTR,#air_flag
0288 EF                MOV     A,R7
0289 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 261
                                           ; SOURCE LINE # 262
028A 800E              SJMP    ?C0048
028C         ?C0044:
                                           ; SOURCE LINE # 264
                                           ; SOURCE LINE # 265
028C 900000      R     MOV     DPTR,#air_flag
028F E0                MOVX    A,@DPTR
0290 FF                MOV     R7,A
0291 EF                MOV     A,R7
0292 54FE              ANL     A,#0FEH
0294 FF                MOV     R7,A
0295 900000      R     MOV     DPTR,#air_flag
0298 EF                MOV     A,R7
0299 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 266
029A         ?C0048:
                                           ; SOURCE LINE # 267
029A 900000      R     MOV     DPTR,#psData+01H
029D E0                MOVX    A,@DPTR
029E FF                MOV     R7,A
029F EF                MOV     A,R7
02A0 30E66D            JNB     ACC.6,?C0049
                                           ; SOURCE LINE # 268
                                           ; SOURCE LINE # 269
02A3 900000      R     MOV     DPTR,#air_flag
02A6 E0                MOVX    A,@DPTR
02A7 FF                MOV     R7,A
02A8 EF                MOV     A,R7
02A9 20E172            JB      ACC.1,?C0053
                                           ; SOURCE LINE # 270
                                           ; SOURCE LINE # 271
02AC 900000      R     MOV     DPTR,#lindata
02AF 120000      E     LCALL   ?C?PLDXDATA
02B2 E9                MOV     A,R1
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 41  

02B3 2401              ADD     A,#01H
02B5 F9                MOV     R1,A
02B6 EA                MOV     A,R2
02B7 3400              ADDC    A,#00H
02B9 FA                MOV     R2,A
02BA 120000      E     LCALL   ?C?CLDPTR
02BD FF                MOV     R7,A
02BE EF                MOV     A,R7
02BF C4                SWAP    A
02C0 13                RRC     A
02C1 13                RRC     A
02C2 13                RRC     A
02C3 5401              ANL     A,#01H
02C5 FF                MOV     R7,A
02C6 EF                MOV     A,R7
02C7 30E01C            JNB     ACC.0,?C0051
                                           ; SOURCE LINE # 272
                                           ; SOURCE LINE # 273
02CA 900000      R     MOV     DPTR,#lindata
02CD 120000      E     LCALL   ?C?PLDXDATA
02D0 E9                MOV     A,R1
02D1 2401              ADD     A,#01H
02D3 F9                MOV     R1,A
02D4 EA                MOV     A,R2
02D5 3400              ADDC    A,#00H
02D7 FA                MOV     R2,A
02D8 120000      E     LCALL   ?C?CLDPTR
02DB FF                MOV     R7,A
02DC EF                MOV     A,R7
02DD 547F              ANL     A,#07FH
02DF FF                MOV     R7,A
02E0 EF                MOV     A,R7
02E1 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 274
02E4 801A              SJMP    ?C0052
02E6         ?C0051:
                                           ; SOURCE LINE # 276
                                           ; SOURCE LINE # 277
02E6 900000      R     MOV     DPTR,#lindata
02E9 120000      E     LCALL   ?C?PLDXDATA
02EC E9                MOV     A,R1
02ED 2401              ADD     A,#01H
02EF F9                MOV     R1,A
02F0 EA                MOV     A,R2
02F1 3400              ADDC    A,#00H
02F3 FA                MOV     R2,A
02F4 120000      E     LCALL   ?C?CLDPTR
02F7 FF                MOV     R7,A
02F8 EF                MOV     A,R7
02F9 4480              ORL     A,#080H
02FB FF                MOV     R7,A
02FC EF                MOV     A,R7
02FD 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 278
0300         ?C0052:
                                           ; SOURCE LINE # 279
0300 900000      R     MOV     DPTR,#air_flag
0303 E0                MOVX    A,@DPTR
0304 FF                MOV     R7,A
0305 EF                MOV     A,R7
0306 4402              ORL     A,#02H
0308 FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 42  

0309 900000      R     MOV     DPTR,#air_flag
030C EF                MOV     A,R7
030D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 280
                                           ; SOURCE LINE # 281
030E 800E              SJMP    ?C0053
0310         ?C0049:
                                           ; SOURCE LINE # 283
                                           ; SOURCE LINE # 284
0310 900000      R     MOV     DPTR,#air_flag
0313 E0                MOVX    A,@DPTR
0314 FF                MOV     R7,A
0315 EF                MOV     A,R7
0316 54FD              ANL     A,#0FDH
0318 FF                MOV     R7,A
0319 900000      R     MOV     DPTR,#air_flag
031C EF                MOV     A,R7
031D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 285
031E         ?C0053:
                                           ; SOURCE LINE # 286
031E 900000      R     MOV     DPTR,#psData+01H
0321 E0                MOVX    A,@DPTR
0322 FF                MOV     R7,A
0323 EF                MOV     A,R7
0324 30E56C            JNB     ACC.5,?C0054
                                           ; SOURCE LINE # 287
                                           ; SOURCE LINE # 288
0327 900000      R     MOV     DPTR,#air_flag
032A E0                MOVX    A,@DPTR
032B FF                MOV     R7,A
032C EF                MOV     A,R7
032D 20E271            JB      ACC.2,?C0058
                                           ; SOURCE LINE # 289
                                           ; SOURCE LINE # 290
0330 900000      R     MOV     DPTR,#lindata
0333 120000      E     LCALL   ?C?PLDXDATA
0336 E9                MOV     A,R1
0337 2401              ADD     A,#01H
0339 F9                MOV     R1,A
033A EA                MOV     A,R2
033B 3400              ADDC    A,#00H
033D FA                MOV     R2,A
033E 120000      E     LCALL   ?C?CLDPTR
0341 FF                MOV     R7,A
0342 EF                MOV     A,R7
0343 C4                SWAP    A
0344 13                RRC     A
0345 13                RRC     A
0346 5403              ANL     A,#03H
0348 FF                MOV     R7,A
0349 EF                MOV     A,R7
034A 30E01C            JNB     ACC.0,?C0056
                                           ; SOURCE LINE # 291
                                           ; SOURCE LINE # 292
034D 900000      R     MOV     DPTR,#lindata
0350 120000      E     LCALL   ?C?PLDXDATA
0353 E9                MOV     A,R1
0354 2401              ADD     A,#01H
0356 F9                MOV     R1,A
0357 EA                MOV     A,R2
0358 3400              ADDC    A,#00H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 43  

035A FA                MOV     R2,A
035B 120000      E     LCALL   ?C?CLDPTR
035E FF                MOV     R7,A
035F EF                MOV     A,R7
0360 54BF              ANL     A,#0BFH
0362 FF                MOV     R7,A
0363 EF                MOV     A,R7
0364 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 293
0367 801A              SJMP    ?C0057
0369         ?C0056:
                                           ; SOURCE LINE # 295
                                           ; SOURCE LINE # 296
0369 900000      R     MOV     DPTR,#lindata
036C 120000      E     LCALL   ?C?PLDXDATA
036F E9                MOV     A,R1
0370 2401              ADD     A,#01H
0372 F9                MOV     R1,A
0373 EA                MOV     A,R2
0374 3400              ADDC    A,#00H
0376 FA                MOV     R2,A
0377 120000      E     LCALL   ?C?CLDPTR
037A FF                MOV     R7,A
037B EF                MOV     A,R7
037C 4440              ORL     A,#040H
037E FF                MOV     R7,A
037F EF                MOV     A,R7
0380 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 297
0383         ?C0057:
                                           ; SOURCE LINE # 298
0383 900000      R     MOV     DPTR,#air_flag
0386 E0                MOVX    A,@DPTR
0387 FF                MOV     R7,A
0388 EF                MOV     A,R7
0389 4404              ORL     A,#04H
038B FF                MOV     R7,A
038C 900000      R     MOV     DPTR,#air_flag
038F EF                MOV     A,R7
0390 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 299
                                           ; SOURCE LINE # 300
0391 800E              SJMP    ?C0058
0393         ?C0054:
                                           ; SOURCE LINE # 302
                                           ; SOURCE LINE # 303
0393 900000      R     MOV     DPTR,#air_flag
0396 E0                MOVX    A,@DPTR
0397 FF                MOV     R7,A
0398 EF                MOV     A,R7
0399 54FB              ANL     A,#0FBH
039B FF                MOV     R7,A
039C 900000      R     MOV     DPTR,#air_flag
039F EF                MOV     A,R7
03A0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 304
03A1         ?C0058:
                                           ; SOURCE LINE # 305
03A1 900000      R     MOV     DPTR,#psData+01H
03A4 E0                MOVX    A,@DPTR
03A5 FF                MOV     R7,A
03A6 EF                MOV     A,R7
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 44  

03A7 30E76A            JNB     ACC.7,?C0059
                                           ; SOURCE LINE # 306
                                           ; SOURCE LINE # 307
03AA 900000      R     MOV     DPTR,#air_flag
03AD E0                MOVX    A,@DPTR
03AE FF                MOV     R7,A
03AF EF                MOV     A,R7
03B0 20E36F            JB      ACC.3,?C0063
                                           ; SOURCE LINE # 308
                                           ; SOURCE LINE # 309
03B3 900000      R     MOV     DPTR,#lindata
03B6 120000      E     LCALL   ?C?PLDXDATA
03B9 E9                MOV     A,R1
03BA 2401              ADD     A,#01H
03BC F9                MOV     R1,A
03BD EA                MOV     A,R2
03BE 3400              ADDC    A,#00H
03C0 FA                MOV     R2,A
03C1 120000      E     LCALL   ?C?CLDPTR
03C4 FF                MOV     R7,A
03C5 EF                MOV     A,R7
03C6 C4                SWAP    A
03C7 540F              ANL     A,#0FH
03C9 FF                MOV     R7,A
03CA EF                MOV     A,R7
03CB 30E01C            JNB     ACC.0,?C0061
                                           ; SOURCE LINE # 310
                                           ; SOURCE LINE # 311
03CE 900000      R     MOV     DPTR,#lindata
03D1 120000      E     LCALL   ?C?PLDXDATA
03D4 E9                MOV     A,R1
03D5 2401              ADD     A,#01H
03D7 F9                MOV     R1,A
03D8 EA                MOV     A,R2
03D9 3400              ADDC    A,#00H
03DB FA                MOV     R2,A
03DC 120000      E     LCALL   ?C?CLDPTR
03DF FF                MOV     R7,A
03E0 EF                MOV     A,R7
03E1 54EF              ANL     A,#0EFH
03E3 FF                MOV     R7,A
03E4 EF                MOV     A,R7
03E5 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 312
03E8 801A              SJMP    ?C0062
03EA         ?C0061:
                                           ; SOURCE LINE # 314
                                           ; SOURCE LINE # 315
03EA 900000      R     MOV     DPTR,#lindata
03ED 120000      E     LCALL   ?C?PLDXDATA
03F0 E9                MOV     A,R1
03F1 2401              ADD     A,#01H
03F3 F9                MOV     R1,A
03F4 EA                MOV     A,R2
03F5 3400              ADDC    A,#00H
03F7 FA                MOV     R2,A
03F8 120000      E     LCALL   ?C?CLDPTR
03FB FF                MOV     R7,A
03FC EF                MOV     A,R7
03FD 4410              ORL     A,#010H
03FF FF                MOV     R7,A
0400 EF                MOV     A,R7
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 45  

0401 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 316
0404         ?C0062:
                                           ; SOURCE LINE # 317
0404 900000      R     MOV     DPTR,#air_flag
0407 E0                MOVX    A,@DPTR
0408 FF                MOV     R7,A
0409 EF                MOV     A,R7
040A 4408              ORL     A,#08H
040C FF                MOV     R7,A
040D 900000      R     MOV     DPTR,#air_flag
0410 EF                MOV     A,R7
0411 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 318
                                           ; SOURCE LINE # 319
0412 800E              SJMP    ?C0063
0414         ?C0059:
                                           ; SOURCE LINE # 321
                                           ; SOURCE LINE # 322
0414 900000      R     MOV     DPTR,#air_flag
0417 E0                MOVX    A,@DPTR
0418 FF                MOV     R7,A
0419 EF                MOV     A,R7
041A 54F7              ANL     A,#0F7H
041C FF                MOV     R7,A
041D 900000      R     MOV     DPTR,#air_flag
0420 EF                MOV     A,R7
0421 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 323
0422         ?C0063:
                                           ; SOURCE LINE # 324
0422 900000      R     MOV     DPTR,#psData+01H
0425 E0                MOVX    A,@DPTR
0426 FF                MOV     R7,A
0427 EF                MOV     A,R7
0428 30E36B            JNB     ACC.3,?C0064
                                           ; SOURCE LINE # 325
                                           ; SOURCE LINE # 326
042B 900000      R     MOV     DPTR,#air_flag
042E E0                MOVX    A,@DPTR
042F FF                MOV     R7,A
0430 EF                MOV     A,R7
0431 20E470            JB      ACC.4,?C0068
                                           ; SOURCE LINE # 327
                                           ; SOURCE LINE # 328
0434 900000      R     MOV     DPTR,#lindata
0437 120000      E     LCALL   ?C?PLDXDATA
043A E9                MOV     A,R1
043B 2401              ADD     A,#01H
043D F9                MOV     R1,A
043E EA                MOV     A,R2
043F 3400              ADDC    A,#00H
0441 FA                MOV     R2,A
0442 120000      E     LCALL   ?C?CLDPTR
0445 FF                MOV     R7,A
0446 EF                MOV     A,R7
0447 C4                SWAP    A
0448 13                RRC     A
0449 5407              ANL     A,#07H
044B FF                MOV     R7,A
044C EF                MOV     A,R7
044D 30E01C            JNB     ACC.0,?C0066
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 46  

                                           ; SOURCE LINE # 329
                                           ; SOURCE LINE # 330
0450 900000      R     MOV     DPTR,#lindata
0453 120000      E     LCALL   ?C?PLDXDATA
0456 E9                MOV     A,R1
0457 2401              ADD     A,#01H
0459 F9                MOV     R1,A
045A EA                MOV     A,R2
045B 3400              ADDC    A,#00H
045D FA                MOV     R2,A
045E 120000      E     LCALL   ?C?CLDPTR
0461 FF                MOV     R7,A
0462 EF                MOV     A,R7
0463 54DF              ANL     A,#0DFH
0465 FF                MOV     R7,A
0466 EF                MOV     A,R7
0467 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 331
046A 801A              SJMP    ?C0067
046C         ?C0066:
                                           ; SOURCE LINE # 333
                                           ; SOURCE LINE # 334
046C 900000      R     MOV     DPTR,#lindata
046F 120000      E     LCALL   ?C?PLDXDATA
0472 E9                MOV     A,R1
0473 2401              ADD     A,#01H
0475 F9                MOV     R1,A
0476 EA                MOV     A,R2
0477 3400              ADDC    A,#00H
0479 FA                MOV     R2,A
047A 120000      E     LCALL   ?C?CLDPTR
047D FF                MOV     R7,A
047E EF                MOV     A,R7
047F 4420              ORL     A,#020H
0481 FF                MOV     R7,A
0482 EF                MOV     A,R7
0483 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 335
0486         ?C0067:
                                           ; SOURCE LINE # 336
0486 900000      R     MOV     DPTR,#air_flag
0489 E0                MOVX    A,@DPTR
048A FF                MOV     R7,A
048B EF                MOV     A,R7
048C 4410              ORL     A,#010H
048E FF                MOV     R7,A
048F 900000      R     MOV     DPTR,#air_flag
0492 EF                MOV     A,R7
0493 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 337
                                           ; SOURCE LINE # 338
0494 800E              SJMP    ?C0068
0496         ?C0064:
                                           ; SOURCE LINE # 340
                                           ; SOURCE LINE # 341
0496 900000      R     MOV     DPTR,#air_flag
0499 E0                MOVX    A,@DPTR
049A FF                MOV     R7,A
049B EF                MOV     A,R7
049C 54EF              ANL     A,#0EFH
049E FF                MOV     R7,A
049F 900000      R     MOV     DPTR,#air_flag
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 47  

04A2 EF                MOV     A,R7
04A3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 342
04A4         ?C0068:
                                           ; SOURCE LINE # 343
04A4 900000      R     MOV     DPTR,#psData+01H
04A7 E0                MOVX    A,@DPTR
04A8 FF                MOV     R7,A
04A9 EF                MOV     A,R7
04AA 30E16C            JNB     ACC.1,?C0069
                                           ; SOURCE LINE # 344
                                           ; SOURCE LINE # 345
04AD 900000      R     MOV     DPTR,#air_flag
04B0 E0                MOVX    A,@DPTR
04B1 FF                MOV     R7,A
04B2 EF                MOV     A,R7
04B3 20E571            JB      ACC.5,?C0073
                                           ; SOURCE LINE # 346
                                           ; SOURCE LINE # 347
04B6 900000      R     MOV     DPTR,#lindata
04B9 120000      E     LCALL   ?C?PLDXDATA
04BC E9                MOV     A,R1
04BD 2401              ADD     A,#01H
04BF F9                MOV     R1,A
04C0 EA                MOV     A,R2
04C1 3400              ADDC    A,#00H
04C3 FA                MOV     R2,A
04C4 120000      E     LCALL   ?C?CLDPTR
04C7 FF                MOV     R7,A
04C8 EF                MOV     A,R7
04C9 13                RRC     A
04CA 13                RRC     A
04CB 13                RRC     A
04CC 541F              ANL     A,#01FH
04CE FF                MOV     R7,A
04CF EF                MOV     A,R7
04D0 30E01C            JNB     ACC.0,?C0071
                                           ; SOURCE LINE # 348
                                           ; SOURCE LINE # 349
04D3 900000      R     MOV     DPTR,#lindata
04D6 120000      E     LCALL   ?C?PLDXDATA
04D9 E9                MOV     A,R1
04DA 2401              ADD     A,#01H
04DC F9                MOV     R1,A
04DD EA                MOV     A,R2
04DE 3400              ADDC    A,#00H
04E0 FA                MOV     R2,A
04E1 120000      E     LCALL   ?C?CLDPTR
04E4 FF                MOV     R7,A
04E5 EF                MOV     A,R7
04E6 54F7              ANL     A,#0F7H
04E8 FF                MOV     R7,A
04E9 EF                MOV     A,R7
04EA 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 350
04ED 801A              SJMP    ?C0072
04EF         ?C0071:
                                           ; SOURCE LINE # 352
                                           ; SOURCE LINE # 353
04EF 900000      R     MOV     DPTR,#lindata
04F2 120000      E     LCALL   ?C?PLDXDATA
04F5 E9                MOV     A,R1
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 48  

04F6 2401              ADD     A,#01H
04F8 F9                MOV     R1,A
04F9 EA                MOV     A,R2
04FA 3400              ADDC    A,#00H
04FC FA                MOV     R2,A
04FD 120000      E     LCALL   ?C?CLDPTR
0500 FF                MOV     R7,A
0501 EF                MOV     A,R7
0502 4408              ORL     A,#08H
0504 FF                MOV     R7,A
0505 EF                MOV     A,R7
0506 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 354
0509         ?C0072:
                                           ; SOURCE LINE # 355
0509 900000      R     MOV     DPTR,#air_flag
050C E0                MOVX    A,@DPTR
050D FF                MOV     R7,A
050E EF                MOV     A,R7
050F 4420              ORL     A,#020H
0511 FF                MOV     R7,A
0512 900000      R     MOV     DPTR,#air_flag
0515 EF                MOV     A,R7
0516 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 356
                                           ; SOURCE LINE # 357
0517 800E              SJMP    ?C0073
0519         ?C0069:
                                           ; SOURCE LINE # 359
                                           ; SOURCE LINE # 360
0519 900000      R     MOV     DPTR,#air_flag
051C E0                MOVX    A,@DPTR
051D FF                MOV     R7,A
051E EF                MOV     A,R7
051F 54DF              ANL     A,#0DFH
0521 FF                MOV     R7,A
0522 900000      R     MOV     DPTR,#air_flag
0525 EF                MOV     A,R7
0526 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 361
0527         ?C0073:
                                           ; SOURCE LINE # 363
0527 900000      R     MOV     DPTR,#psData+01H
052A E0                MOVX    A,@DPTR
052B FF                MOV     R7,A
052C EF                MOV     A,R7
052D 30E26D            JNB     ACC.2,?C0074
                                           ; SOURCE LINE # 364
                                           ; SOURCE LINE # 365
0530 900000      R     MOV     DPTR,#air_flag
0533 E0                MOVX    A,@DPTR
0534 FF                MOV     R7,A
0535 EF                MOV     A,R7
0536 20E772            JB      ACC.7,?C0078
                                           ; SOURCE LINE # 366
                                           ; SOURCE LINE # 367
0539 900000      R     MOV     DPTR,#lindata
053C 120000      E     LCALL   ?C?PLDXDATA
053F E9                MOV     A,R1
0540 2402              ADD     A,#02H
0542 F9                MOV     R1,A
0543 EA                MOV     A,R2
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 49  

0544 3400              ADDC    A,#00H
0546 FA                MOV     R2,A
0547 120000      E     LCALL   ?C?CLDPTR
054A FF                MOV     R7,A
054B EF                MOV     A,R7
054C C4                SWAP    A
054D 13                RRC     A
054E 13                RRC     A
054F 13                RRC     A
0550 5401              ANL     A,#01H
0552 FF                MOV     R7,A
0553 EF                MOV     A,R7
0554 30E01C            JNB     ACC.0,?C0076
                                           ; SOURCE LINE # 368
                                           ; SOURCE LINE # 369
0557 900000      R     MOV     DPTR,#lindata
055A 120000      E     LCALL   ?C?PLDXDATA
055D E9                MOV     A,R1
055E 2402              ADD     A,#02H
0560 F9                MOV     R1,A
0561 EA                MOV     A,R2
0562 3400              ADDC    A,#00H
0564 FA                MOV     R2,A
0565 120000      E     LCALL   ?C?CLDPTR
0568 FF                MOV     R7,A
0569 EF                MOV     A,R7
056A 547F              ANL     A,#07FH
056C FF                MOV     R7,A
056D EF                MOV     A,R7
056E 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 370
0571 801A              SJMP    ?C0077
0573         ?C0076:
                                           ; SOURCE LINE # 372
                                           ; SOURCE LINE # 373
0573 900000      R     MOV     DPTR,#lindata
0576 120000      E     LCALL   ?C?PLDXDATA
0579 E9                MOV     A,R1
057A 2402              ADD     A,#02H
057C F9                MOV     R1,A
057D EA                MOV     A,R2
057E 3400              ADDC    A,#00H
0580 FA                MOV     R2,A
0581 120000      E     LCALL   ?C?CLDPTR
0584 FF                MOV     R7,A
0585 EF                MOV     A,R7
0586 4480              ORL     A,#080H
0588 FF                MOV     R7,A
0589 EF                MOV     A,R7
058A 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 374
058D         ?C0077:
                                           ; SOURCE LINE # 375
058D 900000      R     MOV     DPTR,#air_flag
0590 E0                MOVX    A,@DPTR
0591 FF                MOV     R7,A
0592 EF                MOV     A,R7
0593 4480              ORL     A,#080H
0595 FF                MOV     R7,A
0596 900000      R     MOV     DPTR,#air_flag
0599 EF                MOV     A,R7
059A F0                MOVX    @DPTR,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 50  

                                           ; SOURCE LINE # 376
                                           ; SOURCE LINE # 377
059B 800E              SJMP    ?C0078
059D         ?C0074:
                                           ; SOURCE LINE # 379
                                           ; SOURCE LINE # 380
059D 900000      R     MOV     DPTR,#air_flag
05A0 E0                MOVX    A,@DPTR
05A1 FF                MOV     R7,A
05A2 EF                MOV     A,R7
05A3 547F              ANL     A,#07FH
05A5 FF                MOV     R7,A
05A6 900000      R     MOV     DPTR,#air_flag
05A9 EF                MOV     A,R7
05AA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 381
05AB         ?C0078:
                                           ; SOURCE LINE # 382
05AB 900000      R     MOV     DPTR,#psData+01H
05AE E0                MOVX    A,@DPTR
05AF FF                MOV     R7,A
05B0 EF                MOV     A,R7
05B1 30E06C            JNB     ACC.0,?C0079
                                           ; SOURCE LINE # 383
                                           ; SOURCE LINE # 384
05B4 900000      R     MOV     DPTR,#air_flag
05B7 E0                MOVX    A,@DPTR
05B8 FF                MOV     R7,A
05B9 EF                MOV     A,R7
05BA 20E671            JB      ACC.6,?C0083
                                           ; SOURCE LINE # 385
                                           ; SOURCE LINE # 386
05BD 900000      R     MOV     DPTR,#lindata
05C0 120000      E     LCALL   ?C?PLDXDATA
05C3 E9                MOV     A,R1
05C4 2402              ADD     A,#02H
05C6 F9                MOV     R1,A
05C7 EA                MOV     A,R2
05C8 3400              ADDC    A,#00H
05CA FA                MOV     R2,A
05CB 120000      E     LCALL   ?C?CLDPTR
05CE FF                MOV     R7,A
05CF EF                MOV     A,R7
05D0 C4                SWAP    A
05D1 13                RRC     A
05D2 13                RRC     A
05D3 5403              ANL     A,#03H
05D5 FF                MOV     R7,A
05D6 EF                MOV     A,R7
05D7 30E01C            JNB     ACC.0,?C0081
                                           ; SOURCE LINE # 387
                                           ; SOURCE LINE # 388
05DA 900000      R     MOV     DPTR,#lindata
05DD 120000      E     LCALL   ?C?PLDXDATA
05E0 E9                MOV     A,R1
05E1 2402              ADD     A,#02H
05E3 F9                MOV     R1,A
05E4 EA                MOV     A,R2
05E5 3400              ADDC    A,#00H
05E7 FA                MOV     R2,A
05E8 120000      E     LCALL   ?C?CLDPTR
05EB FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 51  

05EC EF                MOV     A,R7
05ED 54BF              ANL     A,#0BFH
05EF FF                MOV     R7,A
05F0 EF                MOV     A,R7
05F1 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 389
05F4 801A              SJMP    ?C0082
05F6         ?C0081:
                                           ; SOURCE LINE # 391
                                           ; SOURCE LINE # 392
05F6 900000      R     MOV     DPTR,#lindata
05F9 120000      E     LCALL   ?C?PLDXDATA
05FC E9                MOV     A,R1
05FD 2402              ADD     A,#02H
05FF F9                MOV     R1,A
0600 EA                MOV     A,R2
0601 3400              ADDC    A,#00H
0603 FA                MOV     R2,A
0604 120000      E     LCALL   ?C?CLDPTR
0607 FF                MOV     R7,A
0608 EF                MOV     A,R7
0609 4440              ORL     A,#040H
060B FF                MOV     R7,A
060C EF                MOV     A,R7
060D 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 393
0610         ?C0082:
                                           ; SOURCE LINE # 394
0610 900000      R     MOV     DPTR,#air_flag
0613 E0                MOVX    A,@DPTR
0614 FF                MOV     R7,A
0615 EF                MOV     A,R7
0616 4440              ORL     A,#040H
0618 FF                MOV     R7,A
0619 900000      R     MOV     DPTR,#air_flag
061C EF                MOV     A,R7
061D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 395
                                           ; SOURCE LINE # 396
061E 800E              SJMP    ?C0083
0620         ?C0079:
                                           ; SOURCE LINE # 398
                                           ; SOURCE LINE # 399
0620 900000      R     MOV     DPTR,#air_flag
0623 E0                MOVX    A,@DPTR
0624 FF                MOV     R7,A
0625 EF                MOV     A,R7
0626 54BF              ANL     A,#0BFH
0628 FF                MOV     R7,A
0629 900000      R     MOV     DPTR,#air_flag
062C EF                MOV     A,R7
062D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 400
062E         ?C0083:
                                           ; SOURCE LINE # 404
062E 900000      R     MOV     DPTR,#psData
0631 E0                MOVX    A,@DPTR
0632 FF                MOV     R7,A
0633 EF                MOV     A,R7
0634 30E41F            JNB     ACC.4,?C0084
                                           ; SOURCE LINE # 405
0637 900000      R     MOV     DPTR,#lindata
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 52  

063A 120000      E     LCALL   ?C?PLDXDATA
063D E9                MOV     A,R1
063E 2402              ADD     A,#02H
0640 F9                MOV     R1,A
0641 EA                MOV     A,R2
0642 3400              ADDC    A,#00H
0644 FA                MOV     R2,A
0645 120000      E     LCALL   ?C?CLDPTR
0648 FF                MOV     R7,A
0649 EF                MOV     A,R7
064A 54C0              ANL     A,#0C0H
064C FF                MOV     R7,A
064D EF                MOV     A,R7
064E 4410              ORL     A,#010H
0650 FF                MOV     R7,A
0651 EF                MOV     A,R7
0652 120000      E     LCALL   ?C?CSTPTR
0655 22                RET     
0656         ?C0084:
                                           ; SOURCE LINE # 406
0656 900000      R     MOV     DPTR,#psData
0659 E0                MOVX    A,@DPTR
065A FF                MOV     R7,A
065B EF                MOV     A,R7
065C 30E61F            JNB     ACC.6,?C0086
                                           ; SOURCE LINE # 407
065F 900000      R     MOV     DPTR,#lindata
0662 120000      E     LCALL   ?C?PLDXDATA
0665 E9                MOV     A,R1
0666 2402              ADD     A,#02H
0668 F9                MOV     R1,A
0669 EA                MOV     A,R2
066A 3400              ADDC    A,#00H
066C FA                MOV     R2,A
066D 120000      E     LCALL   ?C?CLDPTR
0670 FF                MOV     R7,A
0671 EF                MOV     A,R7
0672 54C0              ANL     A,#0C0H
0674 FF                MOV     R7,A
0675 EF                MOV     A,R7
0676 4402              ORL     A,#02H
0678 FF                MOV     R7,A
0679 EF                MOV     A,R7
067A 120000      E     LCALL   ?C?CSTPTR
067D 22                RET     
067E         ?C0086:
                                           ; SOURCE LINE # 409
067E 900000      R     MOV     DPTR,#lindata
0681 120000      E     LCALL   ?C?PLDXDATA
0684 E9                MOV     A,R1
0685 2402              ADD     A,#02H
0687 F9                MOV     R1,A
0688 EA                MOV     A,R2
0689 3400              ADDC    A,#00H
068B FA                MOV     R2,A
068C 120000      E     LCALL   ?C?CLDPTR
068F FF                MOV     R7,A
0690 EF                MOV     A,R7
0691 54C0              ANL     A,#0C0H
0693 FF                MOV     R7,A
0694 EF                MOV     A,R7
0695 4408              ORL     A,#08H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 53  

0697 FF                MOV     R7,A
0698 EF                MOV     A,R7
0699 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 450
069C         ?C0088:
069C 22                RET     
             ; FUNCTION _PS2ControlMachine (END)

             ; FUNCTION _PS2AutoMachine (BEGIN)
                                           ; SOURCE LINE # 453
0000 900000      R     MOV     DPTR,#omuni
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 454
                                           ; SOURCE LINE # 455
0006 7FCD              MOV     R7,#0CDH
0008 7ECC              MOV     R6,#0CCH
000A 7DCC              MOV     R5,#0CCH
000C 7C3E              MOV     R4,#03EH
000E 900000      R     MOV     DPTR,#line_kp
0011 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 456
0014 900000      R     MOV     DPTR,#line_data
0017 E0                MOVX    A,@DPTR
0018 FF                MOV     R7,A
0019 EF                MOV     A,R7
001A 24C0              ADD     A,#0C0H
001C FF                MOV     R7,A
001D 900000      R     MOV     DPTR,#line_left
0020 EF                MOV     A,R7
0021 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 457
0022 900000      R     MOV     DPTR,#line_data+0AH
0025 E0                MOVX    A,@DPTR
0026 FF                MOV     R7,A
0027 EF                MOV     A,R7
0028 24C0              ADD     A,#0C0H
002A FF                MOV     R7,A
002B 900000      R     MOV     DPTR,#line_right
002E EF                MOV     A,R7
002F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 458
0030 900000      R     MOV     DPTR,#line_left
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 900000      R     MOV     DPTR,#line_right
0038 E0                MOVX    A,@DPTR
0039 FE                MOV     R6,A
003A C3                CLR     C
003B EE                MOV     A,R6
003C 9F                SUBB    A,R7
003D FC                MOV     R4,A
003E EC                MOV     A,R4
003F 120000      E     LCALL   ?C?FCASTC
0042 7B9A              MOV     R3,#09AH
0044 7A99              MOV     R2,#099H
0046 7999              MOV     R1,#099H
0048 783F              MOV     R0,#03FH
004A 120000      E     LCALL   ?C?FPMUL
004D 120000      E     LCALL   ?C?CASTF
0050 900000      R     MOV     DPTR,#line_roll
0053 EE                MOV     A,R6
0054 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 54  

0055 A3                INC     DPTR
0056 EF                MOV     A,R7
0057 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 459
0058 900000      R     MOV     DPTR,#line_left
005B E0                MOVX    A,@DPTR
005C FF                MOV     R7,A
005D 900000      R     MOV     DPTR,#line_right
0060 E0                MOVX    A,@DPTR
0061 FE                MOV     R6,A
0062 EE                MOV     A,R6
0063 2F                ADD     A,R7
0064 FF                MOV     R7,A
0065 EF                MOV     A,R7
0066 F4                CPL     A
0067 04                INC     A
0068 FF                MOV     R7,A
0069 EF                MOV     A,R7
006A 33                RLC     A
006B 95E0              SUBB    A,ACC
006D FE                MOV     R6,A
006E 900000      R     MOV     DPTR,#line_center
0071 EE                MOV     A,R6
0072 F0                MOVX    @DPTR,A
0073 A3                INC     DPTR
0074 EF                MOV     A,R7
0075 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 461
0076 120000      E     LCALL   PS2_Controller_get
0079 C003              PUSH    AR3
007B C002              PUSH    AR2
007D C001              PUSH    AR1
007F 7B01              MOV     R3,#01H
0081 7A00        R     MOV     R2,#HIGH psData
0083 7900        R     MOV     R1,#LOW psData
0085 A801              MOV     R0,AR1
0087 AC02              MOV     R4,AR2
0089 AD03              MOV     R5,AR3
008B D001              POP     AR1
008D D002              POP     AR2
008F D003              POP     AR3
0091 7E00              MOV     R6,#00H
0093 7F06              MOV     R7,#06H
0095 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 462
0098 7F00              MOV     R7,#00H
009A 7E00              MOV     R6,#00H
009C 7D80              MOV     R5,#080H
009E 7C3F              MOV     R4,#03FH
00A0 900000      R     MOV     DPTR,#R_speed
00A3 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 464
00A6 900000      R     MOV     DPTR,#psData
00A9 E0                MOVX    A,@DPTR
00AA FF                MOV     R7,A
00AB EF                MOV     A,R7
00AC 30E531            JNB     ACC.5,?C0089
                                           ; SOURCE LINE # 465
                                           ; SOURCE LINE # 466
00AF 900000      R     MOV     DPTR,#omuni
00B2 120000      E     LCALL   ?C?PLDXDATA
00B5 7481              MOV     A,#081H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 55  

00B7 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 467
00BA 900000      R     MOV     DPTR,#omuni
00BD 120000      E     LCALL   ?C?PLDXDATA
00C0 E9                MOV     A,R1
00C1 2401              ADD     A,#01H
00C3 F9                MOV     R1,A
00C4 EA                MOV     A,R2
00C5 3400              ADDC    A,#00H
00C7 FA                MOV     R2,A
00C8 E4                CLR     A
00C9 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 468
00CC 900000      R     MOV     DPTR,#omuni
00CF 120000      E     LCALL   ?C?PLDXDATA
00D2 E9                MOV     A,R1
00D3 2402              ADD     A,#02H
00D5 F9                MOV     R1,A
00D6 EA                MOV     A,R2
00D7 3400              ADDC    A,#00H
00D9 FA                MOV     R2,A
00DA 7440              MOV     A,#040H
00DC 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 469
00DF 22                RET     
00E0         ?C0089:
                                           ; SOURCE LINE # 470
00E0 900000      R     MOV     DPTR,#psData
00E3 E0                MOVX    A,@DPTR
00E4 FF                MOV     R7,A
00E5 EF                MOV     A,R7
00E6 30E730            JNB     ACC.7,?C0091
                                           ; SOURCE LINE # 471
                                           ; SOURCE LINE # 477
00E9 900000      R     MOV     DPTR,#omuni
00EC 120000      E     LCALL   ?C?PLDXDATA
00EF E4                CLR     A
00F0 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 478
00F3 900000      R     MOV     DPTR,#omuni
00F6 120000      E     LCALL   ?C?PLDXDATA
00F9 E9                MOV     A,R1
00FA 2401              ADD     A,#01H
00FC F9                MOV     R1,A
00FD EA                MOV     A,R2
00FE 3400              ADDC    A,#00H
0100 FA                MOV     R2,A
0101 E4                CLR     A
0102 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 479
0105 900000      R     MOV     DPTR,#omuni
0108 120000      E     LCALL   ?C?PLDXDATA
010B E9                MOV     A,R1
010C 2402              ADD     A,#02H
010E F9                MOV     R1,A
010F EA                MOV     A,R2
0110 3400              ADDC    A,#00H
0112 FA                MOV     R2,A
0113 7483              MOV     A,#083H
0115 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 480
0118 22                RET     
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 56  

0119         ?C0091:
                                           ; SOURCE LINE # 482
                                           ; SOURCE LINE # 483
0119 900000      R     MOV     DPTR,#line_center
011C E0                MOVX    A,@DPTR
011D FE                MOV     R6,A
011E A3                INC     DPTR
011F E0                MOVX    A,@DPTR
0120 FF                MOV     R7,A
0121 D3                SETB    C
0122 EF                MOV     A,R7
0123 940A              SUBB    A,#0AH
0125 EE                MOV     A,R6
0126 6480              XRL     A,#080H
0128 9480              SUBB    A,#080H
012A 5039              JNC     ?C0095
012C 900000      R     MOV     DPTR,#line_center
012F E0                MOVX    A,@DPTR
0130 FE                MOV     R6,A
0131 A3                INC     DPTR
0132 E0                MOVX    A,@DPTR
0133 FF                MOV     R7,A
0134 C3                CLR     C
0135 EF                MOV     A,R7
0136 94F6              SUBB    A,#0F6H
0138 EE                MOV     A,R6
0139 6480              XRL     A,#080H
013B 947F              SUBB    A,#07FH
013D 4026              JC      ?C0095
013F 900000      R     MOV     DPTR,#line_roll
0142 E0                MOVX    A,@DPTR
0143 FE                MOV     R6,A
0144 A3                INC     DPTR
0145 E0                MOVX    A,@DPTR
0146 FF                MOV     R7,A
0147 D3                SETB    C
0148 EF                MOV     A,R7
0149 940A              SUBB    A,#0AH
014B EE                MOV     A,R6
014C 6480              XRL     A,#080H
014E 9480              SUBB    A,#080H
0150 5013              JNC     ?C0095
0152 900000      R     MOV     DPTR,#line_roll
0155 E0                MOVX    A,@DPTR
0156 FE                MOV     R6,A
0157 A3                INC     DPTR
0158 E0                MOVX    A,@DPTR
0159 FF                MOV     R7,A
015A C3                CLR     C
015B EF                MOV     A,R7
015C 94F6              SUBB    A,#0F6H
015E EE                MOV     A,R6
015F 6480              XRL     A,#080H
0161 947F              SUBB    A,#07FH
0163 5010              JNC     ?C0094
0165         ?C0095:
0165 900000      R     MOV     DPTR,#line_data
0168 E0                MOVX    A,@DPTR
0169 FF                MOV     R7,A
016A EF                MOV     A,R7
016B 6008              JZ      ?C0094
016D 900000      R     MOV     DPTR,#line_data+0AH
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 57  

0170 E0                MOVX    A,@DPTR
0171 FF                MOV     R7,A
0172 EF                MOV     A,R7
0173 702F              JNZ     ?C0093
0175         ?C0094:
                                           ; SOURCE LINE # 485
                                           ; SOURCE LINE # 486
0175 900000      R     MOV     DPTR,#omuni
0178 120000      E     LCALL   ?C?PLDXDATA
017B E4                CLR     A
017C 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 487
017F 900000      R     MOV     DPTR,#omuni
0182 120000      E     LCALL   ?C?PLDXDATA
0185 E9                MOV     A,R1
0186 2401              ADD     A,#01H
0188 F9                MOV     R1,A
0189 EA                MOV     A,R2
018A 3400              ADDC    A,#00H
018C FA                MOV     R2,A
018D E4                CLR     A
018E 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 488
0191 900000      R     MOV     DPTR,#omuni
0194 120000      E     LCALL   ?C?PLDXDATA
0197 E9                MOV     A,R1
0198 2402              ADD     A,#02H
019A F9                MOV     R1,A
019B EA                MOV     A,R2
019C 3400              ADDC    A,#00H
019E FA                MOV     R2,A
019F E4                CLR     A
01A0 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 489
01A3 22                RET     
01A4         ?C0093:
                                           ; SOURCE LINE # 491
                                           ; SOURCE LINE # 492
01A4 900000      R     MOV     DPTR,#omuni
01A7 120000      E     LCALL   ?C?PLDXDATA
01AA E4                CLR     A
01AB 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 495
01AE 900000      R     MOV     DPTR,#line_roll
01B1 E0                MOVX    A,@DPTR
01B2 FE                MOV     R6,A
01B3 A3                INC     DPTR
01B4 E0                MOVX    A,@DPTR
01B5 FF                MOV     R7,A
01B6 D3                SETB    C
01B7 EF                MOV     A,R7
01B8 947F              SUBB    A,#07FH
01BA EE                MOV     A,R6
01BB 6480              XRL     A,#080H
01BD 9480              SUBB    A,#080H
01BF 4015              JC      ?C0098
                                           ; SOURCE LINE # 496
01C1 900000      R     MOV     DPTR,#omuni
01C4 120000      E     LCALL   ?C?PLDXDATA
01C7 E9                MOV     A,R1
01C8 2402              ADD     A,#02H
01CA F9                MOV     R1,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 58  

01CB EA                MOV     A,R2
01CC 3400              ADDC    A,#00H
01CE FA                MOV     R2,A
01CF 747F              MOV     A,#07FH
01D1 120000      E     LCALL   ?C?CSTPTR
01D4 8042              SJMP    ?C0099
01D6         ?C0098:
                                           ; SOURCE LINE # 497
01D6 900000      R     MOV     DPTR,#line_roll
01D9 E0                MOVX    A,@DPTR
01DA FE                MOV     R6,A
01DB A3                INC     DPTR
01DC E0                MOVX    A,@DPTR
01DD FF                MOV     R7,A
01DE C3                CLR     C
01DF EF                MOV     A,R7
01E0 9481              SUBB    A,#081H
01E2 EE                MOV     A,R6
01E3 6480              XRL     A,#080H
01E5 947F              SUBB    A,#07FH
01E7 5015              JNC     ?C0100
                                           ; SOURCE LINE # 498
01E9 900000      R     MOV     DPTR,#omuni
01EC 120000      E     LCALL   ?C?PLDXDATA
01EF E9                MOV     A,R1
01F0 2402              ADD     A,#02H
01F2 F9                MOV     R1,A
01F3 EA                MOV     A,R2
01F4 3400              ADDC    A,#00H
01F6 FA                MOV     R2,A
01F7 7481              MOV     A,#081H
01F9 120000      E     LCALL   ?C?CSTPTR
01FC 801A              SJMP    ?C0099
01FE         ?C0100:
                                           ; SOURCE LINE # 500
01FE 900000      R     MOV     DPTR,#line_roll
0201 E0                MOVX    A,@DPTR
0202 FE                MOV     R6,A
0203 A3                INC     DPTR
0204 E0                MOVX    A,@DPTR
0205 FF                MOV     R7,A
0206 900000      R     MOV     DPTR,#omuni
0209 120000      E     LCALL   ?C?PLDXDATA
020C E9                MOV     A,R1
020D 2402              ADD     A,#02H
020F F9                MOV     R1,A
0210 EA                MOV     A,R2
0211 3400              ADDC    A,#00H
0213 FA                MOV     R2,A
0214 EF                MOV     A,R7
0215 120000      E     LCALL   ?C?CSTPTR
0218         ?C0099:
                                           ; SOURCE LINE # 502
0218 900000      R     MOV     DPTR,#line_center
021B E0                MOVX    A,@DPTR
021C FC                MOV     R4,A
021D A3                INC     DPTR
021E E0                MOVX    A,@DPTR
021F FD                MOV     R5,A
0220 EC                MOV     A,R4
0221 120000      E     LCALL   ?C?FCASTI
0224 900000      R     MOV     DPTR,#line_kp
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 59  

0227 120000      E     LCALL   ?C?LLDXDATA0
022A 120000      E     LCALL   ?C?FPMUL
022D 7B00              MOV     R3,#00H
022F 7A00              MOV     R2,#00H
0231 79FE              MOV     R1,#0FEH
0233 7842              MOV     R0,#042H
0235 120000      E     LCALL   ?C?FPCMP3
0238 5014              JNC     ?C0102
                                           ; SOURCE LINE # 503
023A 900000      R     MOV     DPTR,#omuni
023D 120000      E     LCALL   ?C?PLDXDATA
0240 E9                MOV     A,R1
0241 2401              ADD     A,#01H
0243 F9                MOV     R1,A
0244 EA                MOV     A,R2
0245 3400              ADDC    A,#00H
0247 FA                MOV     R2,A
0248 747F              MOV     A,#07FH
024A 120000      E     LCALL   ?C?CSTPTR
024D 22                RET     
024E         ?C0102:
                                           ; SOURCE LINE # 504
024E 900000      R     MOV     DPTR,#line_center
0251 E0                MOVX    A,@DPTR
0252 FC                MOV     R4,A
0253 A3                INC     DPTR
0254 E0                MOVX    A,@DPTR
0255 FD                MOV     R5,A
0256 EC                MOV     A,R4
0257 120000      E     LCALL   ?C?FCASTI
025A 900000      R     MOV     DPTR,#line_kp
025D 120000      E     LCALL   ?C?LLDXDATA0
0260 120000      E     LCALL   ?C?FPMUL
0263 7B00              MOV     R3,#00H
0265 7A00              MOV     R2,#00H
0267 79FE              MOV     R1,#0FEH
0269 78C2              MOV     R0,#0C2H
026B 120000      E     LCALL   ?C?FPCMP3
026E 6016              JZ      ?C0104
0270 4014              JC      ?C0104
                                           ; SOURCE LINE # 505
0272 900000      R     MOV     DPTR,#omuni
0275 120000      E     LCALL   ?C?PLDXDATA
0278 E9                MOV     A,R1
0279 2401              ADD     A,#01H
027B F9                MOV     R1,A
027C EA                MOV     A,R2
027D 3400              ADDC    A,#00H
027F FA                MOV     R2,A
0280 7481              MOV     A,#081H
0282 120000      E     LCALL   ?C?CSTPTR
0285 22                RET     
0286         ?C0104:
                                           ; SOURCE LINE # 507
                                           ; SOURCE LINE # 508
0286 900000      R     MOV     DPTR,#line_center
0289 E0                MOVX    A,@DPTR
028A FC                MOV     R4,A
028B A3                INC     DPTR
028C E0                MOVX    A,@DPTR
028D FD                MOV     R5,A
028E EC                MOV     A,R4
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 60  

028F 120000      E     LCALL   ?C?FCASTI
0292 900000      R     MOV     DPTR,#line_kp
0295 120000      E     LCALL   ?C?LLDXDATA0
0298 120000      E     LCALL   ?C?FPMUL
029B 120000      E     LCALL   ?C?CASTF
029E 900000      R     MOV     DPTR,#omuni
02A1 120000      E     LCALL   ?C?PLDXDATA
02A4 E9                MOV     A,R1
02A5 2401              ADD     A,#01H
02A7 F9                MOV     R1,A
02A8 EA                MOV     A,R2
02A9 3400              ADDC    A,#00H
02AB FA                MOV     R2,A
02AC EF                MOV     A,R7
02AD 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 509
                                           ; SOURCE LINE # 510
                                           ; SOURCE LINE # 511
                                           ; SOURCE LINE # 512
02B0         ?C0106:
02B0 22                RET     
             ; FUNCTION _PS2AutoMachine (END)

             ; FUNCTION _LinSendData (BEGIN)
                                           ; SOURCE LINE # 515
0000 900000      R     MOV     DPTR,#omuni
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 516
                                           ; SOURCE LINE # 522
0006 900000      R     MOV     DPTR,#lindata
0009 120000      E     LCALL   ?C?PLDXDATA
000C E9                MOV     A,R1
000D 2401              ADD     A,#01H
000F F9                MOV     R1,A
0010 EA                MOV     A,R2
0011 3400              ADDC    A,#00H
0013 FA                MOV     R2,A
0014 120000      E     LCALL   ?C?CLDPTR
0017 FF                MOV     R7,A
0018 900000      R     MOV     DPTR,#air_data_old
001B E0                MOVX    A,@DPTR
001C FE                MOV     R6,A
001D EE                MOV     A,R6
001E 6F                XRL     A,R7
001F 6012              JZ      ?C0107
                                           ; SOURCE LINE # 523
                                           ; SOURCE LINE # 524
0021 900000      R     MOV     DPTR,#lindata
0024 120000      E     LCALL   ?C?PLDXDATA
0027 120000      E     LCALL   ?C?CLDPTR
002A FF                MOV     R7,A
002B EF                MOV     A,R7
002C 4402              ORL     A,#02H
002E FF                MOV     R7,A
002F EF                MOV     A,R7
0030 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 525
0033         ?C0107:
                                           ; SOURCE LINE # 526
0033 900000      R     MOV     DPTR,#lindata
0036 120000      E     LCALL   ?C?PLDXDATA
0039 E9                MOV     A,R1
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 61  

003A 2401              ADD     A,#01H
003C F9                MOV     R1,A
003D EA                MOV     A,R2
003E 3400              ADDC    A,#00H
0040 FA                MOV     R2,A
0041 120000      E     LCALL   ?C?CLDPTR
0044 FF                MOV     R7,A
0045 900000      R     MOV     DPTR,#air_data_old
0048 EF                MOV     A,R7
0049 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 529
004A 900000      R     MOV     DPTR,#lindata
004D 120000      E     LCALL   ?C?PLDXDATA
0050 E9                MOV     A,R1
0051 2402              ADD     A,#02H
0053 F9                MOV     R1,A
0054 EA                MOV     A,R2
0055 3400              ADDC    A,#00H
0057 FA                MOV     R2,A
0058 120000      E     LCALL   ?C?CLDPTR
005B FF                MOV     R7,A
005C 900000      R     MOV     DPTR,#rail_data_old
005F E0                MOVX    A,@DPTR
0060 FE                MOV     R6,A
0061 EE                MOV     A,R6
0062 6F                XRL     A,R7
0063 6064              JZ      ?C0108
                                           ; SOURCE LINE # 530
                                           ; SOURCE LINE # 532
0065 900000      R     MOV     DPTR,#lindata
0068 120000      E     LCALL   ?C?PLDXDATA
006B E9                MOV     A,R1
006C 2402              ADD     A,#02H
006E F9                MOV     R1,A
006F EA                MOV     A,R2
0070 3400              ADDC    A,#00H
0072 FA                MOV     R2,A
0073 120000      E     LCALL   ?C?CLDPTR
0076 FF                MOV     R7,A
0077 EF                MOV     A,R7
0078 C4                SWAP    A
0079 13                RRC     A
007A 13                RRC     A
007B 5403              ANL     A,#03H
007D FF                MOV     R7,A
007E EF                MOV     A,R7
007F 30E035            JNB     ACC.0,?C0109
0082 900000      R     MOV     DPTR,#lindata
0085 120000      E     LCALL   ?C?PLDXDATA
0088 E9                MOV     A,R1
0089 2402              ADD     A,#02H
008B F9                MOV     R1,A
008C EA                MOV     A,R2
008D 3400              ADDC    A,#00H
008F FA                MOV     R2,A
0090 120000      E     LCALL   ?C?CLDPTR
0093 FF                MOV     R7,A
0094 EF                MOV     A,R7
0095 C4                SWAP    A
0096 13                RRC     A
0097 13                RRC     A
0098 13                RRC     A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 62  

0099 5401              ANL     A,#01H
009B FF                MOV     R7,A
009C EF                MOV     A,R7
009D 30E017            JNB     ACC.0,?C0109
                                           ; SOURCE LINE # 533
                                           ; SOURCE LINE # 535
00A0 900000      R     MOV     DPTR,#rail_data_old
00A3 E0                MOVX    A,@DPTR
00A4 FF                MOV     R7,A
00A5 900000      R     MOV     DPTR,#lindata
00A8 120000      E     LCALL   ?C?PLDXDATA
00AB E9                MOV     A,R1
00AC 2402              ADD     A,#02H
00AE F9                MOV     R1,A
00AF EA                MOV     A,R2
00B0 3400              ADDC    A,#00H
00B2 FA                MOV     R2,A
00B3 EF                MOV     A,R7
00B4 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 536
00B7         ?C0109:
                                           ; SOURCE LINE # 538
00B7 900000      R     MOV     DPTR,#lindata
00BA 120000      E     LCALL   ?C?PLDXDATA
00BD 120000      E     LCALL   ?C?CLDPTR
00C0 FF                MOV     R7,A
00C1 EF                MOV     A,R7
00C2 4404              ORL     A,#04H
00C4 FF                MOV     R7,A
00C5 EF                MOV     A,R7
00C6 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 539
00C9         ?C0108:
                                           ; SOURCE LINE # 540
00C9 900000      R     MOV     DPTR,#lindata
00CC 120000      E     LCALL   ?C?PLDXDATA
00CF E9                MOV     A,R1
00D0 2402              ADD     A,#02H
00D2 F9                MOV     R1,A
00D3 EA                MOV     A,R2
00D4 3400              ADDC    A,#00H
00D6 FA                MOV     R2,A
00D7 120000      E     LCALL   ?C?CLDPTR
00DA FF                MOV     R7,A
00DB 900000      R     MOV     DPTR,#rail_data_old
00DE EF                MOV     A,R7
00DF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 543
00E0 900000      R     MOV     DPTR,#rori_flag
00E3 E0                MOVX    A,@DPTR
00E4 FF                MOV     R7,A
00E5 EF                MOV     A,R7
00E6 B40111            CJNE    A,#01H,?C0110
                                           ; SOURCE LINE # 544
                                           ; SOURCE LINE # 545
00E9 120000      R     LCALL   LIN_Master_ReadTxStatus
00EC EF                MOV     A,R7
00ED 6401              XRL     A,#01H
00EF 7003              JNZ     $ + 5H
00F1 020000      R     LJMP    ?C0121
                                           ; SOURCE LINE # 546
                                           ; SOURCE LINE # 547
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 63  

00F4 900000      R     MOV     DPTR,#rori_flag
00F7 E4                CLR     A
00F8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 548
                                           ; SOURCE LINE # 549
00F9 22                RET     
00FA         ?C0110:
                                           ; SOURCE LINE # 550
00FA 900000      R     MOV     DPTR,#rori_flag
00FD E0                MOVX    A,@DPTR
00FE FF                MOV     R7,A
00FF EF                MOV     A,R7
0100 6003              JZ      $ + 5H
0102 020000      R     LJMP    ?C0121
                                           ; SOURCE LINE # 551
                                           ; SOURCE LINE # 552
0105 900000      R     MOV     DPTR,#lindata
0108 120000      E     LCALL   ?C?PLDXDATA
010B 120000      E     LCALL   ?C?CLDPTR
010E FF                MOV     R7,A
010F EF                MOV     A,R7
0110 30E33C            JNB     ACC.3,?C0114
                                           ; SOURCE LINE # 553
                                           ; SOURCE LINE # 554
0113 900000      R     MOV     DPTR,#lindata
0116 120000      E     LCALL   ?C?PLDXDATA
0119 E9                MOV     A,R1
011A 2403              ADD     A,#03H
011C F9                MOV     R1,A
011D EA                MOV     A,R2
011E 3400              ADDC    A,#00H
0120 FA                MOV     R2,A
0121 7D03              MOV     R5,#03H
0123 7F04              MOV     R7,#04H
0125 120000      R     LCALL   _LIN_Master_PutArray
                                           ; SOURCE LINE # 555
0128 900000      R     MOV     DPTR,#lindata
012B 120000      E     LCALL   ?C?PLDXDATA
012E 120000      E     LCALL   ?C?CLDPTR
0131 FF                MOV     R7,A
0132 EF                MOV     A,R7
0133 4401              ORL     A,#01H
0135 FF                MOV     R7,A
0136 EF                MOV     A,R7
0137 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 556
013A 900000      R     MOV     DPTR,#lindata
013D 120000      E     LCALL   ?C?PLDXDATA
0140 120000      E     LCALL   ?C?CLDPTR
0143 FF                MOV     R7,A
0144 EF                MOV     A,R7
0145 54F7              ANL     A,#0F7H
0147 FF                MOV     R7,A
0148 EF                MOV     A,R7
0149 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 557
014C 020000      R     LJMP    ?C0115
014F         ?C0114:
                                           ; SOURCE LINE # 558
014F 900000      R     MOV     DPTR,#lindata
0152 120000      E     LCALL   ?C?PLDXDATA
0155 120000      E     LCALL   ?C?CLDPTR
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 64  

0158 FF                MOV     R7,A
0159 EF                MOV     A,R7
015A 30E13C            JNB     ACC.1,?C0116
                                           ; SOURCE LINE # 559
                                           ; SOURCE LINE # 561
015D 900000      R     MOV     DPTR,#lindata
0160 120000      E     LCALL   ?C?PLDXDATA
0163 E9                MOV     A,R1
0164 2401              ADD     A,#01H
0166 F9                MOV     R1,A
0167 EA                MOV     A,R2
0168 3400              ADDC    A,#00H
016A FA                MOV     R2,A
016B 7D01              MOV     R5,#01H
016D 7F02              MOV     R7,#02H
016F 120000      R     LCALL   _LIN_Master_PutArray
                                           ; SOURCE LINE # 562
0172 900000      R     MOV     DPTR,#lindata
0175 120000      E     LCALL   ?C?PLDXDATA
0178 120000      E     LCALL   ?C?CLDPTR
017B FF                MOV     R7,A
017C EF                MOV     A,R7
017D 4401              ORL     A,#01H
017F FF                MOV     R7,A
0180 EF                MOV     A,R7
0181 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 563
0184 900000      R     MOV     DPTR,#lindata
0187 120000      E     LCALL   ?C?PLDXDATA
018A 120000      E     LCALL   ?C?CLDPTR
018D FF                MOV     R7,A
018E EF                MOV     A,R7
018F 54FD              ANL     A,#0FDH
0191 FF                MOV     R7,A
0192 EF                MOV     A,R7
0193 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 564
0196 020000      R     LJMP    ?C0115
0199         ?C0116:
                                           ; SOURCE LINE # 565
0199 900000      R     MOV     DPTR,#lindata
019C 120000      E     LCALL   ?C?PLDXDATA
019F 120000      E     LCALL   ?C?CLDPTR
01A2 FF                MOV     R7,A
01A3 EF                MOV     A,R7
01A4 30E23C            JNB     ACC.2,?C0118
                                           ; SOURCE LINE # 566
                                           ; SOURCE LINE # 568
01A7 900000      R     MOV     DPTR,#lindata
01AA 120000      E     LCALL   ?C?PLDXDATA
01AD E9                MOV     A,R1
01AE 2402              ADD     A,#02H
01B0 F9                MOV     R1,A
01B1 EA                MOV     A,R2
01B2 3400              ADDC    A,#00H
01B4 FA                MOV     R2,A
01B5 7D01              MOV     R5,#01H
01B7 7F05              MOV     R7,#05H
01B9 120000      R     LCALL   _LIN_Master_PutArray
                                           ; SOURCE LINE # 569
01BC 900000      R     MOV     DPTR,#lindata
01BF 120000      E     LCALL   ?C?PLDXDATA
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 65  

01C2 120000      E     LCALL   ?C?CLDPTR
01C5 FF                MOV     R7,A
01C6 EF                MOV     A,R7
01C7 4401              ORL     A,#01H
01C9 FF                MOV     R7,A
01CA EF                MOV     A,R7
01CB 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 570
01CE 900000      R     MOV     DPTR,#lindata
01D1 120000      E     LCALL   ?C?PLDXDATA
01D4 120000      E     LCALL   ?C?CLDPTR
01D7 FF                MOV     R7,A
01D8 EF                MOV     A,R7
01D9 54FB              ANL     A,#0FBH
01DB FF                MOV     R7,A
01DC EF                MOV     A,R7
01DD 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 571
01E0 020000      R     LJMP    ?C0115
01E3         ?C0118:
                                           ; SOURCE LINE # 572
01E3 900000      R     MOV     DPTR,#lindata
01E6 120000      E     LCALL   ?C?PLDXDATA
01E9 120000      E     LCALL   ?C?CLDPTR
01EC FF                MOV     R7,A
01ED EF                MOV     A,R7
01EE 20E003            JB      ACC.0,$ + 6H
01F1 020000      R     LJMP    ?C0115
                                           ; SOURCE LINE # 573
                                           ; SOURCE LINE # 576
01F4 900000      R     MOV     DPTR,#omuni
01F7 120000      E     LCALL   ?C?PLDXDATA
01FA 120000      R     LCALL   _calcSpeed
                                           ; SOURCE LINE # 577
01FD 900000      R     MOV     DPTR,#omuni
0200 120000      E     LCALL   ?C?PLDXDATA
0203 E9                MOV     A,R1
0204 2403              ADD     A,#03H
0206 F9                MOV     R1,A
0207 EA                MOV     A,R2
0208 3400              ADDC    A,#00H
020A FA                MOV     R2,A
020B 120000      E     LCALL   ?C?ILDPTR
020E FF                MOV     R7,A
020F AEF0              MOV     R6,B
0211 EE                MOV     A,R6
0212 FF                MOV     R7,A
0213 33                RLC     A
0214 95E0              SUBB    A,ACC
0216 FE                MOV     R6,A
0217 EF                MOV     A,R7
0218 54FF              ANL     A,#0FFH
021A FF                MOV     R7,A
021B 900000      R     MOV     DPTR,#put_data+01H
021E EF                MOV     A,R7
021F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 578
0220 900000      R     MOV     DPTR,#omuni
0223 120000      E     LCALL   ?C?PLDXDATA
0226 E9                MOV     A,R1
0227 2403              ADD     A,#03H
0229 F9                MOV     R1,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 66  

022A EA                MOV     A,R2
022B 3400              ADDC    A,#00H
022D FA                MOV     R2,A
022E 120000      E     LCALL   ?C?ILDPTR
0231 FF                MOV     R7,A
0232 AEF0              MOV     R6,B
0234 EF                MOV     A,R7
0235 54FF              ANL     A,#0FFH
0237 FF                MOV     R7,A
0238 900000      R     MOV     DPTR,#put_data
023B EF                MOV     A,R7
023C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 579
023D 900000      R     MOV     DPTR,#omuni
0240 120000      E     LCALL   ?C?PLDXDATA
0243 E9                MOV     A,R1
0244 2405              ADD     A,#05H
0246 F9                MOV     R1,A
0247 EA                MOV     A,R2
0248 3400              ADDC    A,#00H
024A FA                MOV     R2,A
024B 120000      E     LCALL   ?C?ILDPTR
024E FF                MOV     R7,A
024F AEF0              MOV     R6,B
0251 EE                MOV     A,R6
0252 FF                MOV     R7,A
0253 33                RLC     A
0254 95E0              SUBB    A,ACC
0256 FE                MOV     R6,A
0257 EF                MOV     A,R7
0258 54FF              ANL     A,#0FFH
025A FF                MOV     R7,A
025B 900000      R     MOV     DPTR,#put_data+03H
025E EF                MOV     A,R7
025F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 580
0260 900000      R     MOV     DPTR,#omuni
0263 120000      E     LCALL   ?C?PLDXDATA
0266 E9                MOV     A,R1
0267 2405              ADD     A,#05H
0269 F9                MOV     R1,A
026A EA                MOV     A,R2
026B 3400              ADDC    A,#00H
026D FA                MOV     R2,A
026E 120000      E     LCALL   ?C?ILDPTR
0271 FF                MOV     R7,A
0272 AEF0              MOV     R6,B
0274 EF                MOV     A,R7
0275 54FF              ANL     A,#0FFH
0277 FF                MOV     R7,A
0278 900000      R     MOV     DPTR,#put_data+02H
027B EF                MOV     A,R7
027C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 581
027D 900000      R     MOV     DPTR,#omuni
0280 120000      E     LCALL   ?C?PLDXDATA
0283 E9                MOV     A,R1
0284 2407              ADD     A,#07H
0286 F9                MOV     R1,A
0287 EA                MOV     A,R2
0288 3400              ADDC    A,#00H
028A FA                MOV     R2,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 67  

028B 120000      E     LCALL   ?C?ILDPTR
028E FF                MOV     R7,A
028F AEF0              MOV     R6,B
0291 EE                MOV     A,R6
0292 FF                MOV     R7,A
0293 33                RLC     A
0294 95E0              SUBB    A,ACC
0296 FE                MOV     R6,A
0297 EF                MOV     A,R7
0298 54FF              ANL     A,#0FFH
029A FF                MOV     R7,A
029B 900000      R     MOV     DPTR,#put_data+05H
029E EF                MOV     A,R7
029F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 582
02A0 900000      R     MOV     DPTR,#omuni
02A3 120000      E     LCALL   ?C?PLDXDATA
02A6 E9                MOV     A,R1
02A7 2407              ADD     A,#07H
02A9 F9                MOV     R1,A
02AA EA                MOV     A,R2
02AB 3400              ADDC    A,#00H
02AD FA                MOV     R2,A
02AE 120000      E     LCALL   ?C?ILDPTR
02B1 FF                MOV     R7,A
02B2 AEF0              MOV     R6,B
02B4 EF                MOV     A,R7
02B5 54FF              ANL     A,#0FFH
02B7 FF                MOV     R7,A
02B8 900000      R     MOV     DPTR,#put_data+04H
02BB EF                MOV     A,R7
02BC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 583
02BD 7B01              MOV     R3,#01H
02BF 7A00        R     MOV     R2,#HIGH put_data
02C1 7900        R     MOV     R1,#LOW put_data
02C3 7D06              MOV     R5,#06H
02C5 7F00              MOV     R7,#00H
02C7 120000      R     LCALL   _LIN_Master_PutArray
                                           ; SOURCE LINE # 587
02CA         ?C0115:
                                           ; SOURCE LINE # 589
02CA 900000      R     MOV     DPTR,#rori_flag
02CD 7401              MOV     A,#01H
02CF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 590
                                           ; SOURCE LINE # 591
02D0         ?C0121:
02D0 22                RET     
             ; FUNCTION _LinSendData (END)

             ; FUNCTION uart_tx_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 68  

0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 601
                                           ; SOURCE LINE # 603
002B 120000      E     LCALL   LIN_ReadTxStatus
002E EF                MOV     A,R7
002F 30E123            JNB     ACC.1,?C0125
                                           ; SOURCE LINE # 604
                                           ; SOURCE LINE # 605
0032 900000      R     MOV     DPTR,#lin_id_flag
0035 E0                MOVX    A,@DPTR
0036 FF                MOV     R7,A
0037 EF                MOV     A,R7
0038 B40105            CJNE    A,#01H,?C0123
                                           ; SOURCE LINE # 606
                                           ; SOURCE LINE # 607
003B 900000      R     MOV     DPTR,#lin_id_flag
003E E4                CLR     A
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 608
0040         ?C0123:
                                           ; SOURCE LINE # 609
0040 900000      R     MOV     DPTR,#lin_tx_flag
0043 E0                MOVX    A,@DPTR
0044 FF                MOV     R7,A
0045 EF                MOV     A,R7
0046 B4010C            CJNE    A,#01H,?C0125
                                           ; SOURCE LINE # 610
                                           ; SOURCE LINE # 613
0049 7F6D              MOV     R7,#06DH
004B 7E01              MOV     R6,#01H
004D 120000      E     LCALL   _CyDelayUs
                                           ; SOURCE LINE # 614
0050 900000      R     MOV     DPTR,#lin_tx_flag
0053 E4                CLR     A
0054 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 615
                                           ; SOURCE LINE # 616
                                           ; SOURCE LINE # 617
0055         ?C0125:
0055 D007              POP     AR7
0057 D006              POP     AR6
0059 D005              POP     AR5
005B D004              POP     AR4
005D D003              POP     AR3
005F D002              POP     AR2
0061 D001              POP     AR1
0063 D000              POP     AR0
0065 D0D0              POP     PSW
0067 D000        E     POP     ?C?XPAGE1SFR
0069 D086              POP     DPS
006B D084              POP     DPL1
006D D085              POP     DPH1
006F D082              POP     DPL
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 69  

0071 D083              POP     DPH
0073 D0F0              POP     B
0075 D0E0              POP     ACC
0077 32                RETI    
             ; FUNCTION uart_tx_isr (END)

             ; FUNCTION uart_rx_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 619
                                           ; SOURCE LINE # 621
002B 900000      R     MOV     DPTR,#lin_rx_flag
002E E0                MOVX    A,@DPTR
002F FF                MOV     R7,A
0030 EF                MOV     A,R7
0031 20E203            JB      ACC.2,$ + 6H
0034 020000      R     LJMP    ?C0129
                                           ; SOURCE LINE # 622
                                           ; SOURCE LINE # 623
0037 900000      R     MOV     DPTR,#rx_length
003A E0                MOVX    A,@DPTR
003B FF                MOV     R7,A
003C 900000      R     MOV     DPTR,#rx_i
003F E0                MOVX    A,@DPTR
0040 FE                MOV     R6,A
0041 EE                MOV     A,R6
0042 C3                CLR     C
0043 9F                SUBB    A,R7
0044 5068              JNC     ?C0127
                                           ; SOURCE LINE # 624
                                           ; SOURCE LINE # 625
0046 120000      E     LCALL   LIN_GetByte
0049 EF                MOV     A,R7
004A 54FF              ANL     A,#0FFH
004C FF                MOV     R7,A
004D 900000      R     MOV     DPTR,#rx_buffer
0050 120000      E     LCALL   ?C?PLDXDATA
0053 900000      R     MOV     DPTR,#rx_i
0056 E0                MOVX    A,@DPTR
0057 FE                MOV     R6,A
0058 E9                MOV     A,R1
0059 2E                ADD     A,R6
005A F9                MOV     R1,A
005B E4                CLR     A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 70  

005C 3A                ADDC    A,R2
005D FA                MOV     R2,A
005E EF                MOV     A,R7
005F 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 627
0062 900000      R     MOV     DPTR,#lin_rx_sync_flag
0065 E0                MOVX    A,@DPTR
0066 FF                MOV     R7,A
0067 EF                MOV     A,R7
0068 7009              JNZ     ?C0128
                                           ; SOURCE LINE # 628
                                           ; SOURCE LINE # 635
006A 900000      R     MOV     DPTR,#lin_rx_sync_flag
006D 7401              MOV     A,#01H
006F F0                MOVX    @DPTR,A
0070 020000      R     LJMP    ?C0129
                                           ; SOURCE LINE # 637
0073         ?C0128:
                                           ; SOURCE LINE # 639
0073 900000      R     MOV     DPTR,#lin_rx_sync_flag
0076 E0                MOVX    A,@DPTR
0077 FF                MOV     R7,A
0078 EF                MOV     A,R7
0079 B40109            CJNE    A,#01H,?C0130
                                           ; SOURCE LINE # 640
                                           ; SOURCE LINE # 647
007C 900000      R     MOV     DPTR,#lin_rx_sync_flag
007F 7402              MOV     A,#02H
0081 F0                MOVX    @DPTR,A
0082 020000      R     LJMP    ?C0129
                                           ; SOURCE LINE # 649
0085         ?C0130:
                                           ; SOURCE LINE # 651
0085 900000      R     MOV     DPTR,#rx_buffer
0088 120000      E     LCALL   ?C?PLDXDATA
008B 900000      R     MOV     DPTR,#rx_i
008E E0                MOVX    A,@DPTR
008F FF                MOV     R7,A
0090 E9                MOV     A,R1
0091 2F                ADD     A,R7
0092 F9                MOV     R1,A
0093 E4                CLR     A
0094 3A                ADDC    A,R2
0095 FA                MOV     R2,A
0096 120000      E     LCALL   ?C?CLDPTR
0099 FF                MOV     R7,A
009A 7E00              MOV     R6,#00H
009C 900000      R     MOV     DPTR,#rx_sum
009F EE                MOV     A,R6
00A0 8FF0              MOV     B,R7
00A2 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 652
00A5 900000      R     MOV     DPTR,#rx_i
00A8 E0                MOVX    A,@DPTR
00A9 04                INC     A
00AA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 653
00AB 020000      R     LJMP    ?C0129
00AE         ?C0127:
                                           ; SOURCE LINE # 655
                                           ; SOURCE LINE # 656
00AE 120000      E     LCALL   LIN_Timer_Stop
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 71  

                                           ; SOURCE LINE # 657
00B1 900000      R     MOV     DPTR,#rx_sum
00B4 E0                MOVX    A,@DPTR
00B5 FE                MOV     R6,A
00B6 A3                INC     DPTR
00B7 E0                MOVX    A,@DPTR
00B8 FF                MOV     R7,A
00B9 EE                MOV     A,R6
00BA FF                MOV     R7,A
00BB 7E00              MOV     R6,#00H
00BD 7E00              MOV     R6,#00H
00BF EF                MOV     A,R7
00C0 540F              ANL     A,#0FH
00C2 FF                MOV     R7,A
00C3 900000      R     MOV     DPTR,#rx_sum
00C6 E0                MOVX    A,@DPTR
00C7 FC                MOV     R4,A
00C8 A3                INC     DPTR
00C9 E0                MOVX    A,@DPTR
00CA FD                MOV     R5,A
00CB 7C00              MOV     R4,#00H
00CD EF                MOV     A,R7
00CE 2D                ADD     A,R5
00CF FF                MOV     R7,A
00D0 EE                MOV     A,R6
00D1 3C                ADDC    A,R4
00D2 FE                MOV     R6,A
00D3 EF                MOV     A,R7
00D4 F4                CPL     A
00D5 FF                MOV     R7,A
00D6 EE                MOV     A,R6
00D7 F4                CPL     A
00D8 FE                MOV     R6,A
00D9 7E00              MOV     R6,#00H
00DB 900000      R     MOV     DPTR,#rx_sum
00DE EE                MOV     A,R6
00DF F0                MOVX    @DPTR,A
00E0 A3                INC     DPTR
00E1 EF                MOV     A,R7
00E2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 658
00E3 120000      E     LCALL   LIN_GetByte
00E6 7E00              MOV     R6,#00H
00E8 900000      R     MOV     DPTR,#rx_sum
00EB E0                MOVX    A,@DPTR
00EC FC                MOV     R4,A
00ED A3                INC     DPTR
00EE E0                MOVX    A,@DPTR
00EF FD                MOV     R5,A
00F0 7C00              MOV     R4,#00H
00F2 ED                MOV     A,R5
00F3 6F                XRL     A,R7
00F4 7002              JNZ     ?C0230
00F6 EC                MOV     A,R4
00F7 6E                XRL     A,R6
00F8         ?C0230:
00F8 7048              JNZ     ?C0133
                                           ; SOURCE LINE # 659
                                           ; SOURCE LINE # 660
00FA 900000      R     MOV     DPTR,#lin_rx_flag
00FD E0                MOVX    A,@DPTR
00FE FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 72  

00FF EF                MOV     A,R7
0100 54FB              ANL     A,#0FBH
0102 FF                MOV     R7,A
0103 900000      R     MOV     DPTR,#lin_rx_flag
0106 EF                MOV     A,R7
0107 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 661
0108 900000      R     MOV     DPTR,#lin_rx_flag
010B E0                MOVX    A,@DPTR
010C FF                MOV     R7,A
010D EF                MOV     A,R7
010E 54F7              ANL     A,#0F7H
0110 FF                MOV     R7,A
0111 900000      R     MOV     DPTR,#lin_rx_flag
0114 EF                MOV     A,R7
0115 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 662
0116 900000      R     MOV     DPTR,#lin_rx_flag
0119 E0                MOVX    A,@DPTR
011A FF                MOV     R7,A
011B EF                MOV     A,R7
011C 54EF              ANL     A,#0EFH
011E FF                MOV     R7,A
011F 900000      R     MOV     DPTR,#lin_rx_flag
0122 EF                MOV     A,R7
0123 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 663
0124 900000      R     MOV     DPTR,#lin_rx_flag
0127 E0                MOVX    A,@DPTR
0128 FF                MOV     R7,A
0129 EF                MOV     A,R7
012A 4402              ORL     A,#02H
012C FF                MOV     R7,A
012D 900000      R     MOV     DPTR,#lin_rx_flag
0130 EF                MOV     A,R7
0131 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 664
0132 900000      R     MOV     DPTR,#lin_rx_flag
0135 E0                MOVX    A,@DPTR
0136 FF                MOV     R7,A
0137 EF                MOV     A,R7
0138 4401              ORL     A,#01H
013A FF                MOV     R7,A
013B 900000      R     MOV     DPTR,#lin_rx_flag
013E EF                MOV     A,R7
013F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 665
0140 8038              SJMP    ?C0129
0142         ?C0133:
                                           ; SOURCE LINE # 667
                                           ; SOURCE LINE # 668
0142 900000      R     MOV     DPTR,#lin_rx_flag
0145 E0                MOVX    A,@DPTR
0146 FF                MOV     R7,A
0147 EF                MOV     A,R7
0148 54FB              ANL     A,#0FBH
014A FF                MOV     R7,A
014B 900000      R     MOV     DPTR,#lin_rx_flag
014E EF                MOV     A,R7
014F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 669
0150 900000      R     MOV     DPTR,#lin_rx_flag
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 73  

0153 E0                MOVX    A,@DPTR
0154 FF                MOV     R7,A
0155 EF                MOV     A,R7
0156 54FD              ANL     A,#0FDH
0158 FF                MOV     R7,A
0159 900000      R     MOV     DPTR,#lin_rx_flag
015C EF                MOV     A,R7
015D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 670
015E 900000      R     MOV     DPTR,#lin_rx_flag
0161 E0                MOVX    A,@DPTR
0162 FF                MOV     R7,A
0163 EF                MOV     A,R7
0164 4401              ORL     A,#01H
0166 FF                MOV     R7,A
0167 900000      R     MOV     DPTR,#lin_rx_flag
016A EF                MOV     A,R7
016B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 671
016C 900000      R     MOV     DPTR,#lin_rx_flag
016F E0                MOVX    A,@DPTR
0170 FF                MOV     R7,A
0171 EF                MOV     A,R7
0172 4408              ORL     A,#08H
0174 FF                MOV     R7,A
0175 900000      R     MOV     DPTR,#lin_rx_flag
0178 EF                MOV     A,R7
0179 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 672
                                           ; SOURCE LINE # 673
                                           ; SOURCE LINE # 674
                                           ; SOURCE LINE # 675
017A         ?C0129:
017A D007              POP     AR7
017C D006              POP     AR6
017E D005              POP     AR5
0180 D004              POP     AR4
0182 D003              POP     AR3
0184 D002              POP     AR2
0186 D001              POP     AR1
0188 D000              POP     AR0
018A D0D0              POP     PSW
018C D000        E     POP     ?C?XPAGE1SFR
018E D086              POP     DPS
0190 D084              POP     DPL1
0192 D085              POP     DPH1
0194 D082              POP     DPL
0196 D083              POP     DPH
0198 D0F0              POP     B
019A D0E0              POP     ACC
019C 32                RETI    
             ; FUNCTION uart_rx_isr (END)

             ; FUNCTION lin_timeout_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 74  

0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 677
                                           ; SOURCE LINE # 680
002B 900000      R     MOV     DPTR,#lin_rx_flag
002E E0                MOVX    A,@DPTR
002F FF                MOV     R7,A
0030 EF                MOV     A,R7
0031 30E240            JNB     ACC.2,?C0136
                                           ; SOURCE LINE # 681
                                           ; SOURCE LINE # 692
0034 7FFF              MOV     R7,#0FFH
0036 120000      E     LCALL   _LIN_Timer_WriteCounter
                                           ; SOURCE LINE # 693
0039 120000      E     LCALL   LIN_Timer_Stop
                                           ; SOURCE LINE # 694
003C 900000      R     MOV     DPTR,#lin_rx_flag
003F E0                MOVX    A,@DPTR
0040 FF                MOV     R7,A
0041 EF                MOV     A,R7
0042 54FB              ANL     A,#0FBH
0044 FF                MOV     R7,A
0045 900000      R     MOV     DPTR,#lin_rx_flag
0048 EF                MOV     A,R7
0049 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 695
004A 900000      R     MOV     DPTR,#lin_rx_flag
004D E0                MOVX    A,@DPTR
004E FF                MOV     R7,A
004F EF                MOV     A,R7
0050 54FD              ANL     A,#0FDH
0052 FF                MOV     R7,A
0053 900000      R     MOV     DPTR,#lin_rx_flag
0056 EF                MOV     A,R7
0057 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 696
0058 900000      R     MOV     DPTR,#lin_rx_flag
005B E0                MOVX    A,@DPTR
005C FF                MOV     R7,A
005D EF                MOV     A,R7
005E 4401              ORL     A,#01H
0060 FF                MOV     R7,A
0061 900000      R     MOV     DPTR,#lin_rx_flag
0064 EF                MOV     A,R7
0065 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 697
0066 900000      R     MOV     DPTR,#lin_rx_flag
0069 E0                MOVX    A,@DPTR
006A FF                MOV     R7,A
006B EF                MOV     A,R7
006C 4410              ORL     A,#010H
006E FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 75  

006F 900000      R     MOV     DPTR,#lin_rx_flag
0072 EF                MOV     A,R7
0073 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 718
                                           ; SOURCE LINE # 719
0074         ?C0136:
0074 D007              POP     AR7
0076 D006              POP     AR6
0078 D005              POP     AR5
007A D004              POP     AR4
007C D003              POP     AR3
007E D002              POP     AR2
0080 D001              POP     AR1
0082 D000              POP     AR0
0084 D0D0              POP     PSW
0086 D000        E     POP     ?C?XPAGE1SFR
0088 D086              POP     DPS
008A D084              POP     DPL1
008C D085              POP     DPH1
008E D082              POP     DPL
0090 D083              POP     DPH
0092 D0F0              POP     B
0094 D0E0              POP     ACC
0096 32                RETI    
             ; FUNCTION lin_timeout_isr (END)

             ; FUNCTION line_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 722
002B         ?C0139:
                                           ; SOURCE LINE # 729
                                           ; SOURCE LINE # 730
002B 120000      E     LCALL   Line_GetByte
002E 900000      R     MOV     DPTR,#line_get
0031 EE                MOV     A,R6
0032 F0                MOVX    @DPTR,A
0033 A3                INC     DPTR
0034 EF                MOV     A,R7
0035 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 732
0036 900000      R     MOV     DPTR,#line_get
0039 E0                MOVX    A,@DPTR
003A FE                MOV     R6,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 76  

003B A3                INC     DPTR
003C E0                MOVX    A,@DPTR
003D FF                MOV     R7,A
003E 7E00              MOV     R6,#00H
0040 EF                MOV     A,R7
0041 6482              XRL     A,#082H
0043 4E                ORL     A,R6
0044 7019              JNZ     ?C0140
0046 900000      R     MOV     DPTR,#line_flag
0049 E0                MOVX    A,@DPTR
004A FF                MOV     R7,A
004B EF                MOV     A,R7
004C 7011              JNZ     ?C0140
                                           ; SOURCE LINE # 733
                                           ; SOURCE LINE # 734
004E 900000      R     MOV     DPTR,#line_flag
0051 7401              MOV     A,#01H
0053 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 735
0054 900000      R     MOV     DPTR,#line_i
0057 E4                CLR     A
0058 F0                MOVX    @DPTR,A
0059 A3                INC     DPTR
005A E4                CLR     A
005B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 736
005C 020000      R     LJMP    ?C0137
005F         ?C0140:
                                           ; SOURCE LINE # 737
005F 900000      R     MOV     DPTR,#line_get
0062 E0                MOVX    A,@DPTR
0063 FE                MOV     R6,A
0064 A3                INC     DPTR
0065 E0                MOVX    A,@DPTR
0066 FF                MOV     R7,A
0067 7E00              MOV     R6,#00H
0069 EF                MOV     A,R7
006A 6483              XRL     A,#083H
006C 4E                ORL     A,R6
006D 703B              JNZ     ?C0142
006F 900000      R     MOV     DPTR,#line_flag
0072 E0                MOVX    A,@DPTR
0073 FF                MOV     R7,A
0074 EF                MOV     A,R7
0075 B40132            CJNE    A,#01H,?C0142
                                           ; SOURCE LINE # 738
                                           ; SOURCE LINE # 739
0078 900000      R     MOV     DPTR,#line_flag
007B 7402              MOV     A,#02H
007D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 740
007E 900000      R     MOV     DPTR,#line_i
0081 E0                MOVX    A,@DPTR
0082 FE                MOV     R6,A
0083 A3                INC     DPTR
0084 E0                MOVX    A,@DPTR
0085 FF                MOV     R7,A
0086 7400        R     MOV     A,#LOW line_data
0088 2F                ADD     A,R7
0089 F582              MOV     DPL,A
008B 7400        R     MOV     A,#HIGH line_data
008D 3E                ADDC    A,R6
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 77  

008E F583              MOV     DPH,A
0090 E4                CLR     A
0091 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 741
0092 900000      R     MOV     DPTR,#line_i
0095 E0                MOVX    A,@DPTR
0096 FE                MOV     R6,A
0097 A3                INC     DPTR
0098 E0                MOVX    A,@DPTR
0099 FF                MOV     R7,A
009A 900000      R     MOV     DPTR,#line_m
009D EF                MOV     A,R7
009E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 742
009F 900000      R     MOV     DPTR,#line_i
00A2 E4                CLR     A
00A3 F0                MOVX    @DPTR,A
00A4 A3                INC     DPTR
00A5 E4                CLR     A
00A6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 743
00A7 020000      R     LJMP    ?C0137
00AA         ?C0142:
                                           ; SOURCE LINE # 744
00AA 900000      R     MOV     DPTR,#line_get
00AD E0                MOVX    A,@DPTR
00AE FE                MOV     R6,A
00AF A3                INC     DPTR
00B0 E0                MOVX    A,@DPTR
00B1 FF                MOV     R7,A
00B2 7E00              MOV     R6,#00H
00B4 EF                MOV     A,R7
00B5 6484              XRL     A,#084H
00B7 4E                ORL     A,R6
00B8 7031              JNZ     ?C0144
00BA 900000      R     MOV     DPTR,#line_flag
00BD E0                MOVX    A,@DPTR
00BE FF                MOV     R7,A
00BF EF                MOV     A,R7
00C0 B40228            CJNE    A,#02H,?C0144
                                           ; SOURCE LINE # 745
                                           ; SOURCE LINE # 746
00C3 900000      R     MOV     DPTR,#line_i
00C6 E0                MOVX    A,@DPTR
00C7 FE                MOV     R6,A
00C8 A3                INC     DPTR
00C9 E0                MOVX    A,@DPTR
00CA FF                MOV     R7,A
00CB 900000      R     MOV     DPTR,#line_m+01H
00CE EF                MOV     A,R7
00CF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 747
00D0 900000      R     MOV     DPTR,#line_flag
00D3 E4                CLR     A
00D4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 748
00D5 900000      R     MOV     DPTR,#line_i
00D8 E0                MOVX    A,@DPTR
00D9 FE                MOV     R6,A
00DA A3                INC     DPTR
00DB E0                MOVX    A,@DPTR
00DC FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 78  

00DD 7400        R     MOV     A,#LOW line_data+0AH
00DF 2F                ADD     A,R7
00E0 F582              MOV     DPL,A
00E2 7400        R     MOV     A,#HIGH line_data+0AH
00E4 3E                ADDC    A,R6
00E5 F583              MOV     DPH,A
00E7 E4                CLR     A
00E8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 749
00E9 8068              SJMP    ?C0137
00EB         ?C0144:
                                           ; SOURCE LINE # 750
00EB 900000      R     MOV     DPTR,#line_flag
00EE E0                MOVX    A,@DPTR
00EF FF                MOV     R7,A
00F0 EF                MOV     A,R7
00F1 B4012C            CJNE    A,#01H,?C0146
                                           ; SOURCE LINE # 751
                                           ; SOURCE LINE # 752
00F4 900000      R     MOV     DPTR,#line_get
00F7 E0                MOVX    A,@DPTR
00F8 FE                MOV     R6,A
00F9 A3                INC     DPTR
00FA E0                MOVX    A,@DPTR
00FB FF                MOV     R7,A
00FC EF                MOV     A,R7
00FD 54FF              ANL     A,#0FFH
00FF FF                MOV     R7,A
0100 900000      R     MOV     DPTR,#line_i
0103 E0                MOVX    A,@DPTR
0104 FC                MOV     R4,A
0105 A3                INC     DPTR
0106 E0                MOVX    A,@DPTR
0107 FD                MOV     R5,A
0108 7400        R     MOV     A,#LOW line_data
010A 2D                ADD     A,R5
010B F582              MOV     DPL,A
010D 7400        R     MOV     A,#HIGH line_data
010F 3C                ADDC    A,R4
0110 F583              MOV     DPH,A
0112 EF                MOV     A,R7
0113 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 753
0114 900000      R     MOV     DPTR,#line_i
0117 E4                CLR     A
0118 75F001            MOV     B,#01H
011B 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 754
011E 8033              SJMP    ?C0137
0120         ?C0146:
                                           ; SOURCE LINE # 755
0120 900000      R     MOV     DPTR,#line_flag
0123 E0                MOVX    A,@DPTR
0124 FF                MOV     R7,A
0125 EF                MOV     A,R7
0126 B4022A            CJNE    A,#02H,?C0137
                                           ; SOURCE LINE # 756
                                           ; SOURCE LINE # 757
0129 900000      R     MOV     DPTR,#line_get
012C E0                MOVX    A,@DPTR
012D FE                MOV     R6,A
012E A3                INC     DPTR
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 79  

012F E0                MOVX    A,@DPTR
0130 FF                MOV     R7,A
0131 EF                MOV     A,R7
0132 54FF              ANL     A,#0FFH
0134 FF                MOV     R7,A
0135 900000      R     MOV     DPTR,#line_i
0138 E0                MOVX    A,@DPTR
0139 FC                MOV     R4,A
013A A3                INC     DPTR
013B E0                MOVX    A,@DPTR
013C FD                MOV     R5,A
013D 7400        R     MOV     A,#LOW line_data+0AH
013F 2D                ADD     A,R5
0140 F582              MOV     DPL,A
0142 7400        R     MOV     A,#HIGH line_data+0AH
0144 3C                ADDC    A,R4
0145 F583              MOV     DPH,A
0147 EF                MOV     A,R7
0148 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 758
0149 900000      R     MOV     DPTR,#line_i
014C E4                CLR     A
014D 75F001            MOV     B,#01H
0150 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 759
                                           ; SOURCE LINE # 760
0153         ?C0137:
0153 900000      R     MOV     DPTR,#line_get
0156 E0                MOVX    A,@DPTR
0157 FE                MOV     R6,A
0158 A3                INC     DPTR
0159 E0                MOVX    A,@DPTR
015A FF                MOV     R7,A
015B EE                MOV     A,R6
015C FF                MOV     R7,A
015D 7E00              MOV     R6,#00H
015F EF                MOV     A,R7
0160 30E503            JNB     ACC.5,$ + 6H
0163 020000      R     LJMP    ?C0139
                                           ; SOURCE LINE # 762
0166         ?C0149:
0166 D007              POP     AR7
0168 D006              POP     AR6
016A D005              POP     AR5
016C D004              POP     AR4
016E D003              POP     AR3
0170 D002              POP     AR2
0172 D001              POP     AR1
0174 D000              POP     AR0
0176 D0D0              POP     PSW
0178 D000        E     POP     ?C?XPAGE1SFR
017A D086              POP     DPS
017C D084              POP     DPL1
017E D085              POP     DPH1
0180 D082              POP     DPL
0182 D083              POP     DPH
0184 D0F0              POP     B
0186 D0E0              POP     ACC
0188 32                RETI    
             ; FUNCTION line_isr (END)

             ; FUNCTION main (BEGIN)
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 80  

                                           ; SOURCE LINE # 764
                                           ; SOURCE LINE # 765
                                           ; SOURCE LINE # 774
0000 900000      R     MOV     DPTR,#modeSelect
0003 E4                CLR     A
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 775
0005 900000      R     MOV     DPTR,#modeCount
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 786
000A 900000      R     MOV     DPTR,#omuni+09H
000D 740B              MOV     A,#0BH
000F F0                MOVX    @DPTR,A
0010 A3                INC     DPTR
0011 74B8              MOV     A,#0B8H
0013 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 789
0014 D2AF              SETB    EA
0016 9044F4            MOV     DPTR,#044F4H
0019 74FD              MOV     A,#0FDH
001B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 790
001C 120000      E     LCALL   LIN_Start
                                           ; SOURCE LINE # 791
001F 120000      E     LCALL   UART_2_Start
                                           ; SOURCE LINE # 792
0022 120000      E     LCALL   PS2_Start
                                           ; SOURCE LINE # 793
0025 120000      E     LCALL   Line_Start
                                           ; SOURCE LINE # 795
0028 7E00        R     MOV     R6,#HIGH uart_tx_isr
002A 7F00        R     MOV     R7,#LOW uart_tx_isr
002C 120000      E     LCALL   _uart_tx_isr_StartEx
                                           ; SOURCE LINE # 796
002F 7E00        R     MOV     R6,#HIGH uart_rx_isr
0031 7F00        R     MOV     R7,#LOW uart_rx_isr
0033 120000      E     LCALL   _uart_rx_isr_StartEx
                                           ; SOURCE LINE # 797
0036 7E00        R     MOV     R6,#HIGH lin_timeout_isr
0038 7F00        R     MOV     R7,#LOW lin_timeout_isr
003A 120000      E     LCALL   _lin_timer_isr_StartEx
                                           ; SOURCE LINE # 798
003D 7E00        R     MOV     R6,#HIGH line_isr
003F 7F00        R     MOV     R7,#LOW line_isr
0041 120000      E     LCALL   _isr_line_StartEx
                                           ; SOURCE LINE # 800
0044 120000      E     LCALL   UART_2_EnableTxInt
                                           ; SOURCE LINE # 801
0047 120000      E     LCALL   LIN_EnableRxInt
                                           ; SOURCE LINE # 802
004A 120000      E     LCALL   LIN_EnableTxInt
                                           ; SOURCE LINE # 803
004D 120000      E     LCALL   Line_EnableRxInt
                                           ; SOURCE LINE # 807
0050 900000      R     MOV     DPTR,#lindata
0053 7401              MOV     A,#01H
0055 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 810
0056 900000      R     MOV     DPTR,#lindata+03H
0059 741E              MOV     A,#01EH
005B F0                MOVX    @DPTR,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 81  

                                           ; SOURCE LINE # 811
005C 900000      R     MOV     DPTR,#lindata+04H
005F 741E              MOV     A,#01EH
0061 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 812
0062 900000      R     MOV     DPTR,#lindata+05H
0065 E4                CLR     A
0066 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 813
0067 900000      R     MOV     DPTR,#lindata+02H
006A E0                MOVX    A,@DPTR
006B FF                MOV     R7,A
006C EF                MOV     A,R7
006D 54C0              ANL     A,#0C0H
006F FF                MOV     R7,A
0070 EF                MOV     A,R7
0071 4408              ORL     A,#08H
0073 FF                MOV     R7,A
0074 900000      R     MOV     DPTR,#lindata+02H
0077 EF                MOV     A,R7
0078 F0                MOVX    @DPTR,A
0079         ?C0150:
                                           ; SOURCE LINE # 816
0079 120000      E     LCALL   PS2_Analog_Flag
007C 50FB              JNC     ?C0150
007E         ?C0151:
007E         ?C0152:
                                           ; SOURCE LINE # 819
007E 120000      E     LCALL   PS2_Controller_get
0081 120000      E     LCALL   ?C?CLDPTR
0084 FF                MOV     R7,A
0085 EF                MOV     A,R7
0086 13                RRC     A
0087 13                RRC     A
0088 13                RRC     A
0089 541F              ANL     A,#01FH
008B FF                MOV     R7,A
008C EF                MOV     A,R7
008D 30E0EE            JNB     ACC.0,?C0152
0090         ?C0153:
                                           ; SOURCE LINE # 821
0090         ?C0154:
                                           ; SOURCE LINE # 822
                                           ; SOURCE LINE # 824
0090 120000      E     LCALL   PS2_Controller_get
0093 C003              PUSH    AR3
0095 C002              PUSH    AR2
0097 C001              PUSH    AR1
0099 7B01              MOV     R3,#01H
009B 7A00        R     MOV     R2,#HIGH psData
009D 7900        R     MOV     R1,#LOW psData
009F A801              MOV     R0,AR1
00A1 AC02              MOV     R4,AR2
00A3 AD03              MOV     R5,AR3
00A5 D001              POP     AR1
00A7 D002              POP     AR2
00A9 D003              POP     AR3
00AB 7E00              MOV     R6,#00H
00AD 7F06              MOV     R7,#06H
00AF 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 825
00B2 7B01              MOV     R3,#01H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 82  

00B4 7A00        R     MOV     R2,#HIGH omuni
00B6 7900        R     MOV     R1,#LOW omuni
00B8 C003              PUSH    AR3
00BA C002              PUSH    AR2
00BC C001              PUSH    AR1
00BE 7B01              MOV     R3,#01H
00C0 7A00        R     MOV     R2,#HIGH lindata
00C2 7900        R     MOV     R1,#LOW lindata
00C4 900000      R     MOV     DPTR,#?_PS2ControlMachine?BYTE+03H
00C7 120000      E     LCALL   ?C?PSTXDATA
00CA D001              POP     AR1
00CC D002              POP     AR2
00CE D003              POP     AR3
00D0 120000      R     LCALL   _PS2ControlMachine
                                           ; SOURCE LINE # 826
00D3 7B01              MOV     R3,#01H
00D5 7A00        R     MOV     R2,#HIGH omuni
00D7 7900        R     MOV     R1,#LOW omuni
00D9 C003              PUSH    AR3
00DB C002              PUSH    AR2
00DD C001              PUSH    AR1
00DF 7B01              MOV     R3,#01H
00E1 7A00        R     MOV     R2,#HIGH lindata
00E3 7900        R     MOV     R1,#LOW lindata
00E5 900000      R     MOV     DPTR,#?_LinSendData?BYTE+03H
00E8 120000      E     LCALL   ?C?PSTXDATA
00EB D001              POP     AR1
00ED D002              POP     AR2
00EF D003              POP     AR3
00F1 120000      R     LCALL   _LinSendData
                                           ; SOURCE LINE # 828
00F4 900000      R     MOV     DPTR,#psData
00F7 E0                MOVX    A,@DPTR
00F8 FF                MOV     R7,A
00F9 EF                MOV     A,R7
00FA 30E00F            JNB     ACC.0,?C0156
00FD 900000      R     MOV     DPTR,#psData+01H
0100 E0                MOVX    A,@DPTR
0101 FF                MOV     R7,A
0102 EF                MOV     A,R7
0103 30E406            JNB     ACC.4,?C0156
                                           ; SOURCE LINE # 829
0106 900000      R     MOV     DPTR,#modeSelect
0109 7404              MOV     A,#04H
010B F0                MOVX    @DPTR,A
010C         ?C0156:
                                           ; SOURCE LINE # 830
010C 900000      R     MOV     DPTR,#psData
010F E0                MOVX    A,@DPTR
0110 FF                MOV     R7,A
0111 EF                MOV     A,R7
0112 30E00F            JNB     ACC.0,?C0157
0115 900000      R     MOV     DPTR,#psData+01H
0118 E0                MOVX    A,@DPTR
0119 FF                MOV     R7,A
011A EF                MOV     A,R7
011B 30E506            JNB     ACC.5,?C0157
                                           ; SOURCE LINE # 831
011E 900000      R     MOV     DPTR,#modeSelect
0121 7402              MOV     A,#02H
0123 F0                MOVX    @DPTR,A
0124         ?C0157:
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 83  

                                           ; SOURCE LINE # 832
0124 900000      R     MOV     DPTR,#psData
0127 E0                MOVX    A,@DPTR
0128 FF                MOV     R7,A
0129 EF                MOV     A,R7
012A 30E00F            JNB     ACC.0,?C0158
012D 900000      R     MOV     DPTR,#psData+01H
0130 E0                MOVX    A,@DPTR
0131 FF                MOV     R7,A
0132 EF                MOV     A,R7
0133 30E606            JNB     ACC.6,?C0158
                                           ; SOURCE LINE # 833
0136 900000      R     MOV     DPTR,#modeSelect
0139 7401              MOV     A,#01H
013B F0                MOVX    @DPTR,A
013C         ?C0158:
                                           ; SOURCE LINE # 834
013C 900000      R     MOV     DPTR,#psData
013F E0                MOVX    A,@DPTR
0140 FF                MOV     R7,A
0141 EF                MOV     A,R7
0142 30E00F            JNB     ACC.0,?C0159
0145 900000      R     MOV     DPTR,#psData+01H
0148 E0                MOVX    A,@DPTR
0149 FF                MOV     R7,A
014A EF                MOV     A,R7
014B 30E706            JNB     ACC.7,?C0159
                                           ; SOURCE LINE # 835
014E 900000      R     MOV     DPTR,#modeSelect
0151 7403              MOV     A,#03H
0153 F0                MOVX    @DPTR,A
0154         ?C0159:
                                           ; SOURCE LINE # 842
0154 900000      R     MOV     DPTR,#modeSelect
0157 E0                MOVX    A,@DPTR
0158 FF                MOV     R7,A
0159 EF                MOV     A,R7
015A 6402              XRL     A,#02H
015C 6003              JZ      $ + 5H
015E 020000      R     LJMP    ?C0160
                                           ; SOURCE LINE # 843
                                           ; SOURCE LINE # 846
0161 900000      R     MOV     DPTR,#lindata+01H
0164 E0                MOVX    A,@DPTR
0165 FF                MOV     R7,A
0166 EF                MOV     A,R7
0167 4404              ORL     A,#04H
0169 FF                MOV     R7,A
016A 900000      R     MOV     DPTR,#lindata+01H
016D EF                MOV     A,R7
016E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 847
016F 900000      R     MOV     DPTR,#lindata+01H
0172 E0                MOVX    A,@DPTR
0173 FF                MOV     R7,A
0174 EF                MOV     A,R7
0175 547F              ANL     A,#07FH
0177 FF                MOV     R7,A
0178 900000      R     MOV     DPTR,#lindata+01H
017B EF                MOV     A,R7
017C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 848
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 84  

017D 900000      R     MOV     DPTR,#lindata+01H
0180 E0                MOVX    A,@DPTR
0181 FF                MOV     R7,A
0182 EF                MOV     A,R7
0183 4440              ORL     A,#040H
0185 FF                MOV     R7,A
0186 900000      R     MOV     DPTR,#lindata+01H
0189 EF                MOV     A,R7
018A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 849
018B 900000      R     MOV     DPTR,#lindata+01H
018E E0                MOVX    A,@DPTR
018F FF                MOV     R7,A
0190 EF                MOV     A,R7
0191 54DF              ANL     A,#0DFH
0193 FF                MOV     R7,A
0194 900000      R     MOV     DPTR,#lindata+01H
0197 EF                MOV     A,R7
0198 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 850
0199 900000      R     MOV     DPTR,#lindata+01H
019C E0                MOVX    A,@DPTR
019D FF                MOV     R7,A
019E EF                MOV     A,R7
019F 54EF              ANL     A,#0EFH
01A1 FF                MOV     R7,A
01A2 900000      R     MOV     DPTR,#lindata+01H
01A5 EF                MOV     A,R7
01A6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 851
01A7 900000      R     MOV     DPTR,#lindata+02H
01AA E0                MOVX    A,@DPTR
01AB FF                MOV     R7,A
01AC EF                MOV     A,R7
01AD 54BF              ANL     A,#0BFH
01AF FF                MOV     R7,A
01B0 900000      R     MOV     DPTR,#lindata+02H
01B3 EF                MOV     A,R7
01B4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 852
01B5 900000      R     MOV     DPTR,#lindata+02H
01B8 E0                MOVX    A,@DPTR
01B9 FF                MOV     R7,A
01BA EF                MOV     A,R7
01BB 547F              ANL     A,#07FH
01BD FF                MOV     R7,A
01BE 900000      R     MOV     DPTR,#lindata+02H
01C1 EF                MOV     A,R7
01C2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 854
01C3 900000      R     MOV     DPTR,#modeCount
01C6 E4                CLR     A
01C7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 855
01C8 900000      R     MOV     DPTR,#circle_flag
01CB E4                CLR     A
01CC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 856
01CD 900000      R     MOV     DPTR,#cross_flag
01D0 E4                CLR     A
01D1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 857
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 85  

01D2 7B01              MOV     R3,#01H
01D4 7A00        R     MOV     R2,#HIGH omuni
01D6 7900        R     MOV     R1,#LOW omuni
01D8 C003              PUSH    AR3
01DA C002              PUSH    AR2
01DC C001              PUSH    AR1
01DE 7B01              MOV     R3,#01H
01E0 7A00        R     MOV     R2,#HIGH lindata
01E2 7900        R     MOV     R1,#LOW lindata
01E4 900000      R     MOV     DPTR,#?_LinSendData?BYTE+03H
01E7 120000      E     LCALL   ?C?PSTXDATA
01EA D001              POP     AR1
01EC D002              POP     AR2
01EE D003              POP     AR3
01F0 120000      R     LCALL   _LinSendData
01F3         ?C0161:
                                           ; SOURCE LINE # 858
                                           ; SOURCE LINE # 859
                                           ; SOURCE LINE # 860
01F3 120000      E     LCALL   PS2_Controller_get
01F6 C003              PUSH    AR3
01F8 C002              PUSH    AR2
01FA C001              PUSH    AR1
01FC 7B01              MOV     R3,#01H
01FE 7A00        R     MOV     R2,#HIGH psData
0200 7900        R     MOV     R1,#LOW psData
0202 A801              MOV     R0,AR1
0204 AC02              MOV     R4,AR2
0206 AD03              MOV     R5,AR3
0208 D001              POP     AR1
020A D002              POP     AR2
020C D003              POP     AR3
020E 7E00              MOV     R6,#00H
0210 7F06              MOV     R7,#06H
0212 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 862
0215 900000      R     MOV     DPTR,#psData+01H
0218 E0                MOVX    A,@DPTR
0219 FF                MOV     R7,A
021A EF                MOV     A,R7
021B 30E520            JNB     ACC.5,?C0163
                                           ; SOURCE LINE # 863
                                           ; SOURCE LINE # 864
021E 900000      R     MOV     DPTR,#circle_flag
0221 E0                MOVX    A,@DPTR
0222 FF                MOV     R7,A
0223 EF                MOV     A,R7
0224 601E              JZ      ?C0166
                                           ; SOURCE LINE # 865
                                           ; SOURCE LINE # 866
0226 900000      R     MOV     DPTR,#modeCount
0229 E0                MOVX    A,@DPTR
022A FF                MOV     R7,A
022B EF                MOV     A,R7
022C C3                CLR     C
022D 9409              SUBB    A,#09H
022F 5006              JNC     ?C0165
                                           ; SOURCE LINE # 867
0231 900000      R     MOV     DPTR,#modeCount
0234 E0                MOVX    A,@DPTR
0235 04                INC     A
0236 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 86  

0237         ?C0165:
                                           ; SOURCE LINE # 868
0237 900000      R     MOV     DPTR,#circle_flag
023A E4                CLR     A
023B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 869
                                           ; SOURCE LINE # 870
023C 8006              SJMP    ?C0166
023E         ?C0163:
                                           ; SOURCE LINE # 872
                                           ; SOURCE LINE # 873
023E 900000      R     MOV     DPTR,#circle_flag
0241 7401              MOV     A,#01H
0243 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 874
0244         ?C0166:
                                           ; SOURCE LINE # 876
0244 900000      R     MOV     DPTR,#psData+01H
0247 E0                MOVX    A,@DPTR
0248 FF                MOV     R7,A
0249 EF                MOV     A,R7
024A 30E620            JNB     ACC.6,?C0167
                                           ; SOURCE LINE # 877
                                           ; SOURCE LINE # 878
024D 900000      R     MOV     DPTR,#cross_flag
0250 E0                MOVX    A,@DPTR
0251 FF                MOV     R7,A
0252 EF                MOV     A,R7
0253 601E              JZ      ?C0170
                                           ; SOURCE LINE # 879
                                           ; SOURCE LINE # 880
0255 900000      R     MOV     DPTR,#modeCount
0258 E0                MOVX    A,@DPTR
0259 FF                MOV     R7,A
025A EF                MOV     A,R7
025B D3                SETB    C
025C 9400              SUBB    A,#00H
025E 4006              JC      ?C0169
                                           ; SOURCE LINE # 881
0260 900000      R     MOV     DPTR,#modeCount
0263 E0                MOVX    A,@DPTR
0264 14                DEC     A
0265 F0                MOVX    @DPTR,A
0266         ?C0169:
                                           ; SOURCE LINE # 882
0266 900000      R     MOV     DPTR,#cross_flag
0269 E4                CLR     A
026A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 883
                                           ; SOURCE LINE # 884
026B 8006              SJMP    ?C0170
026D         ?C0167:
                                           ; SOURCE LINE # 886
                                           ; SOURCE LINE # 887
026D 900000      R     MOV     DPTR,#cross_flag
0270 7401              MOV     A,#01H
0272 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 888
0273         ?C0170:
                                           ; SOURCE LINE # 890
0273 900000      R     MOV     DPTR,#psData
0276 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 87  

0277 FF                MOV     R7,A
0278 EF                MOV     A,R7
0279 30E308            JNB     ACC.3,?C0171
                                           ; SOURCE LINE # 891
                                           ; SOURCE LINE # 892
027C 900000      R     MOV     DPTR,#modeSelect
027F E4                CLR     A
0280 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 893
0281 020000      R     LJMP    ?C0160
                                           ; SOURCE LINE # 894
0284         ?C0171:
                                           ; SOURCE LINE # 896
0284 900000      R     MOV     DPTR,#modeCount
0287 E0                MOVX    A,@DPTR
0288 FF                MOV     R7,A
0289 EF                MOV     A,R7
028A 706A              JNZ     ?C0172
                                           ; SOURCE LINE # 897
                                           ; SOURCE LINE # 898
028C 900000      R     MOV     DPTR,#lindata+01H
028F E0                MOVX    A,@DPTR
0290 FF                MOV     R7,A
0291 EF                MOV     A,R7
0292 4404              ORL     A,#04H
0294 FF                MOV     R7,A
0295 900000      R     MOV     DPTR,#lindata+01H
0298 EF                MOV     A,R7
0299 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 899
029A 900000      R     MOV     DPTR,#lindata+01H
029D E0                MOVX    A,@DPTR
029E FF                MOV     R7,A
029F EF                MOV     A,R7
02A0 547F              ANL     A,#07FH
02A2 FF                MOV     R7,A
02A3 900000      R     MOV     DPTR,#lindata+01H
02A6 EF                MOV     A,R7
02A7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 900
02A8 900000      R     MOV     DPTR,#lindata+01H
02AB E0                MOVX    A,@DPTR
02AC FF                MOV     R7,A
02AD EF                MOV     A,R7
02AE 4440              ORL     A,#040H
02B0 FF                MOV     R7,A
02B1 900000      R     MOV     DPTR,#lindata+01H
02B4 EF                MOV     A,R7
02B5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 902
02B6 7B01              MOV     R3,#01H
02B8 7A00        R     MOV     R2,#HIGH psData
02BA 7900        R     MOV     R1,#LOW psData
02BC C003              PUSH    AR3
02BE C002              PUSH    AR2
02C0 C001              PUSH    AR1
02C2 7B01              MOV     R3,#01H
02C4 7A00        R     MOV     R2,#HIGH omuni
02C6 7900        R     MOV     R1,#LOW omuni
02C8 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+03H
02CB 120000      E     LCALL   ?C?PSTXDATA
02CE 7F00              MOV     R7,#00H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 88  

02D0 7E00              MOV     R6,#00H
02D2 7D80              MOV     R5,#080H
02D4 7C3F              MOV     R4,#03FH
02D6 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+06H
02D9 120000      E     LCALL   ?C?LSTXDATA
02DC 7F9A              MOV     R7,#09AH
02DE 7E99              MOV     R6,#099H
02E0 7D99              MOV     R5,#099H
02E2 7C3E              MOV     R4,#03EH
02E4 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+0AH
02E7 120000      E     LCALL   ?C?LSTXDATA
02EA D001              POP     AR1
02EC D002              POP     AR2
02EE D003              POP     AR3
02F0 120000      R     LCALL   _PS2OmuniControl
                                           ; SOURCE LINE # 903
02F3 020000      R     LJMP    ?C0173
02F6         ?C0172:
                                           ; SOURCE LINE # 905
02F6 900000      R     MOV     DPTR,#modeCount
02F9 E0                MOVX    A,@DPTR
02FA FF                MOV     R7,A
02FB EF                MOV     A,R7
02FC B4012D            CJNE    A,#01H,?C0174
                                           ; SOURCE LINE # 906
                                           ; SOURCE LINE # 907
02FF 900000      R     MOV     DPTR,#lindata+01H
0302 E0                MOVX    A,@DPTR
0303 FF                MOV     R7,A
0304 EF                MOV     A,R7
0305 4404              ORL     A,#04H
0307 FF                MOV     R7,A
0308 900000      R     MOV     DPTR,#lindata+01H
030B EF                MOV     A,R7
030C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 908
030D 900000      R     MOV     DPTR,#lindata+01H
0310 E0                MOVX    A,@DPTR
0311 FF                MOV     R7,A
0312 EF                MOV     A,R7
0313 4480              ORL     A,#080H
0315 FF                MOV     R7,A
0316 900000      R     MOV     DPTR,#lindata+01H
0319 EF                MOV     A,R7
031A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 909
031B 900000      R     MOV     DPTR,#lindata+01H
031E E0                MOVX    A,@DPTR
031F FF                MOV     R7,A
0320 EF                MOV     A,R7
0321 4440              ORL     A,#040H
0323 FF                MOV     R7,A
0324 900000      R     MOV     DPTR,#lindata+01H
0327 EF                MOV     A,R7
0328 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 911
0329 020000      R     LJMP    ?C0173
032C         ?C0174:
                                           ; SOURCE LINE # 913
032C 900000      R     MOV     DPTR,#modeCount
032F E0                MOVX    A,@DPTR
0330 FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 89  

0331 EF                MOV     A,R7
0332 6402              XRL     A,#02H
0334 7069              JNZ     ?C0176
                                           ; SOURCE LINE # 914
                                           ; SOURCE LINE # 915
0336 900000      R     MOV     DPTR,#lindata+01H
0339 E0                MOVX    A,@DPTR
033A FF                MOV     R7,A
033B EF                MOV     A,R7
033C 54FB              ANL     A,#0FBH
033E FF                MOV     R7,A
033F 900000      R     MOV     DPTR,#lindata+01H
0342 EF                MOV     A,R7
0343 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 916
0344 900000      R     MOV     DPTR,#lindata+01H
0347 E0                MOVX    A,@DPTR
0348 FF                MOV     R7,A
0349 EF                MOV     A,R7
034A 4480              ORL     A,#080H
034C FF                MOV     R7,A
034D 900000      R     MOV     DPTR,#lindata+01H
0350 EF                MOV     A,R7
0351 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 917
0352 900000      R     MOV     DPTR,#lindata+01H
0355 E0                MOVX    A,@DPTR
0356 FF                MOV     R7,A
0357 EF                MOV     A,R7
0358 4440              ORL     A,#040H
035A FF                MOV     R7,A
035B 900000      R     MOV     DPTR,#lindata+01H
035E EF                MOV     A,R7
035F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 919
0360 7B01              MOV     R3,#01H
0362 7A00        R     MOV     R2,#HIGH psData
0364 7900        R     MOV     R1,#LOW psData
0366 C003              PUSH    AR3
0368 C002              PUSH    AR2
036A C001              PUSH    AR1
036C 7B01              MOV     R3,#01H
036E 7A00        R     MOV     R2,#HIGH omuni
0370 7900        R     MOV     R1,#LOW omuni
0372 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+03H
0375 120000      E     LCALL   ?C?PSTXDATA
0378 7F00              MOV     R7,#00H
037A 7E00              MOV     R6,#00H
037C 7D80              MOV     R5,#080H
037E 7C3F              MOV     R4,#03FH
0380 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+06H
0383 120000      E     LCALL   ?C?LSTXDATA
0386 7F9A              MOV     R7,#09AH
0388 7E99              MOV     R6,#099H
038A 7D99              MOV     R5,#099H
038C 7C3E              MOV     R4,#03EH
038E 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+0AH
0391 120000      E     LCALL   ?C?LSTXDATA
0394 D001              POP     AR1
0396 D002              POP     AR2
0398 D003              POP     AR3
039A 120000      R     LCALL   _PS2OmuniControl
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 90  

                                           ; SOURCE LINE # 920
039D 807A              SJMP    ?C0173
039F         ?C0176:
                                           ; SOURCE LINE # 922
039F 900000      R     MOV     DPTR,#modeCount
03A2 E0                MOVX    A,@DPTR
03A3 FF                MOV     R7,A
03A4 EF                MOV     A,R7
03A5 6403              XRL     A,#03H
03A7 7069              JNZ     ?C0178
                                           ; SOURCE LINE # 923
                                           ; SOURCE LINE # 924
03A9 900000      R     MOV     DPTR,#lindata+01H
03AC E0                MOVX    A,@DPTR
03AD FF                MOV     R7,A
03AE EF                MOV     A,R7
03AF 4404              ORL     A,#04H
03B1 FF                MOV     R7,A
03B2 900000      R     MOV     DPTR,#lindata+01H
03B5 EF                MOV     A,R7
03B6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 925
03B7 900000      R     MOV     DPTR,#lindata+01H
03BA E0                MOVX    A,@DPTR
03BB FF                MOV     R7,A
03BC EF                MOV     A,R7
03BD 547F              ANL     A,#07FH
03BF FF                MOV     R7,A
03C0 900000      R     MOV     DPTR,#lindata+01H
03C3 EF                MOV     A,R7
03C4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 926
03C5 900000      R     MOV     DPTR,#lindata+01H
03C8 E0                MOVX    A,@DPTR
03C9 FF                MOV     R7,A
03CA EF                MOV     A,R7
03CB 54BF              ANL     A,#0BFH
03CD FF                MOV     R7,A
03CE 900000      R     MOV     DPTR,#lindata+01H
03D1 EF                MOV     A,R7
03D2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 928
03D3 7B01              MOV     R3,#01H
03D5 7A00        R     MOV     R2,#HIGH psData
03D7 7900        R     MOV     R1,#LOW psData
03D9 C003              PUSH    AR3
03DB C002              PUSH    AR2
03DD C001              PUSH    AR1
03DF 7B01              MOV     R3,#01H
03E1 7A00        R     MOV     R2,#HIGH omuni
03E3 7900        R     MOV     R1,#LOW omuni
03E5 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+03H
03E8 120000      E     LCALL   ?C?PSTXDATA
03EB 7F00              MOV     R7,#00H
03ED 7E00              MOV     R6,#00H
03EF 7D80              MOV     R5,#080H
03F1 7C3F              MOV     R4,#03FH
03F3 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+06H
03F6 120000      E     LCALL   ?C?LSTXDATA
03F9 7F9A              MOV     R7,#09AH
03FB 7E99              MOV     R6,#099H
03FD 7D99              MOV     R5,#099H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 91  

03FF 7C3E              MOV     R4,#03EH
0401 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+0AH
0404 120000      E     LCALL   ?C?LSTXDATA
0407 D001              POP     AR1
0409 D002              POP     AR2
040B D003              POP     AR3
040D 120000      R     LCALL   _PS2OmuniControl
                                           ; SOURCE LINE # 929
0410 8007              SJMP    ?C0173
0412         ?C0178:
                                           ; SOURCE LINE # 931
                                           ; SOURCE LINE # 932
0412 900000      R     MOV     DPTR,#modeSelect
0415 E4                CLR     A
0416 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 933
0417 8024              SJMP    ?C0160
                                           ; SOURCE LINE # 934
0419         ?C0173:
                                           ; SOURCE LINE # 935
0419 7B01              MOV     R3,#01H
041B 7A00        R     MOV     R2,#HIGH omuni
041D 7900        R     MOV     R1,#LOW omuni
041F C003              PUSH    AR3
0421 C002              PUSH    AR2
0423 C001              PUSH    AR1
0425 7B01              MOV     R3,#01H
0427 7A00        R     MOV     R2,#HIGH lindata
0429 7900        R     MOV     R1,#LOW lindata
042B 900000      R     MOV     DPTR,#?_LinSendData?BYTE+03H
042E 120000      E     LCALL   ?C?PSTXDATA
0431 D001              POP     AR1
0433 D002              POP     AR2
0435 D003              POP     AR3
0437 120000      R     LCALL   _LinSendData
                                           ; SOURCE LINE # 936
043A 020000      R     LJMP    ?C0161
                                           ; SOURCE LINE # 937
043D         ?C0160:
                                           ; SOURCE LINE # 939
043D 900000      R     MOV     DPTR,#modeSelect
0440 E0                MOVX    A,@DPTR
0441 FF                MOV     R7,A
0442 EF                MOV     A,R7
0443 6401              XRL     A,#01H
0445 6003              JZ      $ + 5H
0447 020000      R     LJMP    ?C0180
                                           ; SOURCE LINE # 940
                                           ; SOURCE LINE # 942
044A 900000      R     MOV     DPTR,#lindata+01H
044D E0                MOVX    A,@DPTR
044E FF                MOV     R7,A
044F EF                MOV     A,R7
0450 4404              ORL     A,#04H
0452 FF                MOV     R7,A
0453 900000      R     MOV     DPTR,#lindata+01H
0456 EF                MOV     A,R7
0457 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 943
0458 900000      R     MOV     DPTR,#lindata+01H
045B E0                MOVX    A,@DPTR
045C FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 92  

045D EF                MOV     A,R7
045E 547F              ANL     A,#07FH
0460 FF                MOV     R7,A
0461 900000      R     MOV     DPTR,#lindata+01H
0464 EF                MOV     A,R7
0465 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 944
0466 900000      R     MOV     DPTR,#lindata+01H
0469 E0                MOVX    A,@DPTR
046A FF                MOV     R7,A
046B EF                MOV     A,R7
046C 54BF              ANL     A,#0BFH
046E FF                MOV     R7,A
046F 900000      R     MOV     DPTR,#lindata+01H
0472 EF                MOV     A,R7
0473 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 945
0474 900000      R     MOV     DPTR,#lindata+01H
0477 E0                MOVX    A,@DPTR
0478 FF                MOV     R7,A
0479 EF                MOV     A,R7
047A 54DF              ANL     A,#0DFH
047C FF                MOV     R7,A
047D 900000      R     MOV     DPTR,#lindata+01H
0480 EF                MOV     A,R7
0481 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 946
0482 900000      R     MOV     DPTR,#lindata+01H
0485 E0                MOVX    A,@DPTR
0486 FF                MOV     R7,A
0487 EF                MOV     A,R7
0488 54EF              ANL     A,#0EFH
048A FF                MOV     R7,A
048B 900000      R     MOV     DPTR,#lindata+01H
048E EF                MOV     A,R7
048F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 947
0490 900000      R     MOV     DPTR,#lindata+02H
0493 E0                MOVX    A,@DPTR
0494 FF                MOV     R7,A
0495 EF                MOV     A,R7
0496 54BF              ANL     A,#0BFH
0498 FF                MOV     R7,A
0499 900000      R     MOV     DPTR,#lindata+02H
049C EF                MOV     A,R7
049D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 948
049E 900000      R     MOV     DPTR,#lindata+02H
04A1 E0                MOVX    A,@DPTR
04A2 FF                MOV     R7,A
04A3 EF                MOV     A,R7
04A4 547F              ANL     A,#07FH
04A6 FF                MOV     R7,A
04A7 900000      R     MOV     DPTR,#lindata+02H
04AA EF                MOV     A,R7
04AB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 950
04AC 7B01              MOV     R3,#01H
04AE 7A00        R     MOV     R2,#HIGH omuni
04B0 7900        R     MOV     R1,#LOW omuni
04B2 C003              PUSH    AR3
04B4 C002              PUSH    AR2
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 93  

04B6 C001              PUSH    AR1
04B8 7B01              MOV     R3,#01H
04BA 7A00        R     MOV     R2,#HIGH lindata
04BC 7900        R     MOV     R1,#LOW lindata
04BE 900000      R     MOV     DPTR,#?_LinSendData?BYTE+03H
04C1 120000      E     LCALL   ?C?PSTXDATA
04C4 D001              POP     AR1
04C6 D002              POP     AR2
04C8 D003              POP     AR3
04CA 120000      R     LCALL   _LinSendData
                                           ; SOURCE LINE # 951
04CD 900000      R     MOV     DPTR,#modeCount
04D0 E4                CLR     A
04D1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 952
04D2 900000      R     MOV     DPTR,#circle_flag
04D5 E4                CLR     A
04D6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 953
04D7 900000      R     MOV     DPTR,#cross_flag
04DA E4                CLR     A
04DB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 954
04DC 7B01              MOV     R3,#01H
04DE 7A00        R     MOV     R2,#HIGH omuni
04E0 7900        R     MOV     R1,#LOW omuni
04E2 C003              PUSH    AR3
04E4 C002              PUSH    AR2
04E6 C001              PUSH    AR1
04E8 7B01              MOV     R3,#01H
04EA 7A00        R     MOV     R2,#HIGH lindata
04EC 7900        R     MOV     R1,#LOW lindata
04EE 900000      R     MOV     DPTR,#?_LinSendData?BYTE+03H
04F1 120000      E     LCALL   ?C?PSTXDATA
04F4 D001              POP     AR1
04F6 D002              POP     AR2
04F8 D003              POP     AR3
04FA 120000      R     LCALL   _LinSendData
04FD         ?C0181:
                                           ; SOURCE LINE # 960
                                           ; SOURCE LINE # 961
                                           ; SOURCE LINE # 962
04FD 120000      E     LCALL   PS2_Controller_get
0500 C003              PUSH    AR3
0502 C002              PUSH    AR2
0504 C001              PUSH    AR1
0506 7B01              MOV     R3,#01H
0508 7A00        R     MOV     R2,#HIGH psData
050A 7900        R     MOV     R1,#LOW psData
050C A801              MOV     R0,AR1
050E AC02              MOV     R4,AR2
0510 AD03              MOV     R5,AR3
0512 D001              POP     AR1
0514 D002              POP     AR2
0516 D003              POP     AR3
0518 7E00              MOV     R6,#00H
051A 7F06              MOV     R7,#06H
051C 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 964
051F 7B01              MOV     R3,#01H
0521 7A00        R     MOV     R2,#HIGH omuni
0523 7900        R     MOV     R1,#LOW omuni
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 94  

0525 C003              PUSH    AR3
0527 C002              PUSH    AR2
0529 C001              PUSH    AR1
052B 7B01              MOV     R3,#01H
052D 7A00        R     MOV     R2,#HIGH lindata
052F 7900        R     MOV     R1,#LOW lindata
0531 900000      R     MOV     DPTR,#?_PS2ControlMachine?BYTE+03H
0534 120000      E     LCALL   ?C?PSTXDATA
0537 D001              POP     AR1
0539 D002              POP     AR2
053B D003              POP     AR3
053D 120000      R     LCALL   _PS2ControlMachine
                                           ; SOURCE LINE # 966
0540 900000      R     MOV     DPTR,#psData+01H
0543 E0                MOVX    A,@DPTR
0544 FF                MOV     R7,A
0545 EF                MOV     A,R7
0546 30E520            JNB     ACC.5,?C0183
                                           ; SOURCE LINE # 967
                                           ; SOURCE LINE # 968
0549 900000      R     MOV     DPTR,#circle_flag
054C E0                MOVX    A,@DPTR
054D FF                MOV     R7,A
054E EF                MOV     A,R7
054F 601E              JZ      ?C0186
                                           ; SOURCE LINE # 969
                                           ; SOURCE LINE # 970
0551 900000      R     MOV     DPTR,#modeCount
0554 E0                MOVX    A,@DPTR
0555 FF                MOV     R7,A
0556 EF                MOV     A,R7
0557 C3                CLR     C
0558 940A              SUBB    A,#0AH
055A 5006              JNC     ?C0185
                                           ; SOURCE LINE # 971
055C 900000      R     MOV     DPTR,#modeCount
055F E0                MOVX    A,@DPTR
0560 04                INC     A
0561 F0                MOVX    @DPTR,A
0562         ?C0185:
                                           ; SOURCE LINE # 972
0562 900000      R     MOV     DPTR,#circle_flag
0565 E4                CLR     A
0566 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 973
                                           ; SOURCE LINE # 974
0567 8006              SJMP    ?C0186
0569         ?C0183:
                                           ; SOURCE LINE # 976
                                           ; SOURCE LINE # 977
0569 900000      R     MOV     DPTR,#circle_flag
056C 7401              MOV     A,#01H
056E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 978
056F         ?C0186:
                                           ; SOURCE LINE # 980
056F 900000      R     MOV     DPTR,#psData+01H
0572 E0                MOVX    A,@DPTR
0573 FF                MOV     R7,A
0574 EF                MOV     A,R7
0575 30E620            JNB     ACC.6,?C0187
                                           ; SOURCE LINE # 981
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 95  

                                           ; SOURCE LINE # 982
0578 900000      R     MOV     DPTR,#cross_flag
057B E0                MOVX    A,@DPTR
057C FF                MOV     R7,A
057D EF                MOV     A,R7
057E 601E              JZ      ?C0190
                                           ; SOURCE LINE # 983
                                           ; SOURCE LINE # 984
0580 900000      R     MOV     DPTR,#modeCount
0583 E0                MOVX    A,@DPTR
0584 FF                MOV     R7,A
0585 EF                MOV     A,R7
0586 D3                SETB    C
0587 9400              SUBB    A,#00H
0589 4006              JC      ?C0189
                                           ; SOURCE LINE # 985
058B 900000      R     MOV     DPTR,#modeCount
058E E0                MOVX    A,@DPTR
058F 14                DEC     A
0590 F0                MOVX    @DPTR,A
0591         ?C0189:
                                           ; SOURCE LINE # 986
0591 900000      R     MOV     DPTR,#cross_flag
0594 E4                CLR     A
0595 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 987
                                           ; SOURCE LINE # 988
0596 8006              SJMP    ?C0190
0598         ?C0187:
                                           ; SOURCE LINE # 990
                                           ; SOURCE LINE # 991
0598 900000      R     MOV     DPTR,#cross_flag
059B 7401              MOV     A,#01H
059D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 992
059E         ?C0190:
                                           ; SOURCE LINE # 994
059E 900000      R     MOV     DPTR,#psData
05A1 E0                MOVX    A,@DPTR
05A2 FF                MOV     R7,A
05A3 EF                MOV     A,R7
05A4 30E308            JNB     ACC.3,?C0191
                                           ; SOURCE LINE # 995
                                           ; SOURCE LINE # 996
05A7 900000      R     MOV     DPTR,#modeSelect
05AA E4                CLR     A
05AB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 997
05AC 020000      R     LJMP    ?C0180
                                           ; SOURCE LINE # 998
05AF         ?C0191:
                                           ; SOURCE LINE # 1000
05AF 900000      R     MOV     DPTR,#modeCount
05B2 E0                MOVX    A,@DPTR
05B3 FF                MOV     R7,A
05B4 EF                MOV     A,R7
05B5 7040              JNZ     ?C0192
                                           ; SOURCE LINE # 1001
                                           ; SOURCE LINE # 1002
05B7 7B01              MOV     R3,#01H
05B9 7A00        R     MOV     R2,#HIGH psData
05BB 7900        R     MOV     R1,#LOW psData
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 96  

05BD C003              PUSH    AR3
05BF C002              PUSH    AR2
05C1 C001              PUSH    AR1
05C3 7B01              MOV     R3,#01H
05C5 7A00        R     MOV     R2,#HIGH omuni
05C7 7900        R     MOV     R1,#LOW omuni
05C9 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+03H
05CC 120000      E     LCALL   ?C?PSTXDATA
05CF 7F00              MOV     R7,#00H
05D1 7E00              MOV     R6,#00H
05D3 7D80              MOV     R5,#080H
05D5 7C3F              MOV     R4,#03FH
05D7 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+06H
05DA 120000      E     LCALL   ?C?LSTXDATA
05DD 7F9A              MOV     R7,#09AH
05DF 7E99              MOV     R6,#099H
05E1 7D99              MOV     R5,#099H
05E3 7C3E              MOV     R4,#03EH
05E5 900000      R     MOV     DPTR,#?_PS2OmuniControl?BYTE+0AH
05E8 120000      E     LCALL   ?C?LSTXDATA
05EB D001              POP     AR1
05ED D002              POP     AR2
05EF D003              POP     AR3
05F1 120000      R     LCALL   _PS2OmuniControl
                                           ; SOURCE LINE # 1003
05F4 020000      R     LJMP    ?C0193
05F7         ?C0192:
                                           ; SOURCE LINE # 1006
05F7 900000      R     MOV     DPTR,#modeCount
05FA E0                MOVX    A,@DPTR
05FB FF                MOV     R7,A
05FC EF                MOV     A,R7
05FD 6401              XRL     A,#01H
05FF 706A              JNZ     ?C0194
                                           ; SOURCE LINE # 1007
                                           ; SOURCE LINE # 1008
0601 900000      R     MOV     DPTR,#lindata+01H
0604 E0                MOVX    A,@DPTR
0605 FF                MOV     R7,A
0606 EF                MOV     A,R7
0607 4404              ORL     A,#04H
0609 FF                MOV     R7,A
060A 900000      R     MOV     DPTR,#lindata+01H
060D EF                MOV     A,R7
060E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1009
060F 900000      R     MOV     DPTR,#lindata+01H
0612 E0                MOVX    A,@DPTR
0613 FF                MOV     R7,A
0614 EF                MOV     A,R7
0615 547F              ANL     A,#07FH
0617 FF                MOV     R7,A
0618 900000      R     MOV     DPTR,#lindata+01H
061B EF                MOV     A,R7
061C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1010
061D 900000      R     MOV     DPTR,#lindata+01H
0620 E0                MOVX    A,@DPTR
0621 FF                MOV     R7,A
0622 EF                MOV     A,R7
0623 54BF              ANL     A,#0BFH
0625 FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 97  

0626 900000      R     MOV     DPTR,#lindata+01H
0629 EF                MOV     A,R7
062A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1011
062B 900000      R     MOV     DPTR,#lindata+02H
062E E0                MOVX    A,@DPTR
062F FF                MOV     R7,A
0630 EF                MOV     A,R7
0631 54BF              ANL     A,#0BFH
0633 FF                MOV     R7,A
0634 900000      R     MOV     DPTR,#lindata+02H
0637 EF                MOV     A,R7
0638 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1012
0639 900000      R     MOV     DPTR,#lindata+02H
063C E0                MOVX    A,@DPTR
063D FF                MOV     R7,A
063E EF                MOV     A,R7
063F 547F              ANL     A,#07FH
0641 FF                MOV     R7,A
0642 900000      R     MOV     DPTR,#lindata+02H
0645 EF                MOV     A,R7
0646 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1013
0647 7B01              MOV     R3,#01H
0649 7A00        R     MOV     R2,#HIGH omuni
064B 7900        R     MOV     R1,#LOW omuni
064D C003              PUSH    AR3
064F C002              PUSH    AR2
0651 C001              PUSH    AR1
0653 7B01              MOV     R3,#01H
0655 7A00        R     MOV     R2,#HIGH lindata
0657 7900        R     MOV     R1,#LOW lindata
0659 900000      R     MOV     DPTR,#?_PS2AutoMachine?BYTE+03H
065C 120000      E     LCALL   ?C?PSTXDATA
065F D001              POP     AR1
0661 D002              POP     AR2
0663 D003              POP     AR3
0665 120000      R     LCALL   _PS2AutoMachine
                                           ; SOURCE LINE # 1014
0668 020000      R     LJMP    ?C0193
066B         ?C0194:
                                           ; SOURCE LINE # 1016
066B 900000      R     MOV     DPTR,#modeCount
066E E0                MOVX    A,@DPTR
066F FF                MOV     R7,A
0670 EF                MOV     A,R7
0671 B40211            CJNE    A,#02H,?C0196
                                           ; SOURCE LINE # 1017
0674 900000      R     MOV     DPTR,#lindata+02H
0677 E0                MOVX    A,@DPTR
0678 FF                MOV     R7,A
0679 EF                MOV     A,R7
067A 4480              ORL     A,#080H
067C FF                MOV     R7,A
067D 900000      R     MOV     DPTR,#lindata+02H
0680 EF                MOV     A,R7
0681 F0                MOVX    @DPTR,A
0682 020000      R     LJMP    ?C0193
0685         ?C0196:
                                           ; SOURCE LINE # 1019
0685 900000      R     MOV     DPTR,#modeCount
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 98  

0688 E0                MOVX    A,@DPTR
0689 FF                MOV     R7,A
068A EF                MOV     A,R7
068B B40311            CJNE    A,#03H,?C0198
                                           ; SOURCE LINE # 1020
068E 900000      R     MOV     DPTR,#lindata+02H
0691 E0                MOVX    A,@DPTR
0692 FF                MOV     R7,A
0693 EF                MOV     A,R7
0694 547F              ANL     A,#07FH
0696 FF                MOV     R7,A
0697 900000      R     MOV     DPTR,#lindata+02H
069A EF                MOV     A,R7
069B F0                MOVX    @DPTR,A
069C 020000      R     LJMP    ?C0193
069F         ?C0198:
                                           ; SOURCE LINE # 1022
069F 900000      R     MOV     DPTR,#modeCount
06A2 E0                MOVX    A,@DPTR
06A3 FF                MOV     R7,A
06A4 EF                MOV     A,R7
06A5 B40411            CJNE    A,#04H,?C0200
                                           ; SOURCE LINE # 1023
06A8 900000      R     MOV     DPTR,#lindata+02H
06AB E0                MOVX    A,@DPTR
06AC FF                MOV     R7,A
06AD EF                MOV     A,R7
06AE 4480              ORL     A,#080H
06B0 FF                MOV     R7,A
06B1 900000      R     MOV     DPTR,#lindata+02H
06B4 EF                MOV     A,R7
06B5 F0                MOVX    @DPTR,A
06B6 020000      R     LJMP    ?C0193
06B9         ?C0200:
                                           ; SOURCE LINE # 1025
06B9 900000      R     MOV     DPTR,#modeCount
06BC E0                MOVX    A,@DPTR
06BD FF                MOV     R7,A
06BE EF                MOV     A,R7
06BF B40511            CJNE    A,#05H,?C0202
                                           ; SOURCE LINE # 1026
06C2 900000      R     MOV     DPTR,#lindata+02H
06C5 E0                MOVX    A,@DPTR
06C6 FF                MOV     R7,A
06C7 EF                MOV     A,R7
06C8 547F              ANL     A,#07FH
06CA FF                MOV     R7,A
06CB 900000      R     MOV     DPTR,#lindata+02H
06CE EF                MOV     A,R7
06CF F0                MOVX    @DPTR,A
06D0 020000      R     LJMP    ?C0193
06D3         ?C0202:
                                           ; SOURCE LINE # 1028
06D3 900000      R     MOV     DPTR,#modeCount
06D6 E0                MOVX    A,@DPTR
06D7 FF                MOV     R7,A
06D8 EF                MOV     A,R7
06D9 B40611            CJNE    A,#06H,?C0204
                                           ; SOURCE LINE # 1029
06DC 900000      R     MOV     DPTR,#lindata+02H
06DF E0                MOVX    A,@DPTR
06E0 FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 99  

06E1 EF                MOV     A,R7
06E2 4480              ORL     A,#080H
06E4 FF                MOV     R7,A
06E5 900000      R     MOV     DPTR,#lindata+02H
06E8 EF                MOV     A,R7
06E9 F0                MOVX    @DPTR,A
06EA 020000      R     LJMP    ?C0193
06ED         ?C0204:
                                           ; SOURCE LINE # 1031
06ED 900000      R     MOV     DPTR,#modeCount
06F0 E0                MOVX    A,@DPTR
06F1 FF                MOV     R7,A
06F2 EF                MOV     A,R7
06F3 B40710            CJNE    A,#07H,?C0206
                                           ; SOURCE LINE # 1032
06F6 900000      R     MOV     DPTR,#lindata+02H
06F9 E0                MOVX    A,@DPTR
06FA FF                MOV     R7,A
06FB EF                MOV     A,R7
06FC 547F              ANL     A,#07FH
06FE FF                MOV     R7,A
06FF 900000      R     MOV     DPTR,#lindata+02H
0702 EF                MOV     A,R7
0703 F0                MOVX    @DPTR,A
0704 807A              SJMP    ?C0193
0706         ?C0206:
                                           ; SOURCE LINE # 1034
0706 900000      R     MOV     DPTR,#modeCount
0709 E0                MOVX    A,@DPTR
070A FF                MOV     R7,A
070B EF                MOV     A,R7
070C 6408              XRL     A,#08H
070E 7069              JNZ     ?C0208
                                           ; SOURCE LINE # 1035
                                           ; SOURCE LINE # 1036
0710 900000      R     MOV     DPTR,#lindata+01H
0713 E0                MOVX    A,@DPTR
0714 FF                MOV     R7,A
0715 EF                MOV     A,R7
0716 4404              ORL     A,#04H
0718 FF                MOV     R7,A
0719 900000      R     MOV     DPTR,#lindata+01H
071C EF                MOV     A,R7
071D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1037
071E 900000      R     MOV     DPTR,#lindata+01H
0721 E0                MOVX    A,@DPTR
0722 FF                MOV     R7,A
0723 EF                MOV     A,R7
0724 547F              ANL     A,#07FH
0726 FF                MOV     R7,A
0727 900000      R     MOV     DPTR,#lindata+01H
072A EF                MOV     A,R7
072B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1038
072C 900000      R     MOV     DPTR,#lindata+01H
072F E0                MOVX    A,@DPTR
0730 FF                MOV     R7,A
0731 EF                MOV     A,R7
0732 54BF              ANL     A,#0BFH
0734 FF                MOV     R7,A
0735 900000      R     MOV     DPTR,#lindata+01H
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 100 

0738 EF                MOV     A,R7
0739 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1039
073A 900000      R     MOV     DPTR,#lindata+02H
073D E0                MOVX    A,@DPTR
073E FF                MOV     R7,A
073F EF                MOV     A,R7
0740 54BF              ANL     A,#0BFH
0742 FF                MOV     R7,A
0743 900000      R     MOV     DPTR,#lindata+02H
0746 EF                MOV     A,R7
0747 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1040
0748 900000      R     MOV     DPTR,#lindata+02H
074B E0                MOVX    A,@DPTR
074C FF                MOV     R7,A
074D EF                MOV     A,R7
074E 547F              ANL     A,#07FH
0750 FF                MOV     R7,A
0751 900000      R     MOV     DPTR,#lindata+02H
0754 EF                MOV     A,R7
0755 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1041
0756 7B01              MOV     R3,#01H
0758 7A00        R     MOV     R2,#HIGH omuni
075A 7900        R     MOV     R1,#LOW omuni
075C C003              PUSH    AR3
075E C002              PUSH    AR2
0760 C001              PUSH    AR1
0762 7B01              MOV     R3,#01H
0764 7A00        R     MOV     R2,#HIGH lindata
0766 7900        R     MOV     R1,#LOW lindata
0768 900000      R     MOV     DPTR,#?_PS2AutoMachine?BYTE+03H
076B 120000      E     LCALL   ?C?PSTXDATA
076E D001              POP     AR1
0770 D002              POP     AR2
0772 D003              POP     AR3
0774 120000      R     LCALL   _PS2AutoMachine
                                           ; SOURCE LINE # 1042
0777 8007              SJMP    ?C0193
0779         ?C0208:
                                           ; SOURCE LINE # 1046
                                           ; SOURCE LINE # 1047
0779 900000      R     MOV     DPTR,#modeSelect
077C E4                CLR     A
077D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1048
077E 8024              SJMP    ?C0180
                                           ; SOURCE LINE # 1049
0780         ?C0193:
                                           ; SOURCE LINE # 1050
0780 7B01              MOV     R3,#01H
0782 7A00        R     MOV     R2,#HIGH omuni
0784 7900        R     MOV     R1,#LOW omuni
0786 C003              PUSH    AR3
0788 C002              PUSH    AR2
078A C001              PUSH    AR1
078C 7B01              MOV     R3,#01H
078E 7A00        R     MOV     R2,#HIGH lindata
0790 7900        R     MOV     R1,#LOW lindata
0792 900000      R     MOV     DPTR,#?_LinSendData?BYTE+03H
0795 120000      E     LCALL   ?C?PSTXDATA
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 101 

0798 D001              POP     AR1
079A D002              POP     AR2
079C D003              POP     AR3
079E 120000      R     LCALL   _LinSendData
                                           ; SOURCE LINE # 1051
07A1 020000      R     LJMP    ?C0181
                                           ; SOURCE LINE # 1052
07A4         ?C0180:
                                           ; SOURCE LINE # 1059
07A4 120000      E     LCALL   UART_2_ReadTxStatus
07A7 EF                MOV     A,R7
07A8 20E103            JB      ACC.1,$ + 6H
07AB 020000      R     LJMP    ?C0154
                                           ; SOURCE LINE # 1060
                                           ; SOURCE LINE # 1063
07AE 7B01              MOV     R3,#01H
07B0 7A00        R     MOV     R2,#HIGH str
07B2 7900        R     MOV     R1,#LOW str
07B4 C003              PUSH    AR3
07B6 C002              PUSH    AR2
07B8 C001              PUSH    AR1
07BA 7BFF              MOV     R3,#0FFH
07BC 7A00        R     MOV     R2,#HIGH ?SC_0
07BE 7900        R     MOV     R1,#LOW ?SC_0
07C0 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
07C3 120000      E     LCALL   ?C?PSTXDATA
07C6 900000      R     MOV     DPTR,#lindata+01H
07C9 E0                MOVX    A,@DPTR
07CA FF                MOV     R7,A
07CB 7E00              MOV     R6,#00H
07CD 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
07D0 EE                MOV     A,R6
07D1 F0                MOVX    @DPTR,A
07D2 A3                INC     DPTR
07D3 EF                MOV     A,R7
07D4 F0                MOVX    @DPTR,A
07D5 D001              POP     AR1
07D7 D002              POP     AR2
07D9 D003              POP     AR3
07DB 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 1067
07DE 7B01              MOV     R3,#01H
07E0 7A00        R     MOV     R2,#HIGH str
07E2 7900        R     MOV     R1,#LOW str
07E4 120000      E     LCALL   _UART_2_PutString
                                           ; SOURCE LINE # 1068
                                           ; SOURCE LINE # 1069
07E7 020000      R     LJMP    ?C0154
07EA 22                RET     
             ; FUNCTION main (END)

             ; FUNCTION _LIN_Master_id_send (BEGIN)
                                           ; SOURCE LINE # 1072
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1073
                                           ; SOURCE LINE # 1074
0005 900000      R     MOV     DPTR,#p0
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1075
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 102 

000A 900000      R     MOV     DPTR,#p1
000D E4                CLR     A
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1077
000F 900000      R     MOV     DPTR,#lin_id_flag
0012 E0                MOVX    A,@DPTR
0013 FF                MOV     R7,A
0014 EF                MOV     A,R7
0015 6003              JZ      $ + 5H
0017 020000      R     LJMP    ?C0212
                                           ; SOURCE LINE # 1078
                                           ; SOURCE LINE # 1079
001A 900000      R     MOV     DPTR,#id
001D E0                MOVX    A,@DPTR
001E FF                MOV     R7,A
001F EF                MOV     A,R7
0020 C3                CLR     C
0021 13                RRC     A
0022 FF                MOV     R7,A
0023 EF                MOV     A,R7
0024 5401              ANL     A,#01H
0026 FF                MOV     R7,A
0027 900000      R     MOV     DPTR,#id
002A E0                MOVX    A,@DPTR
002B FE                MOV     R6,A
002C EE                MOV     A,R6
002D 5401              ANL     A,#01H
002F FE                MOV     R6,A
0030 EE                MOV     A,R6
0031 6F                XRL     A,R7
0032 FF                MOV     R7,A
0033 900000      R     MOV     DPTR,#id
0036 E0                MOVX    A,@DPTR
0037 FE                MOV     R6,A
0038 EE                MOV     A,R6
0039 13                RRC     A
003A 13                RRC     A
003B 543F              ANL     A,#03FH
003D FE                MOV     R6,A
003E EE                MOV     A,R6
003F 5401              ANL     A,#01H
0041 FE                MOV     R6,A
0042 EF                MOV     A,R7
0043 6E                XRL     A,R6
0044 FF                MOV     R7,A
0045 900000      R     MOV     DPTR,#id
0048 E0                MOVX    A,@DPTR
0049 FE                MOV     R6,A
004A EE                MOV     A,R6
004B C4                SWAP    A
004C 540F              ANL     A,#0FH
004E FE                MOV     R6,A
004F EE                MOV     A,R6
0050 5401              ANL     A,#01H
0052 FE                MOV     R6,A
0053 EF                MOV     A,R7
0054 6E                XRL     A,R6
0055 FF                MOV     R7,A
0056 900000      R     MOV     DPTR,#p0
0059 EF                MOV     A,R7
005A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1080
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 103 

005B 900000      R     MOV     DPTR,#id
005E E0                MOVX    A,@DPTR
005F FF                MOV     R7,A
0060 EF                MOV     A,R7
0061 13                RRC     A
0062 13                RRC     A
0063 13                RRC     A
0064 541F              ANL     A,#01FH
0066 FF                MOV     R7,A
0067 EF                MOV     A,R7
0068 5401              ANL     A,#01H
006A FF                MOV     R7,A
006B 900000      R     MOV     DPTR,#id
006E E0                MOVX    A,@DPTR
006F FE                MOV     R6,A
0070 EE                MOV     A,R6
0071 C3                CLR     C
0072 13                RRC     A
0073 FE                MOV     R6,A
0074 EE                MOV     A,R6
0075 5401              ANL     A,#01H
0077 FE                MOV     R6,A
0078 EE                MOV     A,R6
0079 6F                XRL     A,R7
007A FF                MOV     R7,A
007B 900000      R     MOV     DPTR,#id
007E E0                MOVX    A,@DPTR
007F FE                MOV     R6,A
0080 EE                MOV     A,R6
0081 C4                SWAP    A
0082 540F              ANL     A,#0FH
0084 FE                MOV     R6,A
0085 EE                MOV     A,R6
0086 5401              ANL     A,#01H
0088 FE                MOV     R6,A
0089 EF                MOV     A,R7
008A 6E                XRL     A,R6
008B FF                MOV     R7,A
008C 900000      R     MOV     DPTR,#id
008F E0                MOVX    A,@DPTR
0090 FE                MOV     R6,A
0091 EE                MOV     A,R6
0092 C4                SWAP    A
0093 13                RRC     A
0094 5407              ANL     A,#07H
0096 FE                MOV     R6,A
0097 EE                MOV     A,R6
0098 5401              ANL     A,#01H
009A FE                MOV     R6,A
009B EF                MOV     A,R7
009C 6E                XRL     A,R6
009D FF                MOV     R7,A
009E EF                MOV     A,R7
009F F4                CPL     A
00A0 FF                MOV     R7,A
00A1 900000      R     MOV     DPTR,#p1
00A4 EF                MOV     A,R7
00A5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1081
00A6 900000      R     MOV     DPTR,#p0
00A9 E0                MOVX    A,@DPTR
00AA FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 104 

00AB EF                MOV     A,R7
00AC C4                SWAP    A
00AD 33                RLC     A
00AE 33                RLC     A
00AF 54C0              ANL     A,#0C0H
00B1 FF                MOV     R7,A
00B2 EF                MOV     A,R7
00B3 5440              ANL     A,#040H
00B5 FF                MOV     R7,A
00B6 900000      R     MOV     DPTR,#id
00B9 E0                MOVX    A,@DPTR
00BA FE                MOV     R6,A
00BB EE                MOV     A,R6
00BC 543F              ANL     A,#03FH
00BE FE                MOV     R6,A
00BF EE                MOV     A,R6
00C0 4F                ORL     A,R7
00C1 FF                MOV     R7,A
00C2 900000      R     MOV     DPTR,#p1
00C5 E0                MOVX    A,@DPTR
00C6 FE                MOV     R6,A
00C7 EE                MOV     A,R6
00C8 C4                SWAP    A
00C9 33                RLC     A
00CA 33                RLC     A
00CB 33                RLC     A
00CC 5480              ANL     A,#080H
00CE FE                MOV     R6,A
00CF EE                MOV     A,R6
00D0 5480              ANL     A,#080H
00D2 FE                MOV     R6,A
00D3 EF                MOV     A,R7
00D4 4E                ORL     A,R6
00D5 FF                MOV     R7,A
00D6 900000      R     MOV     DPTR,#get_id
00D9 EF                MOV     A,R7
00DA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1082
00DB 7F03              MOV     R7,#03H
00DD 120000      E     LCALL   _LIN_SendBreak
                                           ; SOURCE LINE # 1083
00E0 7F64              MOV     R7,#064H
00E2 7E00              MOV     R6,#00H
00E4 120000      E     LCALL   _CyDelayUs
                                           ; SOURCE LINE # 1084
00E7 120000      E     LCALL   LIN_ClearTxBuffer
                                           ; SOURCE LINE # 1085
00EA 120000      E     LCALL   LIN_ClearRxBuffer
                                           ; SOURCE LINE # 1086
00ED 7F55              MOV     R7,#055H
00EF 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 1087
00F2 900000      R     MOV     DPTR,#get_id
00F5 E0                MOVX    A,@DPTR
00F6 FF                MOV     R7,A
00F7 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 1088
00FA 900000      R     MOV     DPTR,#lin_id_flag
00FD 7401              MOV     A,#01H
00FF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1089
0100 900000      R     MOV     DPTR,#get_id
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 105 

0103 E0                MOVX    A,@DPTR
0104 FF                MOV     R7,A
0105 EF                MOV     A,R7
0106 54FF              ANL     A,#0FFH
0108 FF                MOV     R7,A
0109 7E00              MOV     R6,#00H
010B 22                RET     
                                           ; SOURCE LINE # 1090
010C         ?C0212:
                                           ; SOURCE LINE # 1092
                                           ; SOURCE LINE # 1093
010C 7E01              MOV     R6,#01H
010E 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 1094
                                           ; SOURCE LINE # 1095
0110         ?C0213:
0110 22                RET     
             ; FUNCTION _LIN_Master_id_send (END)

             ; FUNCTION _LIN_Master_GetArray (BEGIN)
                                           ; SOURCE LINE # 1097
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#length
0008 ED                MOV     A,R5
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#buffer
000D 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 1098
                                           ; SOURCE LINE # 1099
0010 900000      R     MOV     DPTR,#lin_rx_flag
0013 E0                MOVX    A,@DPTR
0014 FF                MOV     R7,A
0015 EF                MOV     A,R7
0016 5401              ANL     A,#01H
0018 FF                MOV     R7,A
0019 900000      R     MOV     DPTR,#lin_tx_flag
001C E0                MOVX    A,@DPTR
001D FE                MOV     R6,A
001E EE                MOV     A,R6
001F 7004              JNZ     ?C0216
0021 7E01              MOV     R6,#01H
0023 8002              SJMP    ?C0217
0025         ?C0216:
0025 7E00              MOV     R6,#00H
0027         ?C0217:
0027 EE                MOV     A,R6
0028 5F                ANL     A,R7
0029 FF                MOV     R7,A
002A EF                MOV     A,R7
002B 7003              JNZ     $ + 5H
002D 020000      R     LJMP    ?C0215
                                           ; SOURCE LINE # 1100
                                           ; SOURCE LINE # 1101
0030 900000      R     MOV     DPTR,#id
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 120000      R     LCALL   _LIN_Master_id_send
0038 900000      R     MOV     DPTR,#rx_sum
003B EE                MOV     A,R6
003C F0                MOVX    @DPTR,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 106 

003D A3                INC     DPTR
003E EF                MOV     A,R7
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1102
0040 900000      R     MOV     DPTR,#rx_sum
0043 E0                MOVX    A,@DPTR
0044 FE                MOV     R6,A
0045 A3                INC     DPTR
0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 EF                MOV     A,R7
0049 B40026            CJNE    A,#00H,?C0218
004C EE                MOV     A,R6
004D B40122            CJNE    A,#01H,?C0218
                                           ; SOURCE LINE # 1103
                                           ; SOURCE LINE # 1104
0050 900000      R     MOV     DPTR,#lin_rx_flag
0053 E0                MOVX    A,@DPTR
0054 FF                MOV     R7,A
0055 EF                MOV     A,R7
0056 4401              ORL     A,#01H
0058 FF                MOV     R7,A
0059 900000      R     MOV     DPTR,#lin_rx_flag
005C EF                MOV     A,R7
005D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1105
005E 900000      R     MOV     DPTR,#lin_rx_flag
0061 E0                MOVX    A,@DPTR
0062 FF                MOV     R7,A
0063 EF                MOV     A,R7
0064 54FB              ANL     A,#0FBH
0066 FF                MOV     R7,A
0067 900000      R     MOV     DPTR,#lin_rx_flag
006A EF                MOV     A,R7
006B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1106
006C 120000      E     LCALL   LIN_Timer_Stop
                                           ; SOURCE LINE # 1107
006F 7F01              MOV     R7,#01H
0071 22                RET     
                                           ; SOURCE LINE # 1108
0072         ?C0218:
                                           ; SOURCE LINE # 1109
0072 120000      E     LCALL   LIN_ClearRxBuffer
                                           ; SOURCE LINE # 1110
0075 900000      R     MOV     DPTR,#length
0078 E0                MOVX    A,@DPTR
0079 FF                MOV     R7,A
007A 900000      R     MOV     DPTR,#rx_length
007D EF                MOV     A,R7
007E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1111
007F 900000      R     MOV     DPTR,#buffer
0082 120000      E     LCALL   ?C?PLDXDATA
0085 900000      R     MOV     DPTR,#rx_buffer
0088 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 1112
008B 900000      R     MOV     DPTR,#rx_i
008E E4                CLR     A
008F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1113
0090 900000      R     MOV     DPTR,#lin_rx_sync_flag
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 107 

0093 E4                CLR     A
0094 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1114
0095 900000      R     MOV     DPTR,#lin_rx_flag
0098 E0                MOVX    A,@DPTR
0099 FF                MOV     R7,A
009A EF                MOV     A,R7
009B 54FE              ANL     A,#0FEH
009D FF                MOV     R7,A
009E 900000      R     MOV     DPTR,#lin_rx_flag
00A1 EF                MOV     A,R7
00A2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1115
00A3 900000      R     MOV     DPTR,#lin_rx_flag
00A6 E0                MOVX    A,@DPTR
00A7 FF                MOV     R7,A
00A8 EF                MOV     A,R7
00A9 54FD              ANL     A,#0FDH
00AB FF                MOV     R7,A
00AC 900000      R     MOV     DPTR,#lin_rx_flag
00AF EF                MOV     A,R7
00B0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1116
00B1 900000      R     MOV     DPTR,#lin_rx_flag
00B4 E0                MOVX    A,@DPTR
00B5 FF                MOV     R7,A
00B6 EF                MOV     A,R7
00B7 4404              ORL     A,#04H
00B9 FF                MOV     R7,A
00BA 900000      R     MOV     DPTR,#lin_rx_flag
00BD EF                MOV     A,R7
00BE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1117
00BF 7FFF              MOV     R7,#0FFH
00C1 120000      E     LCALL   _LIN_Timer_WriteCounter
                                           ; SOURCE LINE # 1118
00C4 120000      E     LCALL   LIN_Timer_Start
                                           ; SOURCE LINE # 1120
00C7 8003              SJMP    ?C0220
00C9         ?C0215:
                                           ; SOURCE LINE # 1122
                                           ; SOURCE LINE # 1123
00C9 7F01              MOV     R7,#01H
00CB 22                RET     
                                           ; SOURCE LINE # 1124
00CC         ?C0220:
                                           ; SOURCE LINE # 1125
00CC 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 1126
00CE         ?C0219:
00CE 22                RET     
             ; FUNCTION _LIN_Master_GetArray (END)

             ; FUNCTION LIN_Master_ReadRxStatus (BEGIN)
                                           ; SOURCE LINE # 1128
                                           ; SOURCE LINE # 1129
                                           ; SOURCE LINE # 1130
0000 900000      R     MOV     DPTR,#lin_rx_flag
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
0005 900000      R     MOV     DPTR,#flag
0008 EF                MOV     A,R7
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 108 

0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1132
000A 900000      R     MOV     DPTR,#flag
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
                                           ; SOURCE LINE # 1133
000F         ?C0221:
000F 22                RET     
             ; FUNCTION LIN_Master_ReadRxStatus (END)

             ; FUNCTION LIN_Master_ReadTxStatus (BEGIN)
                                           ; SOURCE LINE # 1135
                                           ; SOURCE LINE # 1136
                                           ; SOURCE LINE # 1137
0000 900000      R     MOV     DPTR,#lin_tx_flag
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
                                           ; SOURCE LINE # 1138
0005         ?C0222:
0005 22                RET     
             ; FUNCTION LIN_Master_ReadTxStatus (END)

             ; FUNCTION _LIN_Master_PutArray (BEGIN)
                                           ; SOURCE LINE # 1140
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#length
0008 ED                MOV     A,R5
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#buffer
000D 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 1141
                                           ; SOURCE LINE # 1142
0010 900000      R     MOV     DPTR,#lin_tx_flag
0013 E0                MOVX    A,@DPTR
0014 FF                MOV     R7,A
0015 EF                MOV     A,R7
0016 6003              JZ      $ + 5H
0018 020000      R     LJMP    ?C0223
                                           ; SOURCE LINE # 1143
                                           ; SOURCE LINE # 1146
001B 120000      E     LCALL   LIN_DisableTxInt
                                           ; SOURCE LINE # 1147
001E 900000      R     MOV     DPTR,#id
0021 E0                MOVX    A,@DPTR
0022 FF                MOV     R7,A
0023 120000      R     LCALL   _LIN_Master_id_send
0026 900000      R     MOV     DPTR,#sum
0029 EE                MOV     A,R6
002A F0                MOVX    @DPTR,A
002B A3                INC     DPTR
002C EF                MOV     A,R7
002D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1148
002E 900000      R     MOV     DPTR,#lin_tx_flag
0031 7401              MOV     A,#01H
0033 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1149
0034 900000      R     MOV     DPTR,#sum
0037 E0                MOVX    A,@DPTR
0038 FE                MOV     R6,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 109 

0039 A3                INC     DPTR
003A E0                MOVX    A,@DPTR
003B FF                MOV     R7,A
003C EF                MOV     A,R7
003D B4000A            CJNE    A,#00H,?C0224
0040 EE                MOV     A,R6
0041 B40106            CJNE    A,#01H,?C0224
                                           ; SOURCE LINE # 1150
                                           ; SOURCE LINE # 1151
0044 120000      E     LCALL   LIN_EnableTxInt
                                           ; SOURCE LINE # 1152
0047 7F01              MOV     R7,#01H
0049 22                RET     
                                           ; SOURCE LINE # 1153
004A         ?C0224:
                                           ; SOURCE LINE # 1156
004A 900000      R     MOV     DPTR,#i
004D E4                CLR     A
004E F0                MOVX    @DPTR,A
004F         ?C0226:
004F 900000      R     MOV     DPTR,#length
0052 E0                MOVX    A,@DPTR
0053 FF                MOV     R7,A
0054 900000      R     MOV     DPTR,#i
0057 E0                MOVX    A,@DPTR
0058 FE                MOV     R6,A
0059 EE                MOV     A,R6
005A C3                CLR     C
005B 9F                SUBB    A,R7
005C 5040              JNC     ?C0227
                                           ; SOURCE LINE # 1157
                                           ; SOURCE LINE # 1158
005E 900000      R     MOV     DPTR,#buffer
0061 120000      E     LCALL   ?C?PLDXDATA
0064 900000      R     MOV     DPTR,#i
0067 E0                MOVX    A,@DPTR
0068 FF                MOV     R7,A
0069 E9                MOV     A,R1
006A 2F                ADD     A,R7
006B F9                MOV     R1,A
006C E4                CLR     A
006D 3A                ADDC    A,R2
006E FA                MOV     R2,A
006F 120000      E     LCALL   ?C?CLDPTR
0072 FF                MOV     R7,A
0073 7E00              MOV     R6,#00H
0075 900000      R     MOV     DPTR,#sum
0078 EE                MOV     A,R6
0079 8FF0              MOV     B,R7
007B 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 1159
007E 900000      R     MOV     DPTR,#buffer
0081 120000      E     LCALL   ?C?PLDXDATA
0084 900000      R     MOV     DPTR,#i
0087 E0                MOVX    A,@DPTR
0088 FF                MOV     R7,A
0089 E9                MOV     A,R1
008A 2F                ADD     A,R7
008B F9                MOV     R1,A
008C E4                CLR     A
008D 3A                ADDC    A,R2
008E FA                MOV     R2,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 110 

008F 120000      E     LCALL   ?C?CLDPTR
0092 FF                MOV     R7,A
0093 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 1161
0096 900000      R     MOV     DPTR,#i
0099 E0                MOVX    A,@DPTR
009A 04                INC     A
009B F0                MOVX    @DPTR,A
009C 80B1              SJMP    ?C0226
009E         ?C0227:
                                           ; SOURCE LINE # 1163
009E 900000      R     MOV     DPTR,#sum
00A1 E0                MOVX    A,@DPTR
00A2 FE                MOV     R6,A
00A3 A3                INC     DPTR
00A4 E0                MOVX    A,@DPTR
00A5 FF                MOV     R7,A
00A6 EE                MOV     A,R6
00A7 FF                MOV     R7,A
00A8 7E00              MOV     R6,#00H
00AA 7E00              MOV     R6,#00H
00AC EF                MOV     A,R7
00AD 5407              ANL     A,#07H
00AF FF                MOV     R7,A
00B0 900000      R     MOV     DPTR,#sum
00B3 E0                MOVX    A,@DPTR
00B4 FC                MOV     R4,A
00B5 A3                INC     DPTR
00B6 E0                MOVX    A,@DPTR
00B7 FD                MOV     R5,A
00B8 7C00              MOV     R4,#00H
00BA EF                MOV     A,R7
00BB 2D                ADD     A,R5
00BC FF                MOV     R7,A
00BD EE                MOV     A,R6
00BE 3C                ADDC    A,R4
00BF FE                MOV     R6,A
00C0 EF                MOV     A,R7
00C1 F4                CPL     A
00C2 FF                MOV     R7,A
00C3 EE                MOV     A,R6
00C4 F4                CPL     A
00C5 FE                MOV     R6,A
00C6 7E00              MOV     R6,#00H
00C8 900000      R     MOV     DPTR,#sum
00CB EE                MOV     A,R6
00CC F0                MOVX    @DPTR,A
00CD A3                INC     DPTR
00CE EF                MOV     A,R7
00CF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1164
00D0 900000      R     MOV     DPTR,#sum
00D3 E0                MOVX    A,@DPTR
00D4 FE                MOV     R6,A
00D5 A3                INC     DPTR
00D6 E0                MOVX    A,@DPTR
00D7 FF                MOV     R7,A
00D8 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 1166
00DB 900000      R     MOV     DPTR,#lin_tx_flag
00DE 7401              MOV     A,#01H
00E0 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            04/03/2014 02:44:34 PAGE 111 

                                           ; SOURCE LINE # 1167
00E1 120000      E     LCALL   LIN_EnableTxInt
                                           ; SOURCE LINE # 1168
00E4 7F00              MOV     R7,#00H
00E6 22                RET     
                                           ; SOURCE LINE # 1169
00E7         ?C0223:
                                           ; SOURCE LINE # 1171
                                           ; SOURCE LINE # 1172
00E7 7F01              MOV     R7,#01H
                                           ; SOURCE LINE # 1173
                                           ; SOURCE LINE # 1174
00E9         ?C0225:
00E9 22                RET     
             ; FUNCTION _LIN_Master_PutArray (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   8296    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =     73     158
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  4 WARNING(S),  0 ERROR(S)
