C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN_ISR_2
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\main_isr_2.obj
COMPILER INVOKED BY: C:\Program Files\Cypress\PSoC Creator\3.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe .\main
                    -_isr_2.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051\DP8051_Keil_951\Debug\main_isr_2.lst) CD DB NOIP OT(2,SIZE) DF(DEBUG) 
                    -INCDIR(.,.\Generated_Source\PSoC3) OJ(.\DP8051\DP8051_Keil_951\Debug\main_isr_2.obj)

line level    source

   1          
   2          #include <project.h>
   3          #include <stdio.h>
   4          
   5          #include "ps2_controller.h"
   6          #include <math.h>
   7          
   8          // lin define
   9          #define LIN_RX_EMPTY            0x01
  10          #define LIN_RX_COMPLETE         0x02
  11          #define LIN_RX_SEND             0x04
  12          #define LIN_RX_SUM_ERR          0x08
  13          #define LIN_RX_TIMEOUT_ERR  0x10
  14          #define LIN_TX_SEND     1
  15          
  16          // lin method
  17          uint16 LIN_Master_id_send(uint8 id);
  18          uint8 LIN_Master_GetArray(uint8 id,uint8 length,uint8* buffer);
  19          uint8 LIN_Master_ReadRxStatus(void);
  20          uint8 LIN_Master_PutArray(uint8 id,uint8 length,uint8* const buffer);
  21          uint8 LIN_Master_ReadTxStatus(void);
  22          
  23          // lin value
  24          uint8 lin_id_flag;
  25          uint8 lin_tx_flag = 0;
  26          uint8 lin_rx_flag = 1;
  27          uint8 lin_rx_sync_flag;
  28          uint16 rx_sum;
  29          uint8 rx_length;
  30          uint8* rx_buffer;
  31          uint8 rx_i;
  32          uint8 i;
  33          
  34          uint8 Rxbuffer[10] = {0};
  35          uint16 rori;
  36          
  37          
  38          
  39          typedef struct
  40          {
  41                  int8 x;
  42                  int8 y;
  43                  int8 m;
  44                  int16 a;
  45                  int16 b;
  46                  int16 c;
  47                  int16 max;
  48          } Speed;
  49          
  50          /*
  51          モーターバランス計算
  52          */
  53          
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 2   

  54          void calcSpeed(Speed *sp)
  55          {
  56   1              float tmp;
  57   1              tmp = (-2 * sp->x) + (2 * sp->m);
  58   1              sp->a = floor((sp->max / (128 * (3 + pow(3, 0.5)))) * tmp + 0.5);
  59   1              
  60   1              tmp = sp->x - (pow(3, 0.5) * sp->y) + (2 * sp->m);
  61   1              sp->b = floor((sp->max / (128 * (3 + pow(3, 0.5)))) * tmp + 0.5);
  62   1              
  63   1              tmp = sp->x + (pow(3, 0.5) * sp->y) + (2 * sp->m);
  64   1              sp->c = floor((sp->max / (128 * (3 + pow(3, 0.5)))) * tmp + 0.5);
  65   1              return;
  66   1      }
  67          
  68          
  69          
  70          
  71          CY_ISR(isr_1_isr)
  72          {
  73   1              //LIN_Master_GetArray(0,8,Rxbuffer);
  74   1      }
  75          
  76          CY_ISR(uart_tx_isr)
  77          {
  78   1              if(LIN_ReadTxStatus() & LIN_TX_STS_FIFO_EMPTY)
  79   1              {
  80   2                      if(lin_id_flag == 1)
  81   2                      {
  82   3                              lin_id_flag = 0;
  83   3                      }
  84   2                      if(lin_tx_flag == LIN_TX_SEND)
  85   2                      {
  86   3                              lin_tx_flag = 0;
  87   3                      }
  88   2              }
  89   1      }
  90          
  91          CY_ISR(uart_rx_isr)
  92          {
  93   1              if(lin_rx_flag & LIN_RX_SEND)
  94   1              {
  95   2                      if(rx_i < rx_length)
  96   2                      {
  97   3                              rx_buffer[rx_i] = LIN_GetByte() & 0xff;
  98   3                              
  99   3                              if(lin_rx_sync_flag == 0)
 100   3                              {
 101   4                                      /*
 102   4                                      if(rx_buffer[rx_i] == 0x55)
 103   4                                      {
 104   4                                              return;
 105   4                                      }
 106   4                                      */
 107   4                                      lin_rx_sync_flag = 1;
 108   4                                      return;
 109   4                              }
 110   3                              
 111   3                              else if(lin_rx_sync_flag == 1)
 112   3                              {
 113   4                                      /*
 114   4                                      if(rx_buffer[rx_i] == rx_sum)
 115   4                                      {
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 3   

 116   4                                              return;
 117   4                                      }
 118   4                                      */
 119   4                                      lin_rx_sync_flag = 2;
 120   4                                      return;
 121   4                              }
 122   3                              
 123   3                              rx_sum += rx_buffer[rx_i];
 124   3                              rx_i++;
 125   3                      }
 126   2                      else
 127   2                      {
 128   3                              LIN_Timer_Stop();
 129   3                              rx_sum = 0xff & (~( ((rx_sum >> 8) & 0xf) + (rx_sum & 0xff)));
 130   3                              if((rx_sum & 0xff) == (LIN_GetByte() & 0xff))
 131   3                              {
 132   4                                      lin_rx_flag &= ~LIN_RX_SEND;
 133   4                                      lin_rx_flag &= ~LIN_RX_SUM_ERR;
 134   4                                      lin_rx_flag &= ~LIN_RX_TIMEOUT_ERR;
 135   4                                      lin_rx_flag |= LIN_RX_COMPLETE;
 136   4                                      lin_rx_flag |= LIN_RX_EMPTY;
 137   4                              }
 138   3                              else
 139   3                              {
 140   4                                      lin_rx_flag &= ~LIN_RX_SEND;
 141   4                                      lin_rx_flag &= ~LIN_RX_COMPLETE;
 142   4                                      lin_rx_flag |= LIN_RX_EMPTY;
 143   4                                      lin_rx_flag |= LIN_RX_SUM_ERR;
 144   4                              }
 145   3                      }
 146   2              }
 147   1      }
 148          
 149          CY_ISR(lin_timeout_isr)
 150          {
 151   1              //char str[40];
 152   1              if(lin_rx_flag & LIN_RX_SEND)
 153   1              {
 154   2                      /*
 155   2                      while(1)
 156   2                      {
 157   2                              if(UART_2_ReadTxStatus() & UART_2_TX_STS_FIFO_EMPTY)
 158   2                              {
 159   2                                      sprintf(str,"err %x \n",(int)lin_rx_flag);
 160   2                                      UART_2_PutString(str);
 161   2                              }
 162   2                      }
 163   2                      */
 164   2                      LIN_Timer_WriteCounter(255);
 165   2                      LIN_Timer_Stop();
 166   2                      lin_rx_flag &= ~LIN_RX_SEND;
 167   2                      lin_rx_flag &= ~LIN_RX_COMPLETE;
 168   2                      lin_rx_flag |= LIN_RX_EMPTY;
 169   2                      lin_rx_flag |= LIN_RX_TIMEOUT_ERR;
 170   2                      /*
 171   2                      LIN_Stop();
 172   2                      LIN_Start();
 173   2                      LIN_EnableRxInt();
 174   2                      LIN_EnableTxInt();
 175   2                      LIN_ClearRxBuffer();
 176   2                      LIN_ClearTxBuffer();
 177   2                      lin_rx_flag = LIN_RX_EMPTY;
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 4   

 178   2                      lin_id_flag = 0;
 179   2                      lin_tx_flag = 0;
 180   2                      lin_rx_sync_flag = 0;
 181   2                      rx_sum = 0;
 182   2                      rx_length = 0;
 183   2                      rx_buffer = 0;
 184   2                      rx_i = 0;
 185   2                      */
 186   2                      /*
 187   2                      sprintf(str,"err\n");
 188   2                      UART_2_PutString(str);
 189   2                      */
 190   2              }
 191   1      }
 192          
 193          
 194          
 195          int main()
 196          {
 197   1              uint8 Txbuffer[10] = {100,9,9,9,9,9,9,9};
 198   1      
 199   1              uint8 err[3] = {0};
 200   1              uint8 rori_sts = 0;
 201   1              uint8 rori_flag = 0;
 202   1              char str[30];
 203   1              uint16 cnt = 0;
 204   1              
 205   1              // ps2 controller data
 206   1              uint8 PS_data[10];
 207   1              
 208   1              // speed
 209   1              Speed omuni;
 210   1          /* Place your initialization/startup code here (e.g. MyInst_Start()) */
 211   1      
 212   1          CyGlobalIntEnable;  /* Uncomment this line to enable global interrupts. */
 213   1          LIN_Start();
 214   1              UART_2_Start();
 215   1              PS2_Start();
 216   1          PS2_ClearRxBuffer();
 217   1              
 218   1              uart_tx_isr_StartEx(uart_tx_isr);
 219   1              uart_rx_isr_StartEx(uart_rx_isr);
 220   1              lin_timer_isr_StartEx(lin_timeout_isr);
 221   1              isr_1_StartEx(isr_1_isr);
 222   1              UART_2_EnableTxInt();
 223   1              LIN_EnableRxInt();
 224   1              LIN_EnableTxInt();
 225   1              
 226   1              //LIN_Master_PutArray(2,8,Txbuffer);
 227   1              
 228   1              for(;;)
 229   1              {
 230   2                      PS_Controller_get(PS_data);
 231   2                      omuni.x = analog_l_x;
 232   2                      omuni.y = analog_l_y;
 233   2                      calcSpeed(&omuni);
 234   2                      if(UART_2_ReadTxStatus() & UART_2_TX_STS_FIFO_EMPTY)
 235   2                      {
 236   3                              //sprintf(str,"%x,%x,%x,%x,%x,%x,%x,%x\n",(int)rx_buffer[0],(int)rx_buffer[1],(int)rx_buffer[2],(int)rx
             -_buffer[3],(int)rx_buffer[4],(int)rx_buffer[5],(int)rx_buffer[6],(int)rx_buffer[7]);
 237   3                              sprintf(str,"%x %d %4d %d\n",(int)lin_rx_flag,(int)rori_flag,(int16)rori,(int)LIN_Timer_ReadCounter());
 238   3                              //sprintf(str,"%2x %2x L:%2x,%2x R:%2x,%2x\n",(int16)PS_data[0],(int16)PS_data[1],(int16)PS_data[4],(in
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 5   

             -t16)PS_data[5],(int16)PS_data[2],(int16)PS_data[3]);
 239   3                              UART_2_PutString(str);
 240   3                      }
 241   2                      /*
 242   2                      if(LIN_Master_ReadRxStatus() == LIN_RX_COMPLETE)
 243   2                      {
 244   2                              rori = ((uint16)Rxbuffer[0]+((uint16)Rxbuffer[1]<<8));
 245   2                      }
 246   2                      */
 247   2                      /*
 248   2                      if(LIN_Master_ReadRxStatus() & LIN_RX_TIMEOUT_ERR)
 249   2                      {
 250   2                              lin_rx_flag |= LIN_RX_EMPTY;
 251   2                              lin_rx_flag &= ~LIN_RX_SEND;
 252   2                              lin_rx_flag &= ~LIN_RX_COMPLETE;
 253   2                              //lin_rx_flag &= ~LIN_RX_TIMEOUT_ERR;
 254   2                      }
 255   2                      */
 256   2                      // 確実な読み込み
 257   2                      if((LIN_Master_ReadRxStatus() & LIN_RX_EMPTY) && (rori_flag == 0))
 258   2                      {
 259   3                              LIN_Master_GetArray(1,1,&rori_sts);
 260   3                              rori_flag = 1;
 261   3                              cnt = 0;
 262   3                      }
 263   2                      else if(rori_flag == 1)
 264   2                      {
 265   3                              if(cnt < 100)
 266   3                              {
 267   4                                      cnt++;
 268   4                              }
 269   3                              else
 270   3                              {
 271   4                                      cnt = 0;
 272   4                                      rori_flag = 0;
 273   4                              }
 274   3                              if(LIN_Master_ReadRxStatus() & LIN_RX_COMPLETE)
 275   3                              {
 276   4                                      if(!(rori_sts&0x01))
 277   4                                      {
 278   5                                              LIN_Master_GetArray(0,8,Rxbuffer);
 279   5                                              rori_flag = 2;
 280   5                                              cnt = 0;
 281   5                                      }
 282   4                                      else
 283   4                                      {
 284   5                                              rori_flag = 0;
 285   5                                      }
 286   4                              }
 287   3                      }
 288   2                      else if(rori_flag == 2)
 289   2                      {
 290   3                              if(cnt < 100)
 291   3                              {
 292   4                                      cnt++;
 293   4                              }
 294   3                              else
 295   3                              {
 296   4                                      cnt = 0;
 297   4                                      rori_flag = 0;
 298   4                              }
 299   3                              if(LIN_Master_ReadRxStatus() & LIN_RX_COMPLETE)
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 6   

 300   3                              {
 301   4                                      rori = ((uint16)Rxbuffer[0]+((uint16)Rxbuffer[1]<<8));
 302   4                                      LIN_Master_PutArray(2,8,PS_data);
 303   4                                      rori_flag = 3;
 304   4                                      //rori_flag = 0;
 305   4                              }
 306   3                      }
 307   2                      else if(rori_flag == 3)
 308   2                      {
 309   3                              if(LIN_Master_ReadTxStatus() != LIN_TX_SEND)
 310   3                              {
 311   4                                      rori_flag = 0;
 312   4                              }
 313   3                      }
 314   2                      // ヘッダー送信
 315   2                      //LIN_Master_PutArray(2,8,Txbuffer);
 316   2                      //LIN_Master_id_send(1);
 317   2                      //CyDelayUs(20);
 318   2                      /*
 319   2                      do{
 320   2                      //err[1] = LIN_Master_GetArray(1,1,err);
 321   2                      }while(err[0] != 0);
 322   2                      */
 323   2          }
 324   1      }
 325          
 326          uint16 LIN_Master_id_send(uint8 id)
 327          {
 328   1              uint8 p0 = 0;
 329   1              uint8 p1 = 0;
 330   1              if(lin_id_flag == 0)
 331   1              {
 332   2                      p0 = (id&0x01)^((id >> 1)&0x01)^((id >> 2)&0x01)^((id >> 4)&0x01);
 333   2                      p1 = ~(((id >> 1)&0x01)^((id >> 3)&0x01)^((id >> 4)&0x01)^((id >> 5)&0x01));
 334   2                      id = (id&0x3f)|((p0 << 6)&0x40)|((p1 << 7)&0x80);
 335   2                      LIN_SendBreak(LIN_SEND_WAIT_REINIT);
 336   2                      LIN_ClearTxBuffer();
 337   2                      LIN_ClearRxBuffer();
 338   2                      LIN_PutChar(0x55);
 339   2                      LIN_PutChar(id);
 340   2                      lin_id_flag = 1;
 341   2                      return 0xff&id;
 342   2              }
 343   1              else
 344   1              {
 345   2                      return 0x100;
 346   2              }
 347   1      }
 348          
 349          uint8 LIN_Master_GetArray(uint8 id,uint8 length,uint8* buffer)
 350          {
 351   1              if((lin_rx_flag & LIN_RX_EMPTY) &(lin_tx_flag == 0))
 352   1              {
 353   2                      rx_sum = LIN_Master_id_send(id);
 354   2                      if(rx_sum == 0x100)
 355   2                      {
 356   3                              lin_rx_flag |= LIN_RX_EMPTY;
 357   3                              lin_rx_flag &= ~LIN_RX_SEND;
 358   3                              LIN_Timer_Stop();
 359   3                              return 1;
 360   3                      }               
 361   2                      LIN_ClearRxBuffer();
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 7   

 362   2                      rx_length = length;
 363   2                      rx_buffer = buffer;
 364   2                      rx_i = 0;
 365   2                      lin_rx_sync_flag = 0;
 366   2                      lin_rx_flag &= ~LIN_RX_EMPTY;
 367   2                      lin_rx_flag &= ~LIN_RX_COMPLETE;
 368   2                      lin_rx_flag |= LIN_RX_SEND;
 369   2                      LIN_Timer_WriteCounter(255);
 370   2                      LIN_Timer_Start();
 371   2      
 372   2              }
 373   1              else
 374   1              {
 375   2                      return 1;
 376   2              }
 377   1              return 0;
 378   1      }
 379          
 380          uint8 LIN_Master_ReadRxStatus()
 381          {
 382   1              uint8 flag = lin_rx_flag;
 383   1              //lin_rx_flag &= ~LIN_RX_SUM_ERR; 
 384   1              return flag;
 385   1      }
 386          
 387          uint8 LIN_Master_ReadTxStatus()
 388          {
 389   1              return lin_tx_flag;
 390   1      }
 391          
 392          uint8 LIN_Master_PutArray(uint8 id,uint8 length,uint8* buffer)
 393          {
 394   1              if((lin_tx_flag == 0) & (lin_rx_flag & LIN_RX_EMPTY))
 395   1              {
 396   2                      uint8 i;
 397   2                      uint16 sum = LIN_Master_id_send(id);
 398   2                      if(sum == 0x100)
 399   2                      {
 400   3                              return 1;
 401   3                      }
 402   2                      //LIN_ClearTxBuffer();
 403   2                      for(i = 0;i < length;i++)
 404   2                      {
 405   3                              sum += buffer[i];
 406   3                              LIN_PutChar(buffer[i]);
 407   3                              //while(!(LIN_ReadTxStatus() & LIN_TX_STS_COMPLETE));   
 408   3                      }
 409   2                      sum = 0xff & (~( ((sum >> 8) & 0x7) + (sum & 0xff)));
 410   2                      LIN_PutChar(sum);
 411   2                      lin_tx_flag = LIN_TX_SEND;
 412   2                      //while(!(LIN_ReadTxStatus() & LIN_TX_STS_COMPLETE));
 413   2                      return 0;
 414   2              }
 415   1              else
 416   1              {
 417   2                      return 1;
 418   2              }
 419   1      }
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 8   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _calcSpeed (BEGIN)
                                           ; SOURCE LINE # 54
0000 900000      R     MOV     DPTR,#sp
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 55
                                           ; SOURCE LINE # 57
0006 900000      R     MOV     DPTR,#sp
0009 120000      E     LCALL   ?C?PLDXDATA
000C E9                MOV     A,R1
000D 2402              ADD     A,#02H
000F F9                MOV     R1,A
0010 EA                MOV     A,R2
0011 3400              ADDC    A,#00H
0013 FA                MOV     R2,A
0014 120000      E     LCALL   ?C?CLDPTR
0017 FF                MOV     R7,A
0018 EF                MOV     A,R7
0019 25E0              ADD     A,ACC
001B FF                MOV     R7,A
001C C007              PUSH    AR7
001E 900000      R     MOV     DPTR,#sp
0021 120000      E     LCALL   ?C?PLDXDATA
0024 120000      E     LCALL   ?C?CLDPTR
0027 FF                MOV     R7,A
0028 EF                MOV     A,R7
0029 33                RLC     A
002A 95E0              SUBB    A,ACC
002C FE                MOV     R6,A
002D 7CFF              MOV     R4,#0FFH
002F 7DFE              MOV     R5,#0FEH
0031 120000      E     LCALL   ?C?IMUL
0034 AE07              MOV     R6,AR7
0036 D007              POP     AR7
0038 EF                MOV     A,R7
0039 2E                ADD     A,R6
003A FC                MOV     R4,A
003B EC                MOV     A,R4
003C 120000      E     LCALL   ?C?FCASTC
003F 900000      R     MOV     DPTR,#tmp
0042 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 58
0045 7F00              MOV     R7,#00H
0047 7E00              MOV     R6,#00H
0049 7D40              MOV     R5,#040H
004B 7C40              MOV     R4,#040H
004D C004              PUSH    AR4
004F C005              PUSH    AR5
0051 C006              PUSH    AR6
0053 C007              PUSH    AR7
0055 7F00              MOV     R7,#00H
0057 7E00              MOV     R6,#00H
0059 7D00              MOV     R5,#00H
005B 7C3F              MOV     R4,#03FH
005D 900000      E     MOV     DPTR,#?_pow?BYTE+04H
0060 120000      E     LCALL   ?C?LSTXDATA
0063 D007              POP     AR7
0065 D006              POP     AR6
0067 D005              POP     AR5
0069 D004              POP     AR4
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 9   

006B 120000      E     LCALL   _pow
006E 7B00              MOV     R3,#00H
0070 7A00              MOV     R2,#00H
0072 7940              MOV     R1,#040H
0074 7840              MOV     R0,#040H
0076 120000      E     LCALL   ?C?FPADD
0079 7B00              MOV     R3,#00H
007B 7A00              MOV     R2,#00H
007D 7900              MOV     R1,#00H
007F 7843              MOV     R0,#043H
0081 120000      E     LCALL   ?C?FPMUL
0084 C004              PUSH    AR4
0086 C005              PUSH    AR5
0088 C006              PUSH    AR6
008A C007              PUSH    AR7
008C 900000      R     MOV     DPTR,#sp
008F 120000      E     LCALL   ?C?PLDXDATA
0092 E9                MOV     A,R1
0093 2409              ADD     A,#09H
0095 F9                MOV     R1,A
0096 EA                MOV     A,R2
0097 3400              ADDC    A,#00H
0099 FA                MOV     R2,A
009A 120000      E     LCALL   ?C?ILDPTR
009D FD                MOV     R5,A
009E ACF0              MOV     R4,B
00A0 EC                MOV     A,R4
00A1 120000      E     LCALL   ?C?FCASTI
00A4 D003              POP     AR3
00A6 D002              POP     AR2
00A8 D001              POP     AR1
00AA D000              POP     AR0
00AC 120000      E     LCALL   ?C?FPDIV
00AF 900000      R     MOV     DPTR,#tmp
00B2 120000      E     LCALL   ?C?LLDXDATA0
00B5 120000      E     LCALL   ?C?FPMUL
00B8 7B00              MOV     R3,#00H
00BA 7A00              MOV     R2,#00H
00BC 7900              MOV     R1,#00H
00BE 783F              MOV     R0,#03FH
00C0 120000      E     LCALL   ?C?FPADD
00C3 120000      E     LCALL   _floor
00C6 120000      E     LCALL   ?C?CASTF
00C9 900000      R     MOV     DPTR,#sp
00CC 120000      E     LCALL   ?C?PLDXDATA
00CF E9                MOV     A,R1
00D0 2403              ADD     A,#03H
00D2 F9                MOV     R1,A
00D3 EA                MOV     A,R2
00D4 3400              ADDC    A,#00H
00D6 FA                MOV     R2,A
00D7 EE                MOV     A,R6
00D8 8FF0              MOV     B,R7
00DA 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 60
00DD 7F00              MOV     R7,#00H
00DF 7E00              MOV     R6,#00H
00E1 7D40              MOV     R5,#040H
00E3 7C40              MOV     R4,#040H
00E5 C004              PUSH    AR4
00E7 C005              PUSH    AR5
00E9 C006              PUSH    AR6
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 10  

00EB C007              PUSH    AR7
00ED 7F00              MOV     R7,#00H
00EF 7E00              MOV     R6,#00H
00F1 7D00              MOV     R5,#00H
00F3 7C3F              MOV     R4,#03FH
00F5 900000      E     MOV     DPTR,#?_pow?BYTE+04H
00F8 120000      E     LCALL   ?C?LSTXDATA
00FB D007              POP     AR7
00FD D006              POP     AR6
00FF D005              POP     AR5
0101 D004              POP     AR4
0103 120000      E     LCALL   _pow
0106 C004              PUSH    AR4
0108 C005              PUSH    AR5
010A C006              PUSH    AR6
010C C007              PUSH    AR7
010E 900000      R     MOV     DPTR,#sp
0111 120000      E     LCALL   ?C?PLDXDATA
0114 E9                MOV     A,R1
0115 2401              ADD     A,#01H
0117 F9                MOV     R1,A
0118 EA                MOV     A,R2
0119 3400              ADDC    A,#00H
011B FA                MOV     R2,A
011C 120000      E     LCALL   ?C?CLDPTR
011F FC                MOV     R4,A
0120 EC                MOV     A,R4
0121 120000      E     LCALL   ?C?FCASTC
0124 A804              MOV     R0,AR4
0126 A905              MOV     R1,AR5
0128 AA06              MOV     R2,AR6
012A AB07              MOV     R3,AR7
012C D007              POP     AR7
012E D006              POP     AR6
0130 D005              POP     AR5
0132 D004              POP     AR4
0134 120000      E     LCALL   ?C?FPMUL
0137 C004              PUSH    AR4
0139 C005              PUSH    AR5
013B C006              PUSH    AR6
013D C007              PUSH    AR7
013F 900000      R     MOV     DPTR,#sp
0142 120000      E     LCALL   ?C?PLDXDATA
0145 120000      E     LCALL   ?C?CLDPTR
0148 FC                MOV     R4,A
0149 EC                MOV     A,R4
014A 120000      E     LCALL   ?C?FCASTC
014D D003              POP     AR3
014F D002              POP     AR2
0151 D001              POP     AR1
0153 D000              POP     AR0
0155 120000      E     LCALL   ?C?FPSUB
0158 C004              PUSH    AR4
015A C005              PUSH    AR5
015C C006              PUSH    AR6
015E C007              PUSH    AR7
0160 900000      R     MOV     DPTR,#sp
0163 120000      E     LCALL   ?C?PLDXDATA
0166 E9                MOV     A,R1
0167 2402              ADD     A,#02H
0169 F9                MOV     R1,A
016A EA                MOV     A,R2
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 11  

016B 3400              ADDC    A,#00H
016D FA                MOV     R2,A
016E 120000      E     LCALL   ?C?CLDPTR
0171 FC                MOV     R4,A
0172 EC                MOV     A,R4
0173 120000      E     LCALL   ?C?FCASTC
0176 7B00              MOV     R3,#00H
0178 7A00              MOV     R2,#00H
017A 7900              MOV     R1,#00H
017C 7840              MOV     R0,#040H
017E 120000      E     LCALL   ?C?FPMUL
0181 A804              MOV     R0,AR4
0183 A905              MOV     R1,AR5
0185 AA06              MOV     R2,AR6
0187 AB07              MOV     R3,AR7
0189 D007              POP     AR7
018B D006              POP     AR6
018D D005              POP     AR5
018F D004              POP     AR4
0191 120000      E     LCALL   ?C?FPADD
0194 900000      R     MOV     DPTR,#tmp
0197 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 61
019A 7F00              MOV     R7,#00H
019C 7E00              MOV     R6,#00H
019E 7D40              MOV     R5,#040H
01A0 7C40              MOV     R4,#040H
01A2 C004              PUSH    AR4
01A4 C005              PUSH    AR5
01A6 C006              PUSH    AR6
01A8 C007              PUSH    AR7
01AA 7F00              MOV     R7,#00H
01AC 7E00              MOV     R6,#00H
01AE 7D00              MOV     R5,#00H
01B0 7C3F              MOV     R4,#03FH
01B2 900000      E     MOV     DPTR,#?_pow?BYTE+04H
01B5 120000      E     LCALL   ?C?LSTXDATA
01B8 D007              POP     AR7
01BA D006              POP     AR6
01BC D005              POP     AR5
01BE D004              POP     AR4
01C0 120000      E     LCALL   _pow
01C3 7B00              MOV     R3,#00H
01C5 7A00              MOV     R2,#00H
01C7 7940              MOV     R1,#040H
01C9 7840              MOV     R0,#040H
01CB 120000      E     LCALL   ?C?FPADD
01CE 7B00              MOV     R3,#00H
01D0 7A00              MOV     R2,#00H
01D2 7900              MOV     R1,#00H
01D4 7843              MOV     R0,#043H
01D6 120000      E     LCALL   ?C?FPMUL
01D9 C004              PUSH    AR4
01DB C005              PUSH    AR5
01DD C006              PUSH    AR6
01DF C007              PUSH    AR7
01E1 900000      R     MOV     DPTR,#sp
01E4 120000      E     LCALL   ?C?PLDXDATA
01E7 E9                MOV     A,R1
01E8 2409              ADD     A,#09H
01EA F9                MOV     R1,A
01EB EA                MOV     A,R2
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 12  

01EC 3400              ADDC    A,#00H
01EE FA                MOV     R2,A
01EF 120000      E     LCALL   ?C?ILDPTR
01F2 FD                MOV     R5,A
01F3 ACF0              MOV     R4,B
01F5 EC                MOV     A,R4
01F6 120000      E     LCALL   ?C?FCASTI
01F9 D003              POP     AR3
01FB D002              POP     AR2
01FD D001              POP     AR1
01FF D000              POP     AR0
0201 120000      E     LCALL   ?C?FPDIV
0204 900000      R     MOV     DPTR,#tmp
0207 120000      E     LCALL   ?C?LLDXDATA0
020A 120000      E     LCALL   ?C?FPMUL
020D 7B00              MOV     R3,#00H
020F 7A00              MOV     R2,#00H
0211 7900              MOV     R1,#00H
0213 783F              MOV     R0,#03FH
0215 120000      E     LCALL   ?C?FPADD
0218 120000      E     LCALL   _floor
021B 120000      E     LCALL   ?C?CASTF
021E 900000      R     MOV     DPTR,#sp
0221 120000      E     LCALL   ?C?PLDXDATA
0224 E9                MOV     A,R1
0225 2405              ADD     A,#05H
0227 F9                MOV     R1,A
0228 EA                MOV     A,R2
0229 3400              ADDC    A,#00H
022B FA                MOV     R2,A
022C EE                MOV     A,R6
022D 8FF0              MOV     B,R7
022F 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 63
0232 7F00              MOV     R7,#00H
0234 7E00              MOV     R6,#00H
0236 7D40              MOV     R5,#040H
0238 7C40              MOV     R4,#040H
023A C004              PUSH    AR4
023C C005              PUSH    AR5
023E C006              PUSH    AR6
0240 C007              PUSH    AR7
0242 7F00              MOV     R7,#00H
0244 7E00              MOV     R6,#00H
0246 7D00              MOV     R5,#00H
0248 7C3F              MOV     R4,#03FH
024A 900000      E     MOV     DPTR,#?_pow?BYTE+04H
024D 120000      E     LCALL   ?C?LSTXDATA
0250 D007              POP     AR7
0252 D006              POP     AR6
0254 D005              POP     AR5
0256 D004              POP     AR4
0258 120000      E     LCALL   _pow
025B C004              PUSH    AR4
025D C005              PUSH    AR5
025F C006              PUSH    AR6
0261 C007              PUSH    AR7
0263 900000      R     MOV     DPTR,#sp
0266 120000      E     LCALL   ?C?PLDXDATA
0269 E9                MOV     A,R1
026A 2401              ADD     A,#01H
026C F9                MOV     R1,A
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 13  

026D EA                MOV     A,R2
026E 3400              ADDC    A,#00H
0270 FA                MOV     R2,A
0271 120000      E     LCALL   ?C?CLDPTR
0274 FC                MOV     R4,A
0275 EC                MOV     A,R4
0276 120000      E     LCALL   ?C?FCASTC
0279 A804              MOV     R0,AR4
027B A905              MOV     R1,AR5
027D AA06              MOV     R2,AR6
027F AB07              MOV     R3,AR7
0281 D007              POP     AR7
0283 D006              POP     AR6
0285 D005              POP     AR5
0287 D004              POP     AR4
0289 120000      E     LCALL   ?C?FPMUL
028C C004              PUSH    AR4
028E C005              PUSH    AR5
0290 C006              PUSH    AR6
0292 C007              PUSH    AR7
0294 900000      R     MOV     DPTR,#sp
0297 120000      E     LCALL   ?C?PLDXDATA
029A 120000      E     LCALL   ?C?CLDPTR
029D FC                MOV     R4,A
029E EC                MOV     A,R4
029F 120000      E     LCALL   ?C?FCASTC
02A2 A804              MOV     R0,AR4
02A4 A905              MOV     R1,AR5
02A6 AA06              MOV     R2,AR6
02A8 AB07              MOV     R3,AR7
02AA D007              POP     AR7
02AC D006              POP     AR6
02AE D005              POP     AR5
02B0 D004              POP     AR4
02B2 120000      E     LCALL   ?C?FPADD
02B5 C004              PUSH    AR4
02B7 C005              PUSH    AR5
02B9 C006              PUSH    AR6
02BB C007              PUSH    AR7
02BD 900000      R     MOV     DPTR,#sp
02C0 120000      E     LCALL   ?C?PLDXDATA
02C3 E9                MOV     A,R1
02C4 2402              ADD     A,#02H
02C6 F9                MOV     R1,A
02C7 EA                MOV     A,R2
02C8 3400              ADDC    A,#00H
02CA FA                MOV     R2,A
02CB 120000      E     LCALL   ?C?CLDPTR
02CE FC                MOV     R4,A
02CF EC                MOV     A,R4
02D0 120000      E     LCALL   ?C?FCASTC
02D3 7B00              MOV     R3,#00H
02D5 7A00              MOV     R2,#00H
02D7 7900              MOV     R1,#00H
02D9 7840              MOV     R0,#040H
02DB 120000      E     LCALL   ?C?FPMUL
02DE A804              MOV     R0,AR4
02E0 A905              MOV     R1,AR5
02E2 AA06              MOV     R2,AR6
02E4 AB07              MOV     R3,AR7
02E6 D007              POP     AR7
02E8 D006              POP     AR6
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 14  

02EA D005              POP     AR5
02EC D004              POP     AR4
02EE 120000      E     LCALL   ?C?FPADD
02F1 900000      R     MOV     DPTR,#tmp
02F4 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 64
02F7 7F00              MOV     R7,#00H
02F9 7E00              MOV     R6,#00H
02FB 7D40              MOV     R5,#040H
02FD 7C40              MOV     R4,#040H
02FF C004              PUSH    AR4
0301 C005              PUSH    AR5
0303 C006              PUSH    AR6
0305 C007              PUSH    AR7
0307 7F00              MOV     R7,#00H
0309 7E00              MOV     R6,#00H
030B 7D00              MOV     R5,#00H
030D 7C3F              MOV     R4,#03FH
030F 900000      E     MOV     DPTR,#?_pow?BYTE+04H
0312 120000      E     LCALL   ?C?LSTXDATA
0315 D007              POP     AR7
0317 D006              POP     AR6
0319 D005              POP     AR5
031B D004              POP     AR4
031D 120000      E     LCALL   _pow
0320 7B00              MOV     R3,#00H
0322 7A00              MOV     R2,#00H
0324 7940              MOV     R1,#040H
0326 7840              MOV     R0,#040H
0328 120000      E     LCALL   ?C?FPADD
032B 7B00              MOV     R3,#00H
032D 7A00              MOV     R2,#00H
032F 7900              MOV     R1,#00H
0331 7843              MOV     R0,#043H
0333 120000      E     LCALL   ?C?FPMUL
0336 C004              PUSH    AR4
0338 C005              PUSH    AR5
033A C006              PUSH    AR6
033C C007              PUSH    AR7
033E 900000      R     MOV     DPTR,#sp
0341 120000      E     LCALL   ?C?PLDXDATA
0344 E9                MOV     A,R1
0345 2409              ADD     A,#09H
0347 F9                MOV     R1,A
0348 EA                MOV     A,R2
0349 3400              ADDC    A,#00H
034B FA                MOV     R2,A
034C 120000      E     LCALL   ?C?ILDPTR
034F FD                MOV     R5,A
0350 ACF0              MOV     R4,B
0352 EC                MOV     A,R4
0353 120000      E     LCALL   ?C?FCASTI
0356 D003              POP     AR3
0358 D002              POP     AR2
035A D001              POP     AR1
035C D000              POP     AR0
035E 120000      E     LCALL   ?C?FPDIV
0361 900000      R     MOV     DPTR,#tmp
0364 120000      E     LCALL   ?C?LLDXDATA0
0367 120000      E     LCALL   ?C?FPMUL
036A 7B00              MOV     R3,#00H
036C 7A00              MOV     R2,#00H
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 15  

036E 7900              MOV     R1,#00H
0370 783F              MOV     R0,#03FH
0372 120000      E     LCALL   ?C?FPADD
0375 120000      E     LCALL   _floor
0378 120000      E     LCALL   ?C?CASTF
037B 900000      R     MOV     DPTR,#sp
037E 120000      E     LCALL   ?C?PLDXDATA
0381 E9                MOV     A,R1
0382 2407              ADD     A,#07H
0384 F9                MOV     R1,A
0385 EA                MOV     A,R2
0386 3400              ADDC    A,#00H
0388 FA                MOV     R2,A
0389 EE                MOV     A,R6
038A 8FF0              MOV     B,R7
038C 120000      E     LCALL   ?C?ISTPTR
                                           ; SOURCE LINE # 66
038F         ?C0001:
038F 22                RET     
             ; FUNCTION _calcSpeed (END)

             ; FUNCTION isr_1_isr (BEGIN)
                                           ; SOURCE LINE # 71
                                           ; SOURCE LINE # 74
0000 32                RETI    
             ; FUNCTION isr_1_isr (END)

             ; FUNCTION uart_tx_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 78
002B 120000      E     LCALL   LIN_ReadTxStatus
002E EF                MOV     A,R7
002F 30E11C            JNB     ACC.1,?C0006
                                           ; SOURCE LINE # 79
                                           ; SOURCE LINE # 80
0032 900000      R     MOV     DPTR,#lin_id_flag
0035 E0                MOVX    A,@DPTR
0036 FF                MOV     R7,A
0037 EF                MOV     A,R7
0038 B40105            CJNE    A,#01H,?C0004
                                           ; SOURCE LINE # 81
                                           ; SOURCE LINE # 82
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 16  

003B 900000      R     MOV     DPTR,#lin_id_flag
003E E4                CLR     A
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 83
0040         ?C0004:
                                           ; SOURCE LINE # 84
0040 900000      R     MOV     DPTR,#lin_tx_flag
0043 E0                MOVX    A,@DPTR
0044 FF                MOV     R7,A
0045 EF                MOV     A,R7
0046 B40105            CJNE    A,#01H,?C0006
                                           ; SOURCE LINE # 85
                                           ; SOURCE LINE # 86
0049 900000      R     MOV     DPTR,#lin_tx_flag
004C E4                CLR     A
004D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 87
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 89
004E         ?C0006:
004E D007              POP     AR7
0050 D006              POP     AR6
0052 D005              POP     AR5
0054 D004              POP     AR4
0056 D003              POP     AR3
0058 D002              POP     AR2
005A D001              POP     AR1
005C D000              POP     AR0
005E D0D0              POP     PSW
0060 D000        E     POP     ?C?XPAGE1SFR
0062 D086              POP     DPS
0064 D084              POP     DPL1
0066 D085              POP     DPH1
0068 D082              POP     DPL
006A D083              POP     DPH
006C D0F0              POP     B
006E D0E0              POP     ACC
0070 32                RETI    
             ; FUNCTION uart_tx_isr (END)

             ; FUNCTION uart_rx_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 91
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 17  

                                           ; SOURCE LINE # 93
002B 900000      R     MOV     DPTR,#lin_rx_flag
002E E0                MOVX    A,@DPTR
002F FF                MOV     R7,A
0030 EF                MOV     A,R7
0031 20E203            JB      ACC.2,$ + 6H
0034 020000      R     LJMP    ?C0010
                                           ; SOURCE LINE # 94
                                           ; SOURCE LINE # 95
0037 900000      R     MOV     DPTR,#rx_length
003A E0                MOVX    A,@DPTR
003B FF                MOV     R7,A
003C 900000      R     MOV     DPTR,#rx_i
003F E0                MOVX    A,@DPTR
0040 FE                MOV     R6,A
0041 EE                MOV     A,R6
0042 C3                CLR     C
0043 9F                SUBB    A,R7
0044 5068              JNC     ?C0008
                                           ; SOURCE LINE # 96
                                           ; SOURCE LINE # 97
0046 120000      E     LCALL   LIN_GetByte
0049 EF                MOV     A,R7
004A 54FF              ANL     A,#0FFH
004C FF                MOV     R7,A
004D 900000      R     MOV     DPTR,#rx_buffer
0050 120000      E     LCALL   ?C?PLDXDATA
0053 900000      R     MOV     DPTR,#rx_i
0056 E0                MOVX    A,@DPTR
0057 FE                MOV     R6,A
0058 E9                MOV     A,R1
0059 2E                ADD     A,R6
005A F9                MOV     R1,A
005B E4                CLR     A
005C 3A                ADDC    A,R2
005D FA                MOV     R2,A
005E EF                MOV     A,R7
005F 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 99
0062 900000      R     MOV     DPTR,#lin_rx_sync_flag
0065 E0                MOVX    A,@DPTR
0066 FF                MOV     R7,A
0067 EF                MOV     A,R7
0068 7009              JNZ     ?C0009
                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 107
006A 900000      R     MOV     DPTR,#lin_rx_sync_flag
006D 7401              MOV     A,#01H
006F F0                MOVX    @DPTR,A
0070 020000      R     LJMP    ?C0010
                                           ; SOURCE LINE # 109
0073         ?C0009:
                                           ; SOURCE LINE # 111
0073 900000      R     MOV     DPTR,#lin_rx_sync_flag
0076 E0                MOVX    A,@DPTR
0077 FF                MOV     R7,A
0078 EF                MOV     A,R7
0079 B40109            CJNE    A,#01H,?C0011
                                           ; SOURCE LINE # 112
                                           ; SOURCE LINE # 119
007C 900000      R     MOV     DPTR,#lin_rx_sync_flag
007F 7402              MOV     A,#02H
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 18  

0081 F0                MOVX    @DPTR,A
0082 020000      R     LJMP    ?C0010
                                           ; SOURCE LINE # 121
0085         ?C0011:
                                           ; SOURCE LINE # 123
0085 900000      R     MOV     DPTR,#rx_buffer
0088 120000      E     LCALL   ?C?PLDXDATA
008B 900000      R     MOV     DPTR,#rx_i
008E E0                MOVX    A,@DPTR
008F FF                MOV     R7,A
0090 E9                MOV     A,R1
0091 2F                ADD     A,R7
0092 F9                MOV     R1,A
0093 E4                CLR     A
0094 3A                ADDC    A,R2
0095 FA                MOV     R2,A
0096 120000      E     LCALL   ?C?CLDPTR
0099 FF                MOV     R7,A
009A 7E00              MOV     R6,#00H
009C 900000      R     MOV     DPTR,#rx_sum
009F EE                MOV     A,R6
00A0 8FF0              MOV     B,R7
00A2 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 124
00A5 900000      R     MOV     DPTR,#rx_i
00A8 E0                MOVX    A,@DPTR
00A9 04                INC     A
00AA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 125
00AB 020000      R     LJMP    ?C0010
00AE         ?C0008:
                                           ; SOURCE LINE # 127
                                           ; SOURCE LINE # 128
00AE 120000      E     LCALL   LIN_Timer_Stop
                                           ; SOURCE LINE # 129
00B1 900000      R     MOV     DPTR,#rx_sum
00B4 E0                MOVX    A,@DPTR
00B5 FE                MOV     R6,A
00B6 A3                INC     DPTR
00B7 E0                MOVX    A,@DPTR
00B8 FF                MOV     R7,A
00B9 EE                MOV     A,R6
00BA FF                MOV     R7,A
00BB 7E00              MOV     R6,#00H
00BD 7E00              MOV     R6,#00H
00BF EF                MOV     A,R7
00C0 540F              ANL     A,#0FH
00C2 FF                MOV     R7,A
00C3 900000      R     MOV     DPTR,#rx_sum
00C6 E0                MOVX    A,@DPTR
00C7 FC                MOV     R4,A
00C8 A3                INC     DPTR
00C9 E0                MOVX    A,@DPTR
00CA FD                MOV     R5,A
00CB 7C00              MOV     R4,#00H
00CD EF                MOV     A,R7
00CE 2D                ADD     A,R5
00CF FF                MOV     R7,A
00D0 EE                MOV     A,R6
00D1 3C                ADDC    A,R4
00D2 FE                MOV     R6,A
00D3 EF                MOV     A,R7
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 19  

00D4 F4                CPL     A
00D5 FF                MOV     R7,A
00D6 EE                MOV     A,R6
00D7 F4                CPL     A
00D8 FE                MOV     R6,A
00D9 7E00              MOV     R6,#00H
00DB 900000      R     MOV     DPTR,#rx_sum
00DE EE                MOV     A,R6
00DF F0                MOVX    @DPTR,A
00E0 A3                INC     DPTR
00E1 EF                MOV     A,R7
00E2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 130
00E3 120000      E     LCALL   LIN_GetByte
00E6 7E00              MOV     R6,#00H
00E8 900000      R     MOV     DPTR,#rx_sum
00EB E0                MOVX    A,@DPTR
00EC FC                MOV     R4,A
00ED A3                INC     DPTR
00EE E0                MOVX    A,@DPTR
00EF FD                MOV     R5,A
00F0 7C00              MOV     R4,#00H
00F2 ED                MOV     A,R5
00F3 6F                XRL     A,R7
00F4 7002              JNZ     ?C0058
00F6 EC                MOV     A,R4
00F7 6E                XRL     A,R6
00F8         ?C0058:
00F8 7048              JNZ     ?C0014
                                           ; SOURCE LINE # 131
                                           ; SOURCE LINE # 132
00FA 900000      R     MOV     DPTR,#lin_rx_flag
00FD E0                MOVX    A,@DPTR
00FE FF                MOV     R7,A
00FF EF                MOV     A,R7
0100 54FB              ANL     A,#0FBH
0102 FF                MOV     R7,A
0103 900000      R     MOV     DPTR,#lin_rx_flag
0106 EF                MOV     A,R7
0107 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 133
0108 900000      R     MOV     DPTR,#lin_rx_flag
010B E0                MOVX    A,@DPTR
010C FF                MOV     R7,A
010D EF                MOV     A,R7
010E 54F7              ANL     A,#0F7H
0110 FF                MOV     R7,A
0111 900000      R     MOV     DPTR,#lin_rx_flag
0114 EF                MOV     A,R7
0115 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 134
0116 900000      R     MOV     DPTR,#lin_rx_flag
0119 E0                MOVX    A,@DPTR
011A FF                MOV     R7,A
011B EF                MOV     A,R7
011C 54EF              ANL     A,#0EFH
011E FF                MOV     R7,A
011F 900000      R     MOV     DPTR,#lin_rx_flag
0122 EF                MOV     A,R7
0123 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 135
0124 900000      R     MOV     DPTR,#lin_rx_flag
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 20  

0127 E0                MOVX    A,@DPTR
0128 FF                MOV     R7,A
0129 EF                MOV     A,R7
012A 4402              ORL     A,#02H
012C FF                MOV     R7,A
012D 900000      R     MOV     DPTR,#lin_rx_flag
0130 EF                MOV     A,R7
0131 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 136
0132 900000      R     MOV     DPTR,#lin_rx_flag
0135 E0                MOVX    A,@DPTR
0136 FF                MOV     R7,A
0137 EF                MOV     A,R7
0138 4401              ORL     A,#01H
013A FF                MOV     R7,A
013B 900000      R     MOV     DPTR,#lin_rx_flag
013E EF                MOV     A,R7
013F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 137
0140 8038              SJMP    ?C0010
0142         ?C0014:
                                           ; SOURCE LINE # 139
                                           ; SOURCE LINE # 140
0142 900000      R     MOV     DPTR,#lin_rx_flag
0145 E0                MOVX    A,@DPTR
0146 FF                MOV     R7,A
0147 EF                MOV     A,R7
0148 54FB              ANL     A,#0FBH
014A FF                MOV     R7,A
014B 900000      R     MOV     DPTR,#lin_rx_flag
014E EF                MOV     A,R7
014F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 141
0150 900000      R     MOV     DPTR,#lin_rx_flag
0153 E0                MOVX    A,@DPTR
0154 FF                MOV     R7,A
0155 EF                MOV     A,R7
0156 54FD              ANL     A,#0FDH
0158 FF                MOV     R7,A
0159 900000      R     MOV     DPTR,#lin_rx_flag
015C EF                MOV     A,R7
015D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 142
015E 900000      R     MOV     DPTR,#lin_rx_flag
0161 E0                MOVX    A,@DPTR
0162 FF                MOV     R7,A
0163 EF                MOV     A,R7
0164 4401              ORL     A,#01H
0166 FF                MOV     R7,A
0167 900000      R     MOV     DPTR,#lin_rx_flag
016A EF                MOV     A,R7
016B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 143
016C 900000      R     MOV     DPTR,#lin_rx_flag
016F E0                MOVX    A,@DPTR
0170 FF                MOV     R7,A
0171 EF                MOV     A,R7
0172 4408              ORL     A,#08H
0174 FF                MOV     R7,A
0175 900000      R     MOV     DPTR,#lin_rx_flag
0178 EF                MOV     A,R7
0179 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 21  

                                           ; SOURCE LINE # 144
                                           ; SOURCE LINE # 145
                                           ; SOURCE LINE # 146
                                           ; SOURCE LINE # 147
017A         ?C0010:
017A D007              POP     AR7
017C D006              POP     AR6
017E D005              POP     AR5
0180 D004              POP     AR4
0182 D003              POP     AR3
0184 D002              POP     AR2
0186 D001              POP     AR1
0188 D000              POP     AR0
018A D0D0              POP     PSW
018C D000        E     POP     ?C?XPAGE1SFR
018E D086              POP     DPS
0190 D084              POP     DPL1
0192 D085              POP     DPH1
0194 D082              POP     DPL
0196 D083              POP     DPH
0198 D0F0              POP     B
019A D0E0              POP     ACC
019C 32                RETI    
             ; FUNCTION uart_rx_isr (END)

             ; FUNCTION lin_timeout_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 149
                                           ; SOURCE LINE # 152
002B 900000      R     MOV     DPTR,#lin_rx_flag
002E E0                MOVX    A,@DPTR
002F FF                MOV     R7,A
0030 EF                MOV     A,R7
0031 30E240            JNB     ACC.2,?C0017
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 164
0034 7FFF              MOV     R7,#0FFH
0036 120000      E     LCALL   _LIN_Timer_WriteCounter
                                           ; SOURCE LINE # 165
0039 120000      E     LCALL   LIN_Timer_Stop
                                           ; SOURCE LINE # 166
003C 900000      R     MOV     DPTR,#lin_rx_flag
003F E0                MOVX    A,@DPTR
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 22  

0040 FF                MOV     R7,A
0041 EF                MOV     A,R7
0042 54FB              ANL     A,#0FBH
0044 FF                MOV     R7,A
0045 900000      R     MOV     DPTR,#lin_rx_flag
0048 EF                MOV     A,R7
0049 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 167
004A 900000      R     MOV     DPTR,#lin_rx_flag
004D E0                MOVX    A,@DPTR
004E FF                MOV     R7,A
004F EF                MOV     A,R7
0050 54FD              ANL     A,#0FDH
0052 FF                MOV     R7,A
0053 900000      R     MOV     DPTR,#lin_rx_flag
0056 EF                MOV     A,R7
0057 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 168
0058 900000      R     MOV     DPTR,#lin_rx_flag
005B E0                MOVX    A,@DPTR
005C FF                MOV     R7,A
005D EF                MOV     A,R7
005E 4401              ORL     A,#01H
0060 FF                MOV     R7,A
0061 900000      R     MOV     DPTR,#lin_rx_flag
0064 EF                MOV     A,R7
0065 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 169
0066 900000      R     MOV     DPTR,#lin_rx_flag
0069 E0                MOVX    A,@DPTR
006A FF                MOV     R7,A
006B EF                MOV     A,R7
006C 4410              ORL     A,#010H
006E FF                MOV     R7,A
006F 900000      R     MOV     DPTR,#lin_rx_flag
0072 EF                MOV     A,R7
0073 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 190
                                           ; SOURCE LINE # 191
0074         ?C0017:
0074 D007              POP     AR7
0076 D006              POP     AR6
0078 D005              POP     AR5
007A D004              POP     AR4
007C D003              POP     AR3
007E D002              POP     AR2
0080 D001              POP     AR1
0082 D000              POP     AR0
0084 D0D0              POP     PSW
0086 D000        E     POP     ?C?XPAGE1SFR
0088 D086              POP     DPS
008A D084              POP     DPL1
008C D085              POP     DPH1
008E D082              POP     DPL
0090 D083              POP     DPH
0092 D0F0              POP     B
0094 D0E0              POP     ACC
0096 32                RETI    
             ; FUNCTION lin_timeout_isr (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 195
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 23  

                                           ; SOURCE LINE # 196
                                           ; SOURCE LINE # 197
0000 7BFF              MOV     R3,#0FFH
0002 7A00        R     MOV     R2,#HIGH _?ix1000
0004 7900        R     MOV     R1,#LOW _?ix1000
0006 C003              PUSH    AR3
0008 C002              PUSH    AR2
000A C001              PUSH    AR1
000C 7B01              MOV     R3,#01H
000E 7A00        R     MOV     R2,#HIGH Txbuffer
0010 7900        R     MOV     R1,#LOW Txbuffer
0012 A801              MOV     R0,AR1
0014 AC02              MOV     R4,AR2
0016 AD03              MOV     R5,AR3
0018 D001              POP     AR1
001A D002              POP     AR2
001C D003              POP     AR3
001E 7E00              MOV     R6,#00H
0020 7F0A              MOV     R7,#0AH
0022 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 199
0025 7BFF              MOV     R3,#0FFH
0027 7A00        R     MOV     R2,#HIGH _?ix1001
0029 7900        R     MOV     R1,#LOW _?ix1001
002B C003              PUSH    AR3
002D C002              PUSH    AR2
002F C001              PUSH    AR1
0031 7B01              MOV     R3,#01H
0033 7A00        R     MOV     R2,#HIGH err
0035 7900        R     MOV     R1,#LOW err
0037 A801              MOV     R0,AR1
0039 AC02              MOV     R4,AR2
003B AD03              MOV     R5,AR3
003D D001              POP     AR1
003F D002              POP     AR2
0041 D003              POP     AR3
0043 7E00              MOV     R6,#00H
0045 7F03              MOV     R7,#03H
0047 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 200
004A 900000      R     MOV     DPTR,#rori_sts
004D E4                CLR     A
004E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 201
004F 900000      R     MOV     DPTR,#rori_flag
0052 E4                CLR     A
0053 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 203
0054 900000      R     MOV     DPTR,#cnt
0057 E4                CLR     A
0058 F0                MOVX    @DPTR,A
0059 A3                INC     DPTR
005A E4                CLR     A
005B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 212
005C D2AF              SETB    EA
005E 9044F4            MOV     DPTR,#044F4H
0061 74FD              MOV     A,#0FDH
0063 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 213
0064 120000      E     LCALL   LIN_Start
                                           ; SOURCE LINE # 214
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 24  

0067 120000      E     LCALL   UART_2_Start
                                           ; SOURCE LINE # 215
006A 120000      E     LCALL   PS2_Start
                                           ; SOURCE LINE # 216
006D 120000      E     LCALL   PS2_ClearRxBuffer
                                           ; SOURCE LINE # 218
0070 7E00        R     MOV     R6,#HIGH uart_tx_isr
0072 7F00        R     MOV     R7,#LOW uart_tx_isr
0074 120000      E     LCALL   _uart_tx_isr_StartEx
                                           ; SOURCE LINE # 219
0077 7E00        R     MOV     R6,#HIGH uart_rx_isr
0079 7F00        R     MOV     R7,#LOW uart_rx_isr
007B 120000      E     LCALL   _uart_rx_isr_StartEx
                                           ; SOURCE LINE # 220
007E 7E00        R     MOV     R6,#HIGH lin_timeout_isr
0080 7F00        R     MOV     R7,#LOW lin_timeout_isr
0082 120000      E     LCALL   _lin_timer_isr_StartEx
                                           ; SOURCE LINE # 221
0085 7E00        R     MOV     R6,#HIGH isr_1_isr
0087 7F00        R     MOV     R7,#LOW isr_1_isr
0089 120000      E     LCALL   _isr_1_StartEx
                                           ; SOURCE LINE # 222
008C 120000      E     LCALL   UART_2_EnableTxInt
                                           ; SOURCE LINE # 223
008F 120000      E     LCALL   LIN_EnableRxInt
                                           ; SOURCE LINE # 224
0092 120000      E     LCALL   LIN_EnableTxInt
                                           ; SOURCE LINE # 228
0095         ?C0018:
                                           ; SOURCE LINE # 229
                                           ; SOURCE LINE # 230
0095 7B01              MOV     R3,#01H
0097 7A00        R     MOV     R2,#HIGH PS_data
0099 7900        R     MOV     R1,#LOW PS_data
009B 120000      E     LCALL   _PS_Controller_get
                                           ; SOURCE LINE # 231
009E 900000      R     MOV     DPTR,#PS_data+04H
00A1 E0                MOVX    A,@DPTR
00A2 FF                MOV     R7,A
00A3 900000      R     MOV     DPTR,#omuni
00A6 EF                MOV     A,R7
00A7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 232
00A8 900000      R     MOV     DPTR,#PS_data+05H
00AB E0                MOVX    A,@DPTR
00AC FF                MOV     R7,A
00AD 900000      R     MOV     DPTR,#omuni+01H
00B0 EF                MOV     A,R7
00B1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 233
00B2 7B01              MOV     R3,#01H
00B4 7A00        R     MOV     R2,#HIGH omuni
00B6 7900        R     MOV     R1,#LOW omuni
00B8 120000      R     LCALL   _calcSpeed
                                           ; SOURCE LINE # 234
00BB 120000      E     LCALL   UART_2_ReadTxStatus
00BE EF                MOV     A,R7
00BF 30E165            JNB     ACC.1,?C0020
                                           ; SOURCE LINE # 235
                                           ; SOURCE LINE # 237
00C2 120000      E     LCALL   LIN_Timer_ReadCounter
00C5 7E00              MOV     R6,#00H
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 25  

00C7 900000      E     MOV     DPTR,#?_sprintf?BYTE+0CH
00CA EE                MOV     A,R6
00CB F0                MOVX    @DPTR,A
00CC A3                INC     DPTR
00CD EF                MOV     A,R7
00CE F0                MOVX    @DPTR,A
00CF 7B01              MOV     R3,#01H
00D1 7A00        R     MOV     R2,#HIGH str
00D3 7900        R     MOV     R1,#LOW str
00D5 C003              PUSH    AR3
00D7 C002              PUSH    AR2
00D9 C001              PUSH    AR1
00DB 7BFF              MOV     R3,#0FFH
00DD 7A00        R     MOV     R2,#HIGH ?SC_0
00DF 7900        R     MOV     R1,#LOW ?SC_0
00E1 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
00E4 120000      E     LCALL   ?C?PSTXDATA
00E7 900000      R     MOV     DPTR,#lin_rx_flag
00EA E0                MOVX    A,@DPTR
00EB FF                MOV     R7,A
00EC 7E00              MOV     R6,#00H
00EE 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
00F1 EE                MOV     A,R6
00F2 F0                MOVX    @DPTR,A
00F3 A3                INC     DPTR
00F4 EF                MOV     A,R7
00F5 F0                MOVX    @DPTR,A
00F6 900000      R     MOV     DPTR,#rori_flag
00F9 E0                MOVX    A,@DPTR
00FA FF                MOV     R7,A
00FB 7E00              MOV     R6,#00H
00FD 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
0100 EE                MOV     A,R6
0101 F0                MOVX    @DPTR,A
0102 A3                INC     DPTR
0103 EF                MOV     A,R7
0104 F0                MOVX    @DPTR,A
0105 900000      R     MOV     DPTR,#rori
0108 E0                MOVX    A,@DPTR
0109 FE                MOV     R6,A
010A A3                INC     DPTR
010B E0                MOVX    A,@DPTR
010C FF                MOV     R7,A
010D 900000      E     MOV     DPTR,#?_sprintf?BYTE+0AH
0110 EE                MOV     A,R6
0111 F0                MOVX    @DPTR,A
0112 A3                INC     DPTR
0113 EF                MOV     A,R7
0114 F0                MOVX    @DPTR,A
0115 D001              POP     AR1
0117 D002              POP     AR2
0119 D003              POP     AR3
011B 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 239
011E 7B01              MOV     R3,#01H
0120 7A00        R     MOV     R2,#HIGH str
0122 7900        R     MOV     R1,#LOW str
0124 120000      E     LCALL   _UART_2_PutString
                                           ; SOURCE LINE # 240
0127         ?C0020:
                                           ; SOURCE LINE # 257
0127 120000      R     LCALL   LIN_Master_ReadRxStatus
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 26  

012A EF                MOV     A,R7
012B 30E026            JNB     ACC.0,?C0021
012E 900000      R     MOV     DPTR,#rori_flag
0131 E0                MOVX    A,@DPTR
0132 FF                MOV     R7,A
0133 EF                MOV     A,R7
0134 701E              JNZ     ?C0021
                                           ; SOURCE LINE # 258
                                           ; SOURCE LINE # 259
0136 7B01              MOV     R3,#01H
0138 7A00        R     MOV     R2,#HIGH rori_sts
013A 7900        R     MOV     R1,#LOW rori_sts
013C 7D01              MOV     R5,#01H
013E 7F01              MOV     R7,#01H
0140 120000      R     LCALL   _LIN_Master_GetArray
                                           ; SOURCE LINE # 260
0143 900000      R     MOV     DPTR,#rori_flag
0146 7401              MOV     A,#01H
0148 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 261
0149 900000      R     MOV     DPTR,#cnt
014C E4                CLR     A
014D F0                MOVX    @DPTR,A
014E A3                INC     DPTR
014F E4                CLR     A
0150 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 262
0151 020000      R     LJMP    ?C0018
0154         ?C0021:
                                           ; SOURCE LINE # 263
0154 900000      R     MOV     DPTR,#rori_flag
0157 E0                MOVX    A,@DPTR
0158 FF                MOV     R7,A
0159 EF                MOV     A,R7
015A 6401              XRL     A,#01H
015C 7063              JNZ     ?C0023
                                           ; SOURCE LINE # 264
                                           ; SOURCE LINE # 265
015E 900000      R     MOV     DPTR,#cnt
0161 E0                MOVX    A,@DPTR
0162 FE                MOV     R6,A
0163 A3                INC     DPTR
0164 E0                MOVX    A,@DPTR
0165 FF                MOV     R7,A
0166 C3                CLR     C
0167 EF                MOV     A,R7
0168 9464              SUBB    A,#064H
016A EE                MOV     A,R6
016B 9400              SUBB    A,#00H
016D 500C              JNC     ?C0024
                                           ; SOURCE LINE # 266
                                           ; SOURCE LINE # 267
016F 900000      R     MOV     DPTR,#cnt
0172 E4                CLR     A
0173 75F001            MOV     B,#01H
0176 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 268
0179 800D              SJMP    ?C0025
017B         ?C0024:
                                           ; SOURCE LINE # 270
                                           ; SOURCE LINE # 271
017B 900000      R     MOV     DPTR,#cnt
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 27  

017E E4                CLR     A
017F F0                MOVX    @DPTR,A
0180 A3                INC     DPTR
0181 E4                CLR     A
0182 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 272
0183 900000      R     MOV     DPTR,#rori_flag
0186 E4                CLR     A
0187 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 273
0188         ?C0025:
                                           ; SOURCE LINE # 274
0188 120000      R     LCALL   LIN_Master_ReadRxStatus
018B EF                MOV     A,R7
018C 20E103            JB      ACC.1,$ + 6H
018F 020000      R     LJMP    ?C0018
                                           ; SOURCE LINE # 275
                                           ; SOURCE LINE # 276
0192 900000      R     MOV     DPTR,#rori_sts
0195 E0                MOVX    A,@DPTR
0196 FF                MOV     R7,A
0197 EF                MOV     A,R7
0198 20E01E            JB      ACC.0,?C0027
                                           ; SOURCE LINE # 277
                                           ; SOURCE LINE # 278
019B 7B01              MOV     R3,#01H
019D 7A00        R     MOV     R2,#HIGH Rxbuffer
019F 7900        R     MOV     R1,#LOW Rxbuffer
01A1 7D08              MOV     R5,#08H
01A3 7F00              MOV     R7,#00H
01A5 120000      R     LCALL   _LIN_Master_GetArray
                                           ; SOURCE LINE # 279
01A8 900000      R     MOV     DPTR,#rori_flag
01AB 7402              MOV     A,#02H
01AD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 280
01AE 900000      R     MOV     DPTR,#cnt
01B1 E4                CLR     A
01B2 F0                MOVX    @DPTR,A
01B3 A3                INC     DPTR
01B4 E4                CLR     A
01B5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 281
01B6 020000      R     LJMP    ?C0018
01B9         ?C0027:
                                           ; SOURCE LINE # 283
                                           ; SOURCE LINE # 284
01B9 900000      R     MOV     DPTR,#rori_flag
01BC E4                CLR     A
01BD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 285
                                           ; SOURCE LINE # 286
                                           ; SOURCE LINE # 287
01BE 020000      R     LJMP    ?C0018
01C1         ?C0023:
                                           ; SOURCE LINE # 288
01C1 900000      R     MOV     DPTR,#rori_flag
01C4 E0                MOVX    A,@DPTR
01C5 FF                MOV     R7,A
01C6 EF                MOV     A,R7
01C7 6402              XRL     A,#02H
01C9 706A              JNZ     ?C0030
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 28  

                                           ; SOURCE LINE # 289
                                           ; SOURCE LINE # 290
01CB 900000      R     MOV     DPTR,#cnt
01CE E0                MOVX    A,@DPTR
01CF FE                MOV     R6,A
01D0 A3                INC     DPTR
01D1 E0                MOVX    A,@DPTR
01D2 FF                MOV     R7,A
01D3 C3                CLR     C
01D4 EF                MOV     A,R7
01D5 9464              SUBB    A,#064H
01D7 EE                MOV     A,R6
01D8 9400              SUBB    A,#00H
01DA 500C              JNC     ?C0031
                                           ; SOURCE LINE # 291
                                           ; SOURCE LINE # 292
01DC 900000      R     MOV     DPTR,#cnt
01DF E4                CLR     A
01E0 75F001            MOV     B,#01H
01E3 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 293
01E6 800D              SJMP    ?C0032
01E8         ?C0031:
                                           ; SOURCE LINE # 295
                                           ; SOURCE LINE # 296
01E8 900000      R     MOV     DPTR,#cnt
01EB E4                CLR     A
01EC F0                MOVX    @DPTR,A
01ED A3                INC     DPTR
01EE E4                CLR     A
01EF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 297
01F0 900000      R     MOV     DPTR,#rori_flag
01F3 E4                CLR     A
01F4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 298
01F5         ?C0032:
                                           ; SOURCE LINE # 299
01F5 120000      R     LCALL   LIN_Master_ReadRxStatus
01F8 EF                MOV     A,R7
01F9 20E103            JB      ACC.1,$ + 6H
01FC 020000      R     LJMP    ?C0018
                                           ; SOURCE LINE # 300
                                           ; SOURCE LINE # 301
01FF 900000      R     MOV     DPTR,#Rxbuffer+01H
0202 E0                MOVX    A,@DPTR
0203 FF                MOV     R7,A
0204 7E00              MOV     R6,#00H
0206 EF                MOV     A,R7
0207 7F00              MOV     R7,#00H
0209 FE                MOV     R6,A
020A 900000      R     MOV     DPTR,#Rxbuffer
020D E0                MOVX    A,@DPTR
020E FD                MOV     R5,A
020F 7C00              MOV     R4,#00H
0211 EF                MOV     A,R7
0212 2D                ADD     A,R5
0213 FF                MOV     R7,A
0214 EE                MOV     A,R6
0215 3C                ADDC    A,R4
0216 FE                MOV     R6,A
0217 900000      R     MOV     DPTR,#rori
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 29  

021A EE                MOV     A,R6
021B F0                MOVX    @DPTR,A
021C A3                INC     DPTR
021D EF                MOV     A,R7
021E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 302
021F 7B01              MOV     R3,#01H
0221 7A00        R     MOV     R2,#HIGH PS_data
0223 7900        R     MOV     R1,#LOW PS_data
0225 7D08              MOV     R5,#08H
0227 7F02              MOV     R7,#02H
0229 120000      R     LCALL   _LIN_Master_PutArray
                                           ; SOURCE LINE # 303
022C 900000      R     MOV     DPTR,#rori_flag
022F 7403              MOV     A,#03H
0231 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 305
                                           ; SOURCE LINE # 306
0232 020000      R     LJMP    ?C0018
0235         ?C0030:
                                           ; SOURCE LINE # 307
0235 900000      R     MOV     DPTR,#rori_flag
0238 E0                MOVX    A,@DPTR
0239 FF                MOV     R7,A
023A EF                MOV     A,R7
023B 6403              XRL     A,#03H
023D 6003              JZ      $ + 5H
023F 020000      R     LJMP    ?C0018
                                           ; SOURCE LINE # 308
                                           ; SOURCE LINE # 309
0242 120000      R     LCALL   LIN_Master_ReadTxStatus
0245 EF                MOV     A,R7
0246 6401              XRL     A,#01H
0248 7003              JNZ     $ + 5H
024A 020000      R     LJMP    ?C0018
                                           ; SOURCE LINE # 310
                                           ; SOURCE LINE # 311
024D 900000      R     MOV     DPTR,#rori_flag
0250 E4                CLR     A
0251 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 312
                                           ; SOURCE LINE # 313
                                           ; SOURCE LINE # 323
0252 020000      R     LJMP    ?C0018
0255 22                RET     
             ; FUNCTION main (END)

             ; FUNCTION _LIN_Master_id_send (BEGIN)
                                           ; SOURCE LINE # 326
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 327
                                           ; SOURCE LINE # 328
0005 900000      R     MOV     DPTR,#p0
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 329
000A 900000      R     MOV     DPTR,#p1
000D E4                CLR     A
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 330
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 30  

000F 900000      R     MOV     DPTR,#lin_id_flag
0012 E0                MOVX    A,@DPTR
0013 FF                MOV     R7,A
0014 EF                MOV     A,R7
0015 6003              JZ      $ + 5H
0017 020000      R     LJMP    ?C0038
                                           ; SOURCE LINE # 331
                                           ; SOURCE LINE # 332
001A 900000      R     MOV     DPTR,#id
001D E0                MOVX    A,@DPTR
001E FF                MOV     R7,A
001F EF                MOV     A,R7
0020 C3                CLR     C
0021 13                RRC     A
0022 FF                MOV     R7,A
0023 EF                MOV     A,R7
0024 5401              ANL     A,#01H
0026 FF                MOV     R7,A
0027 900000      R     MOV     DPTR,#id
002A E0                MOVX    A,@DPTR
002B FE                MOV     R6,A
002C EE                MOV     A,R6
002D 5401              ANL     A,#01H
002F FE                MOV     R6,A
0030 EE                MOV     A,R6
0031 6F                XRL     A,R7
0032 FF                MOV     R7,A
0033 900000      R     MOV     DPTR,#id
0036 E0                MOVX    A,@DPTR
0037 FE                MOV     R6,A
0038 EE                MOV     A,R6
0039 13                RRC     A
003A 13                RRC     A
003B 543F              ANL     A,#03FH
003D FE                MOV     R6,A
003E EE                MOV     A,R6
003F 5401              ANL     A,#01H
0041 FE                MOV     R6,A
0042 EF                MOV     A,R7
0043 6E                XRL     A,R6
0044 FF                MOV     R7,A
0045 900000      R     MOV     DPTR,#id
0048 E0                MOVX    A,@DPTR
0049 FE                MOV     R6,A
004A EE                MOV     A,R6
004B C4                SWAP    A
004C 540F              ANL     A,#0FH
004E FE                MOV     R6,A
004F EE                MOV     A,R6
0050 5401              ANL     A,#01H
0052 FE                MOV     R6,A
0053 EF                MOV     A,R7
0054 6E                XRL     A,R6
0055 FF                MOV     R7,A
0056 900000      R     MOV     DPTR,#p0
0059 EF                MOV     A,R7
005A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 333
005B 900000      R     MOV     DPTR,#id
005E E0                MOVX    A,@DPTR
005F FF                MOV     R7,A
0060 EF                MOV     A,R7
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 31  

0061 13                RRC     A
0062 13                RRC     A
0063 13                RRC     A
0064 541F              ANL     A,#01FH
0066 FF                MOV     R7,A
0067 EF                MOV     A,R7
0068 5401              ANL     A,#01H
006A FF                MOV     R7,A
006B 900000      R     MOV     DPTR,#id
006E E0                MOVX    A,@DPTR
006F FE                MOV     R6,A
0070 EE                MOV     A,R6
0071 C3                CLR     C
0072 13                RRC     A
0073 FE                MOV     R6,A
0074 EE                MOV     A,R6
0075 5401              ANL     A,#01H
0077 FE                MOV     R6,A
0078 EE                MOV     A,R6
0079 6F                XRL     A,R7
007A FF                MOV     R7,A
007B 900000      R     MOV     DPTR,#id
007E E0                MOVX    A,@DPTR
007F FE                MOV     R6,A
0080 EE                MOV     A,R6
0081 C4                SWAP    A
0082 540F              ANL     A,#0FH
0084 FE                MOV     R6,A
0085 EE                MOV     A,R6
0086 5401              ANL     A,#01H
0088 FE                MOV     R6,A
0089 EF                MOV     A,R7
008A 6E                XRL     A,R6
008B FF                MOV     R7,A
008C 900000      R     MOV     DPTR,#id
008F E0                MOVX    A,@DPTR
0090 FE                MOV     R6,A
0091 EE                MOV     A,R6
0092 C4                SWAP    A
0093 13                RRC     A
0094 5407              ANL     A,#07H
0096 FE                MOV     R6,A
0097 EE                MOV     A,R6
0098 5401              ANL     A,#01H
009A FE                MOV     R6,A
009B EF                MOV     A,R7
009C 6E                XRL     A,R6
009D FF                MOV     R7,A
009E EF                MOV     A,R7
009F F4                CPL     A
00A0 FF                MOV     R7,A
00A1 900000      R     MOV     DPTR,#p1
00A4 EF                MOV     A,R7
00A5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 334
00A6 900000      R     MOV     DPTR,#p0
00A9 E0                MOVX    A,@DPTR
00AA FF                MOV     R7,A
00AB EF                MOV     A,R7
00AC C4                SWAP    A
00AD 33                RLC     A
00AE 33                RLC     A
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 32  

00AF 54C0              ANL     A,#0C0H
00B1 FF                MOV     R7,A
00B2 EF                MOV     A,R7
00B3 5440              ANL     A,#040H
00B5 FF                MOV     R7,A
00B6 900000      R     MOV     DPTR,#id
00B9 E0                MOVX    A,@DPTR
00BA FE                MOV     R6,A
00BB EE                MOV     A,R6
00BC 543F              ANL     A,#03FH
00BE FE                MOV     R6,A
00BF EE                MOV     A,R6
00C0 4F                ORL     A,R7
00C1 FF                MOV     R7,A
00C2 900000      R     MOV     DPTR,#p1
00C5 E0                MOVX    A,@DPTR
00C6 FE                MOV     R6,A
00C7 EE                MOV     A,R6
00C8 C4                SWAP    A
00C9 33                RLC     A
00CA 33                RLC     A
00CB 33                RLC     A
00CC 5480              ANL     A,#080H
00CE FE                MOV     R6,A
00CF EE                MOV     A,R6
00D0 5480              ANL     A,#080H
00D2 FE                MOV     R6,A
00D3 EF                MOV     A,R7
00D4 4E                ORL     A,R6
00D5 FF                MOV     R7,A
00D6 900000      R     MOV     DPTR,#id
00D9 EF                MOV     A,R7
00DA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 335
00DB 7F03              MOV     R7,#03H
00DD 120000      E     LCALL   _LIN_SendBreak
                                           ; SOURCE LINE # 336
00E0 120000      E     LCALL   LIN_ClearTxBuffer
                                           ; SOURCE LINE # 337
00E3 120000      E     LCALL   LIN_ClearRxBuffer
                                           ; SOURCE LINE # 338
00E6 7F55              MOV     R7,#055H
00E8 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 339
00EB 900000      R     MOV     DPTR,#id
00EE E0                MOVX    A,@DPTR
00EF FF                MOV     R7,A
00F0 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 340
00F3 900000      R     MOV     DPTR,#lin_id_flag
00F6 7401              MOV     A,#01H
00F8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 341
00F9 900000      R     MOV     DPTR,#id
00FC E0                MOVX    A,@DPTR
00FD FF                MOV     R7,A
00FE EF                MOV     A,R7
00FF 54FF              ANL     A,#0FFH
0101 FF                MOV     R7,A
0102 7E00              MOV     R6,#00H
0104 22                RET     
                                           ; SOURCE LINE # 342
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 33  

0105         ?C0038:
                                           ; SOURCE LINE # 344
                                           ; SOURCE LINE # 345
0105 7E01              MOV     R6,#01H
0107 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 346
                                           ; SOURCE LINE # 347
0109         ?C0039:
0109 22                RET     
             ; FUNCTION _LIN_Master_id_send (END)

             ; FUNCTION _LIN_Master_GetArray (BEGIN)
                                           ; SOURCE LINE # 349
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#length
0008 ED                MOV     A,R5
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#buffer
000D 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 350
                                           ; SOURCE LINE # 351
0010 900000      R     MOV     DPTR,#lin_rx_flag
0013 E0                MOVX    A,@DPTR
0014 FF                MOV     R7,A
0015 EF                MOV     A,R7
0016 5401              ANL     A,#01H
0018 FF                MOV     R7,A
0019 900000      R     MOV     DPTR,#lin_tx_flag
001C E0                MOVX    A,@DPTR
001D FE                MOV     R6,A
001E EE                MOV     A,R6
001F 7004              JNZ     ?C0042
0021 7E01              MOV     R6,#01H
0023 8002              SJMP    ?C0043
0025         ?C0042:
0025 7E00              MOV     R6,#00H
0027         ?C0043:
0027 EE                MOV     A,R6
0028 5F                ANL     A,R7
0029 FF                MOV     R7,A
002A EF                MOV     A,R7
002B 7003              JNZ     $ + 5H
002D 020000      R     LJMP    ?C0041
                                           ; SOURCE LINE # 352
                                           ; SOURCE LINE # 353
0030 900000      R     MOV     DPTR,#id
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 120000      R     LCALL   _LIN_Master_id_send
0038 900000      R     MOV     DPTR,#rx_sum
003B EE                MOV     A,R6
003C F0                MOVX    @DPTR,A
003D A3                INC     DPTR
003E EF                MOV     A,R7
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 354
0040 900000      R     MOV     DPTR,#rx_sum
0043 E0                MOVX    A,@DPTR
0044 FE                MOV     R6,A
0045 A3                INC     DPTR
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 34  

0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 EF                MOV     A,R7
0049 B40026            CJNE    A,#00H,?C0044
004C EE                MOV     A,R6
004D B40122            CJNE    A,#01H,?C0044
                                           ; SOURCE LINE # 355
                                           ; SOURCE LINE # 356
0050 900000      R     MOV     DPTR,#lin_rx_flag
0053 E0                MOVX    A,@DPTR
0054 FF                MOV     R7,A
0055 EF                MOV     A,R7
0056 4401              ORL     A,#01H
0058 FF                MOV     R7,A
0059 900000      R     MOV     DPTR,#lin_rx_flag
005C EF                MOV     A,R7
005D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 357
005E 900000      R     MOV     DPTR,#lin_rx_flag
0061 E0                MOVX    A,@DPTR
0062 FF                MOV     R7,A
0063 EF                MOV     A,R7
0064 54FB              ANL     A,#0FBH
0066 FF                MOV     R7,A
0067 900000      R     MOV     DPTR,#lin_rx_flag
006A EF                MOV     A,R7
006B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 358
006C 120000      E     LCALL   LIN_Timer_Stop
                                           ; SOURCE LINE # 359
006F 7F01              MOV     R7,#01H
0071 22                RET     
                                           ; SOURCE LINE # 360
0072         ?C0044:
                                           ; SOURCE LINE # 361
0072 120000      E     LCALL   LIN_ClearRxBuffer
                                           ; SOURCE LINE # 362
0075 900000      R     MOV     DPTR,#length
0078 E0                MOVX    A,@DPTR
0079 FF                MOV     R7,A
007A 900000      R     MOV     DPTR,#rx_length
007D EF                MOV     A,R7
007E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 363
007F 900000      R     MOV     DPTR,#buffer
0082 120000      E     LCALL   ?C?PLDXDATA
0085 900000      R     MOV     DPTR,#rx_buffer
0088 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 364
008B 900000      R     MOV     DPTR,#rx_i
008E E4                CLR     A
008F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 365
0090 900000      R     MOV     DPTR,#lin_rx_sync_flag
0093 E4                CLR     A
0094 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 366
0095 900000      R     MOV     DPTR,#lin_rx_flag
0098 E0                MOVX    A,@DPTR
0099 FF                MOV     R7,A
009A EF                MOV     A,R7
009B 54FE              ANL     A,#0FEH
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 35  

009D FF                MOV     R7,A
009E 900000      R     MOV     DPTR,#lin_rx_flag
00A1 EF                MOV     A,R7
00A2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 367
00A3 900000      R     MOV     DPTR,#lin_rx_flag
00A6 E0                MOVX    A,@DPTR
00A7 FF                MOV     R7,A
00A8 EF                MOV     A,R7
00A9 54FD              ANL     A,#0FDH
00AB FF                MOV     R7,A
00AC 900000      R     MOV     DPTR,#lin_rx_flag
00AF EF                MOV     A,R7
00B0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 368
00B1 900000      R     MOV     DPTR,#lin_rx_flag
00B4 E0                MOVX    A,@DPTR
00B5 FF                MOV     R7,A
00B6 EF                MOV     A,R7
00B7 4404              ORL     A,#04H
00B9 FF                MOV     R7,A
00BA 900000      R     MOV     DPTR,#lin_rx_flag
00BD EF                MOV     A,R7
00BE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 369
00BF 7FFF              MOV     R7,#0FFH
00C1 120000      E     LCALL   _LIN_Timer_WriteCounter
                                           ; SOURCE LINE # 370
00C4 120000      E     LCALL   LIN_Timer_Start
                                           ; SOURCE LINE # 372
00C7 8003              SJMP    ?C0046
00C9         ?C0041:
                                           ; SOURCE LINE # 374
                                           ; SOURCE LINE # 375
00C9 7F01              MOV     R7,#01H
00CB 22                RET     
                                           ; SOURCE LINE # 376
00CC         ?C0046:
                                           ; SOURCE LINE # 377
00CC 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 378
00CE         ?C0045:
00CE 22                RET     
             ; FUNCTION _LIN_Master_GetArray (END)

             ; FUNCTION LIN_Master_ReadRxStatus (BEGIN)
                                           ; SOURCE LINE # 380
                                           ; SOURCE LINE # 381
                                           ; SOURCE LINE # 382
0000 900000      R     MOV     DPTR,#lin_rx_flag
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
0005 900000      R     MOV     DPTR,#flag
0008 EF                MOV     A,R7
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 384
000A 900000      R     MOV     DPTR,#flag
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
                                           ; SOURCE LINE # 385
000F         ?C0047:
000F 22                RET     
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 36  

             ; FUNCTION LIN_Master_ReadRxStatus (END)

             ; FUNCTION LIN_Master_ReadTxStatus (BEGIN)
                                           ; SOURCE LINE # 387
                                           ; SOURCE LINE # 388
                                           ; SOURCE LINE # 389
0000 900000      R     MOV     DPTR,#lin_tx_flag
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
                                           ; SOURCE LINE # 390
0005         ?C0048:
0005 22                RET     
             ; FUNCTION LIN_Master_ReadTxStatus (END)

             ; FUNCTION _LIN_Master_PutArray (BEGIN)
                                           ; SOURCE LINE # 392
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#length
0008 ED                MOV     A,R5
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#buffer
000D 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 393
                                           ; SOURCE LINE # 394
0010 900000      R     MOV     DPTR,#lin_rx_flag
0013 E0                MOVX    A,@DPTR
0014 FF                MOV     R7,A
0015 EF                MOV     A,R7
0016 5401              ANL     A,#01H
0018 FF                MOV     R7,A
0019 900000      R     MOV     DPTR,#lin_tx_flag
001C E0                MOVX    A,@DPTR
001D FE                MOV     R6,A
001E EE                MOV     A,R6
001F 7004              JNZ     ?C0050
0021 7E01              MOV     R6,#01H
0023 8002              SJMP    ?C0051
0025         ?C0050:
0025 7E00              MOV     R6,#00H
0027         ?C0051:
0027 EE                MOV     A,R6
0028 5F                ANL     A,R7
0029 FF                MOV     R7,A
002A EF                MOV     A,R7
002B 7003              JNZ     $ + 5H
002D 020000      R     LJMP    ?C0049
                                           ; SOURCE LINE # 395
                                           ; SOURCE LINE # 397
0030 900000      R     MOV     DPTR,#id
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 120000      R     LCALL   _LIN_Master_id_send
0038 900000      R     MOV     DPTR,#sum
003B EE                MOV     A,R6
003C F0                MOVX    @DPTR,A
003D A3                INC     DPTR
003E EF                MOV     A,R7
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 398
0040 900000      R     MOV     DPTR,#sum
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 37  

0043 E0                MOVX    A,@DPTR
0044 FE                MOV     R6,A
0045 A3                INC     DPTR
0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 EF                MOV     A,R7
0049 B40007            CJNE    A,#00H,?C0052
004C EE                MOV     A,R6
004D B40103            CJNE    A,#01H,?C0052
                                           ; SOURCE LINE # 399
                                           ; SOURCE LINE # 400
0050 7F01              MOV     R7,#01H
0052 22                RET     
                                           ; SOURCE LINE # 401
0053         ?C0052:
                                           ; SOURCE LINE # 403
0053 900000      R     MOV     DPTR,#i
0056 E4                CLR     A
0057 F0                MOVX    @DPTR,A
0058         ?C0054:
0058 900000      R     MOV     DPTR,#length
005B E0                MOVX    A,@DPTR
005C FF                MOV     R7,A
005D 900000      R     MOV     DPTR,#i
0060 E0                MOVX    A,@DPTR
0061 FE                MOV     R6,A
0062 EE                MOV     A,R6
0063 C3                CLR     C
0064 9F                SUBB    A,R7
0065 5040              JNC     ?C0055
                                           ; SOURCE LINE # 404
                                           ; SOURCE LINE # 405
0067 900000      R     MOV     DPTR,#buffer
006A 120000      E     LCALL   ?C?PLDXDATA
006D 900000      R     MOV     DPTR,#i
0070 E0                MOVX    A,@DPTR
0071 FF                MOV     R7,A
0072 E9                MOV     A,R1
0073 2F                ADD     A,R7
0074 F9                MOV     R1,A
0075 E4                CLR     A
0076 3A                ADDC    A,R2
0077 FA                MOV     R2,A
0078 120000      E     LCALL   ?C?CLDPTR
007B FF                MOV     R7,A
007C 7E00              MOV     R6,#00H
007E 900000      R     MOV     DPTR,#sum
0081 EE                MOV     A,R6
0082 8FF0              MOV     B,R7
0084 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 406
0087 900000      R     MOV     DPTR,#buffer
008A 120000      E     LCALL   ?C?PLDXDATA
008D 900000      R     MOV     DPTR,#i
0090 E0                MOVX    A,@DPTR
0091 FF                MOV     R7,A
0092 E9                MOV     A,R1
0093 2F                ADD     A,R7
0094 F9                MOV     R1,A
0095 E4                CLR     A
0096 3A                ADDC    A,R2
0097 FA                MOV     R2,A
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 38  

0098 120000      E     LCALL   ?C?CLDPTR
009B FF                MOV     R7,A
009C 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 408
009F 900000      R     MOV     DPTR,#i
00A2 E0                MOVX    A,@DPTR
00A3 04                INC     A
00A4 F0                MOVX    @DPTR,A
00A5 80B1              SJMP    ?C0054
00A7         ?C0055:
                                           ; SOURCE LINE # 409
00A7 900000      R     MOV     DPTR,#sum
00AA E0                MOVX    A,@DPTR
00AB FE                MOV     R6,A
00AC A3                INC     DPTR
00AD E0                MOVX    A,@DPTR
00AE FF                MOV     R7,A
00AF EE                MOV     A,R6
00B0 FF                MOV     R7,A
00B1 7E00              MOV     R6,#00H
00B3 7E00              MOV     R6,#00H
00B5 EF                MOV     A,R7
00B6 5407              ANL     A,#07H
00B8 FF                MOV     R7,A
00B9 900000      R     MOV     DPTR,#sum
00BC E0                MOVX    A,@DPTR
00BD FC                MOV     R4,A
00BE A3                INC     DPTR
00BF E0                MOVX    A,@DPTR
00C0 FD                MOV     R5,A
00C1 7C00              MOV     R4,#00H
00C3 EF                MOV     A,R7
00C4 2D                ADD     A,R5
00C5 FF                MOV     R7,A
00C6 EE                MOV     A,R6
00C7 3C                ADDC    A,R4
00C8 FE                MOV     R6,A
00C9 EF                MOV     A,R7
00CA F4                CPL     A
00CB FF                MOV     R7,A
00CC EE                MOV     A,R6
00CD F4                CPL     A
00CE FE                MOV     R6,A
00CF 7E00              MOV     R6,#00H
00D1 900000      R     MOV     DPTR,#sum
00D4 EE                MOV     A,R6
00D5 F0                MOVX    @DPTR,A
00D6 A3                INC     DPTR
00D7 EF                MOV     A,R7
00D8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 410
00D9 900000      R     MOV     DPTR,#sum
00DC E0                MOVX    A,@DPTR
00DD FE                MOV     R6,A
00DE A3                INC     DPTR
00DF E0                MOVX    A,@DPTR
00E0 FF                MOV     R7,A
00E1 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 411
00E4 900000      R     MOV     DPTR,#lin_tx_flag
00E7 7401              MOV     A,#01H
00E9 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   MAIN_ISR_2                                                            12/19/2013 18:20:13 PAGE 39  

                                           ; SOURCE LINE # 413
00EA 7F00              MOV     R7,#00H
00EC 22                RET     
                                           ; SOURCE LINE # 414
00ED         ?C0049:
                                           ; SOURCE LINE # 416
                                           ; SOURCE LINE # 417
00ED 7F01              MOV     R7,#01H
                                           ; SOURCE LINE # 418
                                           ; SOURCE LINE # 419
00EF         ?C0053:
00EF 22                RET     
             ; FUNCTION _LIN_Master_PutArray (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2923    ----
   CONSTANT SIZE    =     27    ----
   XDATA SIZE       =     24      92
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
