C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN_ISR_3
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\main_isr_3.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\3.0\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -.\main_isr_3.c NOIV LARGE MODDP2 OMF2 VB(1) PR(.\DP8051\DP8051_Keil_951\Debug\main_isr_3.lst) CD DB NOIP OT(2,SIZE) DF(D
                    -EBUG) INCDIR(.,.\Generated_Source\PSoC3) OJ(.\DP8051\DP8051_Keil_951\Debug\main_isr_3.obj)

line level    source

   1          
   2          #include <project.h>
   3          #include <stdio.h>
   4          
   5          #include "ps2_controller.h"
   6          #include <math.h>
   7          
   8          
   9          // lin define
  10          #define LIN_RX_EMPTY            0x01
  11          #define LIN_RX_COMPLETE         0x02
  12          #define LIN_RX_SEND             0x04
  13          #define LIN_RX_SUM_ERR          0x08
  14          #define LIN_RX_TIMEOUT_ERR  0x10
  15          #define LIN_TX_SEND     1
  16          
  17          // lin method
  18          uint16 LIN_Master_id_send(uint8 id);
  19          uint8 LIN_Master_GetArray(uint8 id,uint8 length,uint8* buffer);
  20          uint8 LIN_Master_ReadRxStatus(void);
  21          uint8 LIN_Master_PutArray(uint8 id,uint8 length,uint8* const buffer);
  22          uint8 LIN_Master_ReadTxStatus(void);
  23          
  24          // air method
  25          
  26          //void air(uint8 air_1,uint8 air_2,uint8 air_3,uint8 air_4, uint8 air_5,uint8 air_6,uint8 air_7,uint8 air_
             -8);
  27          
  28          void air(uint8 arm_left, uint8 arm_right, uint8 pol); // 0 = Close, 1 = Open
  29          
  30          // lin value
  31          uint8 lin_id_flag;
  32          uint8 lin_tx_flag = 0;
  33          uint8 lin_rx_flag = 1;
  34          uint8 lin_rx_sync_flag;
  35          uint16 rx_sum;
  36          uint8 rx_length;
  37          uint8* rx_buffer;
  38          uint8 rx_i;
  39          uint8 i;
  40          
  41          uint8 Rxbuffer[10] = {0};
  42          uint16 rori;
  43          
  44          
  45          
  46          /*
  47          CY_ISR(isr_1_isr)
  48          {
  49                  //LIN_Master_GetArray(0,8,Rxbuffer);
  50          }
  51          */
  52          CY_ISR(uart_tx_isr)
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 2   

  53          {
  54   1              if(LIN_ReadTxStatus() & LIN_TX_STS_FIFO_EMPTY)
  55   1              {
  56   2                      if(lin_id_flag == 1)
  57   2                      {
  58   3                              lin_id_flag = 0;
  59   3                      }
  60   2                      if(lin_tx_flag == LIN_TX_SEND)
  61   2                      {
  62   3                              lin_tx_flag = 0;
  63   3                      }
  64   2              }
  65   1      }
  66          
  67          CY_ISR(uart_rx_isr)
  68          {
  69   1              if(lin_rx_flag & LIN_RX_SEND)
  70   1              {
  71   2                      if(rx_i < rx_length)
  72   2                      {
  73   3                              rx_buffer[rx_i] = LIN_GetByte() & 0xff;
  74   3                              
  75   3                              if(lin_rx_sync_flag == 0)
  76   3                              {
  77   4                                      /*
  78   4                                      if(rx_buffer[rx_i] == 0x55)
  79   4                                      {
  80   4                                              return;
  81   4                                      }
  82   4                                      */
  83   4                                      lin_rx_sync_flag = 1;
  84   4                                      return;
  85   4                              }
  86   3                              
  87   3                              else if(lin_rx_sync_flag == 1)
  88   3                              {
  89   4                                      /*
  90   4                                      if(rx_buffer[rx_i] == rx_sum)
  91   4                                      {
  92   4                                              return;
  93   4                                      }
  94   4                                      */
  95   4                                      lin_rx_sync_flag = 2;
  96   4                                      return;
  97   4                              }
  98   3                              
  99   3                              rx_sum += rx_buffer[rx_i];
 100   3                              rx_i++;
 101   3                      }
 102   2                      else
 103   2                      {
 104   3                              LIN_Timer_Stop();
 105   3                              rx_sum = 0xff & (~( ((rx_sum >> 8) & 0xf) + (rx_sum & 0xff)));
 106   3                              if((rx_sum & 0xff) == (LIN_GetByte() & 0xff))
 107   3                              {
 108   4                                      lin_rx_flag &= ~LIN_RX_SEND;
 109   4                                      lin_rx_flag &= ~LIN_RX_SUM_ERR;
 110   4                                      lin_rx_flag &= ~LIN_RX_TIMEOUT_ERR;
 111   4                                      lin_rx_flag |= LIN_RX_COMPLETE;
 112   4                                      lin_rx_flag |= LIN_RX_EMPTY;
 113   4                              }
 114   3                              else
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 3   

 115   3                              {
 116   4                                      lin_rx_flag &= ~LIN_RX_SEND;
 117   4                                      lin_rx_flag &= ~LIN_RX_COMPLETE;
 118   4                                      lin_rx_flag |= LIN_RX_EMPTY;
 119   4                                      lin_rx_flag |= LIN_RX_SUM_ERR;
 120   4                              }
 121   3                      }
 122   2              }
 123   1      }
 124          
 125          CY_ISR(lin_timeout_isr)
 126          {
 127   1              //char str[40];
 128   1              if(lin_rx_flag & LIN_RX_SEND)
 129   1              {
 130   2                      /*
 131   2                      while(1)
 132   2                      {
 133   2                              if(UART_2_ReadTxStatus() & UART_2_TX_STS_FIFO_EMPTY)
 134   2                              {
 135   2                                      sprintf(str,"err %x \n",(int)lin_rx_flag);
 136   2                                      UART_2_PutString(str);
 137   2                              }
 138   2                      }
 139   2                      */
 140   2                      LIN_Timer_WriteCounter(255);
 141   2                      LIN_Timer_Stop();
 142   2                      lin_rx_flag &= ~LIN_RX_SEND;
 143   2                      lin_rx_flag &= ~LIN_RX_COMPLETE;
 144   2                      lin_rx_flag |= LIN_RX_EMPTY;
 145   2                      lin_rx_flag |= LIN_RX_TIMEOUT_ERR;
 146   2                      /*
 147   2                      LIN_Stop();
 148   2                      LIN_Start();
 149   2                      LIN_EnableRxInt();
 150   2                      LIN_EnableTxInt();
 151   2                      LIN_ClearRxBuffer();
 152   2                      LIN_ClearTxBuffer();
 153   2                      lin_rx_flag = LIN_RX_EMPTY;
 154   2                      lin_id_flag = 0;
 155   2                      lin_tx_flag = 0;
 156   2                      lin_rx_sync_flag = 0;
 157   2                      rx_sum = 0;
 158   2                      rx_length = 0;
 159   2                      rx_buffer = 0;
 160   2                      rx_i = 0;
 161   2                      */
 162   2                      /*
 163   2                      sprintf(str,"err\n");
 164   2                      UART_2_PutString(str);
 165   2                      */
 166   2              }
 167   1      }
 168          
 169          
 170          
 171          int main()
 172          {
 173   1              uint8 Txbuffer[10] = {100,9,9,9,9,9,9,9};
 174   1      
 175   1              uint8 err[3] = {0};
 176   1              uint8 put_data[6] = {0};
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 4   

 177   1              uint8 rori_sts = 0;
 178   1              uint8 rori_flag = 0;
 179   1              char str[30];
 180   1              uint16 cnt = 0;
 181   1          
 182   1          // lin local
 183   1          uint8 send_data;
 184   1              
 185   1          // air value
 186   1          uint8 air_1 = 0,air_2 = 0,air_3 = 0;
 187   1          uint8 air_data=0;
 188   1          uint8 i = 0,j = 0,k = 0,x=0;
 189   1          uint8 air_flag_1 = 0;
 190   1          uint8 air_flag_2 = 0;
 191   1          uint8 air_flag_3 = 0;
 192   1          
 193   1              
 194   1          // motor value
 195   1          volatile uint8 motor_data[3] = {0};
 196   1          
 197   1          uint8 motor_1_rail = 0;  // 0:Brale 1:Left 2:Right
 198   1          uint8 motor_1_wrist = 32; // 0 ~ 64
 199   1          
 200   1          uint8 motor_2_rail = 0;  // 0:Brale 1:Left 2:Right
 201   1          uint8 motor_2_wrist = 32; // 0 ~ 64
 202   1          
 203   1          uint8 motor_c_wrist = 32; // 0 ~ 64
 204   1          
 205   1          // limit value
 206   1          uint8 limit_data = 0;
 207   1          
 208   1              // ps2 controller data
 209   1              uint8 PS_data[10];
 210   1              
 211   1              
 212   1          CyGlobalIntEnable;  /* Uncomment this line to enable global interrupts. */
 213   1          LIN_Start();
 214   1              UART_2_Start();
 215   1              PS2_Start();
 216   1          PS2_ClearRxBuffer();
 217   1              
 218   1              uart_tx_isr_StartEx(uart_tx_isr);
 219   1              uart_rx_isr_StartEx(uart_rx_isr);
 220   1              lin_timer_isr_StartEx(lin_timeout_isr);
 221   1      //      isr_1_StartEx(isr_1_isr);
 222   1              UART_2_EnableTxInt();
 223   1              LIN_EnableRxInt();
 224   1              LIN_EnableTxInt();
 225   1              
 226   1              //LIN_Master_PutArray(2,8,Txbuffer);
 227   1              
 228   1              
 229   1              for(;;)
 230   1              {
 231   2                      PS_Controller_get(PS_data);
 232   2      
 233   2      //        air(1,1,0,0,0,0,0,0);
 234   2              //CyDelay(1000);
 235   2              //air(0,0,0,0,0,1,1,1);
 236   2              //CyDelay(1000);
 237   2      
 238   2                      if(UART_2_ReadTxStatus() & UART_2_TX_STS_FIFO_EMPTY)
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 5   

 239   2                      {
 240   3                              //sprintf(str,"%x %d %4d %d %d\n",(int)lin_rx_flag,(int)rori_flag,(int16)rori,(int)LIN_Timer_ReadCounte
             -r(),(int)rail_data);
 241   3                              //sprintf(str,"%2x %2x L:%2x,%2x R:%2x,%2x\n",(int16)PS_data[0],(int16)PS_data[1],(int16)PS_data[4],(in
             -t16)PS_data[5],(int16)PS_data[2],(int16)PS_data[3]);
 242   3                              sprintf(str,"motor_data[0]:%d\n",(int16)motor_data[0]);
 243   3                  //sprintf(str, "arm_left = %d, arm_right = %d, pol = %d\n", (int)square, (int)circle, (int)tri
             -angle);
 244   3                  UART_2_PutString(str);
 245   3                      }
 246   2                      
 247   2              // rail move
 248   2              if(right)
 249   2              {
 250   3                  if(!l1 && r1)
 251   3                  {
 252   4                      motor_1_rail = 2;
 253   4                  }
 254   3                  else if(!r1 && l1)
 255   3                  {
 256   4                      motor_2_rail = 2;
 257   4                  }
 258   3              }
 259   2              else if(left)
 260   2              {
 261   3                  if(!l1 && r1)
 262   3                  {
 263   4                      motor_1_rail = 1;
 264   4                  }
 265   3                  else if(!r1 && l1)
 266   3                  {
 267   4                      motor_2_rail = 1;
 268   4                  }
 269   3              }
 270   2              else
 271   2              {
 272   3                  motor_1_rail = 0;
 273   3                  motor_2_rail = 0;
 274   3              }
 275   2              
 276   2              // wrist
 277   2              /*
 278   2              if(analog_r_x > (127+40)) // right
 279   2              {
 280   2                  motor_1_wrist = 2;
 281   2              }
 282   2              else if(analog_r_x < (127-40)) // left
 283   2              {
 284   2                  motor_1_wrist = 1;
 285   2              }
 286   2              else
 287   2              {
 288   2                  motor_1_wrist = 0;
 289   2              }
 290   2              
 291   2                      if(analog_l_x > (127+40))
 292   2              {
 293   2                  motor_2_wrist = 2;
 294   2              }
 295   2              else if(analog_l_x < (127-40))
 296   2              {
 297   2                  motor_2_wrist = 1;
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 6   

 298   2              }
 299   2              */
 300   2              if(analog_r_x > (127+40)) // right
 301   2              {
 302   3                  if(motor_1_wrist > 0)
 303   3                  {
 304   4                      motor_1_wrist--;
 305   4                  }
 306   3              }
 307   2              else if(analog_r_x < (127-40)) // left
 308   2              {
 309   3                  if(motor_1_wrist < 63)
 310   3                  {
 311   4                      motor_1_wrist++;
 312   4                  }
 313   3              }
 314   2              
 315   2                      if(analog_l_x > (127+40))
 316   2              {
 317   3                  if(motor_2_wrist > 0)
 318   3                  {
 319   4                      motor_2_wrist--;
 320   4                  }
 321   3              }
 322   2              else if(analog_l_x < (127-40))
 323   2              {
 324   3                  if(motor_2_wrist < 63)
 325   3                  {
 326   4                      motor_2_wrist++;
 327   4                  }
 328   3              }
 329   2              
 330   2              if(!l2 && r2)
 331   2              {
 332   3                  if(motor_c_wrist > 0)
 333   3                  {
 334   4                      motor_c_wrist--;
 335   4                  }
 336   3              }
 337   2              else if(l2 && !r2)
 338   2              {
 339   3                  if(motor_c_wrist < 63)
 340   3                  {
 341   4                      motor_c_wrist++;
 342   4                  }
 343   3              }
 344   2              
 345   2              // air
 346   2              if(square)
 347   2              {
 348   3                  if(air_flag_1)
 349   3                  {
 350   4                      if(air_1)
 351   4                      {
 352   5                          air_1 = 0;
 353   5                      }
 354   4                      else
 355   4                      {
 356   5                          air_1 = 1;
 357   5                      }
 358   4                      air_flag_1 = 0;
 359   4                  }
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 7   

 360   3              }
 361   2              else
 362   2              {
 363   3                  air_flag_1 = 1;
 364   3              }
 365   2              if(circle)
 366   2              {
 367   3                  if(air_flag_2)
 368   3                  {
 369   4                      if(air_2)
 370   4                      {
 371   5                          air_2 = 0;
 372   5                      }
 373   4                      else
 374   4                      {
 375   5                          air_2 = 1;
 376   5                      }
 377   4                      air_flag_2 = 0;
 378   4                  }
 379   3              }
 380   2              else
 381   2              {
 382   3                  air_flag_2 = 1;
 383   3              }
 384   2              if(triangle)
 385   2              {
 386   3                  if(air_flag_3)
 387   3                  {
 388   4                      if(air_3)
 389   4                      {
 390   5                          air_3 = 0;
 391   5                      }
 392   4                      else
 393   4                      {
 394   5                          air_3 = 1;
 395   5                      }
 396   4                      air_flag_3 = 0;
 397   4                  }
 398   3              }
 399   2              else
 400   2              {
 401   3                  air_flag_3 = 1;
 402   3              }
 403   2              air(air_1,air_2,air_3);
 404   2              
 405   2                      // LIN送信 
 406   2              if(LIN_Master_ReadTxStatus() != LIN_TX_SEND)
 407   2                      {
 408   3                              if(send_data == 0)    // motor
 409   3                              {
 410   4                      motor_data[0] = ((motor_1_rail << 6) & 0xc0) | (motor_1_wrist & 0x3f);
 411   4                                      motor_data[1] = ((motor_2_rail << 6) & 0xc0) | (motor_2_wrist & 0x3f);
 412   4                      motor_data[2] = motor_c_wrist & 0x3f;
 413   4                      LIN_Master_PutArray(2,3,motor_data);
 414   4                      send_data = 1;
 415   4                              }
 416   3                              if(send_data == 1)  // limit switch
 417   3                              {
 418   4                                      //LIN_Master_PutArray(3, 1, &limit_data);
 419   4                      send_data = 0;
 420   4                              }
 421   3                      }
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 8   

 422   2          }
 423   1      }
 424          
 425          uint16 LIN_Master_id_send(uint8 id)
 426          {
 427   1              uint8 p0 = 0;
 428   1              uint8 p1 = 0;
 429   1              if(lin_id_flag == 0)
 430   1              {
 431   2                      p0 = (id&0x01)^((id >> 1)&0x01)^((id >> 2)&0x01)^((id >> 4)&0x01);
 432   2                      p1 = ~(((id >> 1)&0x01)^((id >> 3)&0x01)^((id >> 4)&0x01)^((id >> 5)&0x01));
 433   2                      id = (id&0x3f)|((p0 << 6)&0x40)|((p1 << 7)&0x80);
 434   2                      LIN_SendBreak(LIN_SEND_WAIT_REINIT);
 435   2                      LIN_ClearTxBuffer();
 436   2                      LIN_ClearRxBuffer();
 437   2                      LIN_PutChar(0x55);
 438   2                      LIN_PutChar(id);
 439   2                      lin_id_flag = 1;
 440   2                      return 0xff&id;
 441   2              }
 442   1              else
 443   1              {
 444   2                      return 0x100;
 445   2              }
 446   1      }
 447          
 448          uint8 LIN_Master_GetArray(uint8 id,uint8 length,uint8* buffer)
 449          {
 450   1              if((lin_rx_flag & LIN_RX_EMPTY) &(lin_tx_flag == 0))
 451   1              {
 452   2                      rx_sum = LIN_Master_id_send(id);
 453   2                      if(rx_sum == 0x100)
 454   2                      {
 455   3                              lin_rx_flag |= LIN_RX_EMPTY;
 456   3                              lin_rx_flag &= ~LIN_RX_SEND;
 457   3                              LIN_Timer_Stop();
 458   3                              return 1;
 459   3                      }               
 460   2                      LIN_ClearRxBuffer();
 461   2                      rx_length = length;
 462   2                      rx_buffer = buffer;
 463   2                      rx_i = 0;
 464   2                      lin_rx_sync_flag = 0;
 465   2                      lin_rx_flag &= ~LIN_RX_EMPTY;
 466   2                      lin_rx_flag &= ~LIN_RX_COMPLETE;
 467   2                      lin_rx_flag |= LIN_RX_SEND;
 468   2                      LIN_Timer_WriteCounter(255);
 469   2                      LIN_Timer_Start();
 470   2      
 471   2              }
 472   1              else
 473   1              {
 474   2                      return 1;
 475   2              }
 476   1              return 0;
 477   1      }
 478          
 479          uint8 LIN_Master_ReadRxStatus()
 480          {
 481   1              uint8 flag = lin_rx_flag;
 482   1              //lin_rx_flag &= ~LIN_RX_SUM_ERR; 
 483   1              return flag;
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 9   

 484   1      }
 485          
 486          uint8 LIN_Master_ReadTxStatus()
 487          {
 488   1              return lin_tx_flag;
 489   1      }
 490          
 491          uint8 LIN_Master_PutArray(uint8 id, uint8 length, uint8 *buffer)
 492          {
 493   1              if((lin_tx_flag == 0) & (lin_rx_flag & LIN_RX_EMPTY))
 494   1              {
 495   2                      uint8 i;
 496   2                      uint16 sum = LIN_Master_id_send(id);
 497   2                      if(sum == 0x100)
 498   2                      {
 499   3                              return 1;
 500   3                      }
 501   2                      
 502   2                      //LIN_ClearTxBuffer();
 503   2                      for(i = 0; i < length; i++)
 504   2                      {
 505   3                              sum += buffer[i];
 506   3                              LIN_PutChar(buffer[i]);
 507   3                              //while(!(LIN_ReadTxStatus() & LIN_TX_STS_COMPLETE));   
 508   3                      }
 509   2                      
 510   2                      sum = 0xff & (~( ((sum >> 8) & 0x7) + (sum & 0xff)));
 511   2                      LIN_PutChar(sum);
 512   2                      lin_tx_flag = LIN_TX_SEND;
 513   2                      //while(!(LIN_ReadTxStatus() & LIN_TX_STS_COMPLETE));
 514   2                      return 0;
 515   2              }
 516   1              else
 517   1              {
 518   2                      return 1;
 519   2              }
 520   1      }
 521          
 522          void air(uint8 arm_left, uint8 arm_right, uint8 pol)
 523          {
 524   1          if(arm_left) // left
 525   1          {
 526   2              air_2_Write(1);
 527   2              air_7_Write(0);
 528   2          }
 529   1          else
 530   1          {
 531   2              air_2_Write(0);
 532   2              air_7_Write(1);        
 533   2          }
 534   1          
 535   1          if(arm_right) // right
 536   1          {
 537   2              air_1_Write(1);
 538   2              air_8_Write(0);            
 539   2          }
 540   1          else
 541   1          {
 542   2              air_1_Write(0);
 543   2              air_8_Write(1);        
 544   2          }
 545   1          
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 10  

 546   1          if(pol) // pol
 547   1          {
 548   2              air_3_Write(1);
 549   2              air_6_Write(0);
 550   2          }
 551   1          else
 552   1          {
 553   2              air_3_Write(0);
 554   2              air_6_Write(1);        
 555   2         
 556   2          }
 557   1      }
 558          
 559          /*
 560          void air(uint8 air_1,uint8 air_2,uint8 air_3,uint8 air_4, uint8 air_5,uint8 air_6,uint8 air_7,uint8 air_8)
 561          {
 562              if(air_1)
 563                  {
 564                          air_1_Write(1);
 565                  }
 566                  else
 567                  {
 568                          air_1_Write(0);          
 569                  }
 570              if(air_2)
 571                  {
 572                          air_2_Write(1);
 573                  }
 574                  else
 575                  {
 576                          air_2_Write(0);          
 577                  }
 578              if(air_3)
 579                  {
 580                          air_3_Write(1);
 581                  }
 582                  else
 583                  {
 584                          air_3_Write(0);          
 585                  }
 586              if(air_4)
 587                  {
 588                          air_4_Write(1);
 589                  }
 590                  else
 591                  {
 592                          air_4_Write(0);          
 593                  }
 594              if(air_5)
 595                  {
 596                          air_5_Write(1);
 597                  }
 598                  else
 599                  {
 600                          air_5_Write(0);          
 601                  }
 602              if(air_6)
 603                  {
 604                          air_6_Write(1);
 605                  }
 606                  else
 607                  {
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 11  

 608                          air_6_Write(0);          
 609                  }
 610              if(air_7)
 611                  {
 612                          air_7_Write(1);
 613                  }
 614                  else
 615                  {
 616                          air_7_Write(0);          
 617                  }
 618              if(air_8)
 619                  {
 620                          air_8_Write(1);
 621                  }
 622                  else
 623                  {
 624                          air_8_Write(0);          
 625                  }
 626          }
 627          */
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 12  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION uart_tx_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 52
                                           ; SOURCE LINE # 54
002B 120000      E     LCALL   LIN_ReadTxStatus
002E EF                MOV     A,R7
002F 30E11C            JNB     ACC.1,?C0004
                                           ; SOURCE LINE # 55
                                           ; SOURCE LINE # 56
0032 900000      R     MOV     DPTR,#lin_id_flag
0035 E0                MOVX    A,@DPTR
0036 FF                MOV     R7,A
0037 EF                MOV     A,R7
0038 B40105            CJNE    A,#01H,?C0002
                                           ; SOURCE LINE # 57
                                           ; SOURCE LINE # 58
003B 900000      R     MOV     DPTR,#lin_id_flag
003E E4                CLR     A
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 59
0040         ?C0002:
                                           ; SOURCE LINE # 60
0040 900000      R     MOV     DPTR,#lin_tx_flag
0043 E0                MOVX    A,@DPTR
0044 FF                MOV     R7,A
0045 EF                MOV     A,R7
0046 B40105            CJNE    A,#01H,?C0004
                                           ; SOURCE LINE # 61
                                           ; SOURCE LINE # 62
0049 900000      R     MOV     DPTR,#lin_tx_flag
004C E4                CLR     A
004D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 63
                                           ; SOURCE LINE # 64
                                           ; SOURCE LINE # 65
004E         ?C0004:
004E D007              POP     AR7
0050 D006              POP     AR6
0052 D005              POP     AR5
0054 D004              POP     AR4
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 13  

0056 D003              POP     AR3
0058 D002              POP     AR2
005A D001              POP     AR1
005C D000              POP     AR0
005E D0D0              POP     PSW
0060 D000        E     POP     ?C?XPAGE1SFR
0062 D086              POP     DPS
0064 D084              POP     DPL1
0066 D085              POP     DPH1
0068 D082              POP     DPL
006A D083              POP     DPH
006C D0F0              POP     B
006E D0E0              POP     ACC
0070 32                RETI    
             ; FUNCTION uart_tx_isr (END)

             ; FUNCTION uart_rx_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 67
                                           ; SOURCE LINE # 69
002B 900000      R     MOV     DPTR,#lin_rx_flag
002E E0                MOVX    A,@DPTR
002F FF                MOV     R7,A
0030 EF                MOV     A,R7
0031 20E203            JB      ACC.2,$ + 6H
0034 020000      R     LJMP    ?C0008
                                           ; SOURCE LINE # 70
                                           ; SOURCE LINE # 71
0037 900000      R     MOV     DPTR,#rx_length
003A E0                MOVX    A,@DPTR
003B FF                MOV     R7,A
003C 900000      R     MOV     DPTR,#rx_i
003F E0                MOVX    A,@DPTR
0040 FE                MOV     R6,A
0041 EE                MOV     A,R6
0042 C3                CLR     C
0043 9F                SUBB    A,R7
0044 5068              JNC     ?C0006
                                           ; SOURCE LINE # 72
                                           ; SOURCE LINE # 73
0046 120000      E     LCALL   LIN_GetByte
0049 EF                MOV     A,R7
004A 54FF              ANL     A,#0FFH
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 14  

004C FF                MOV     R7,A
004D 900000      R     MOV     DPTR,#rx_buffer
0050 120000      E     LCALL   ?C?PLDXDATA
0053 900000      R     MOV     DPTR,#rx_i
0056 E0                MOVX    A,@DPTR
0057 FE                MOV     R6,A
0058 E9                MOV     A,R1
0059 2E                ADD     A,R6
005A F9                MOV     R1,A
005B E4                CLR     A
005C 3A                ADDC    A,R2
005D FA                MOV     R2,A
005E EF                MOV     A,R7
005F 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 75
0062 900000      R     MOV     DPTR,#lin_rx_sync_flag
0065 E0                MOVX    A,@DPTR
0066 FF                MOV     R7,A
0067 EF                MOV     A,R7
0068 7009              JNZ     ?C0007
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 83
006A 900000      R     MOV     DPTR,#lin_rx_sync_flag
006D 7401              MOV     A,#01H
006F F0                MOVX    @DPTR,A
0070 020000      R     LJMP    ?C0008
                                           ; SOURCE LINE # 85
0073         ?C0007:
                                           ; SOURCE LINE # 87
0073 900000      R     MOV     DPTR,#lin_rx_sync_flag
0076 E0                MOVX    A,@DPTR
0077 FF                MOV     R7,A
0078 EF                MOV     A,R7
0079 B40109            CJNE    A,#01H,?C0009
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 95
007C 900000      R     MOV     DPTR,#lin_rx_sync_flag
007F 7402              MOV     A,#02H
0081 F0                MOVX    @DPTR,A
0082 020000      R     LJMP    ?C0008
                                           ; SOURCE LINE # 97
0085         ?C0009:
                                           ; SOURCE LINE # 99
0085 900000      R     MOV     DPTR,#rx_buffer
0088 120000      E     LCALL   ?C?PLDXDATA
008B 900000      R     MOV     DPTR,#rx_i
008E E0                MOVX    A,@DPTR
008F FF                MOV     R7,A
0090 E9                MOV     A,R1
0091 2F                ADD     A,R7
0092 F9                MOV     R1,A
0093 E4                CLR     A
0094 3A                ADDC    A,R2
0095 FA                MOV     R2,A
0096 120000      E     LCALL   ?C?CLDPTR
0099 FF                MOV     R7,A
009A 7E00              MOV     R6,#00H
009C 900000      R     MOV     DPTR,#rx_sum
009F EE                MOV     A,R6
00A0 8FF0              MOV     B,R7
00A2 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 100
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 15  

00A5 900000      R     MOV     DPTR,#rx_i
00A8 E0                MOVX    A,@DPTR
00A9 04                INC     A
00AA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 101
00AB 020000      R     LJMP    ?C0008
00AE         ?C0006:
                                           ; SOURCE LINE # 103
                                           ; SOURCE LINE # 104
00AE 120000      E     LCALL   LIN_Timer_Stop
                                           ; SOURCE LINE # 105
00B1 900000      R     MOV     DPTR,#rx_sum
00B4 E0                MOVX    A,@DPTR
00B5 FE                MOV     R6,A
00B6 A3                INC     DPTR
00B7 E0                MOVX    A,@DPTR
00B8 FF                MOV     R7,A
00B9 EE                MOV     A,R6
00BA FF                MOV     R7,A
00BB 7E00              MOV     R6,#00H
00BD 7E00              MOV     R6,#00H
00BF EF                MOV     A,R7
00C0 540F              ANL     A,#0FH
00C2 FF                MOV     R7,A
00C3 900000      R     MOV     DPTR,#rx_sum
00C6 E0                MOVX    A,@DPTR
00C7 FC                MOV     R4,A
00C8 A3                INC     DPTR
00C9 E0                MOVX    A,@DPTR
00CA FD                MOV     R5,A
00CB 7C00              MOV     R4,#00H
00CD EF                MOV     A,R7
00CE 2D                ADD     A,R5
00CF FF                MOV     R7,A
00D0 EE                MOV     A,R6
00D1 3C                ADDC    A,R4
00D2 FE                MOV     R6,A
00D3 EF                MOV     A,R7
00D4 F4                CPL     A
00D5 FF                MOV     R7,A
00D6 EE                MOV     A,R6
00D7 F4                CPL     A
00D8 FE                MOV     R6,A
00D9 7E00              MOV     R6,#00H
00DB 900000      R     MOV     DPTR,#rx_sum
00DE EE                MOV     A,R6
00DF F0                MOVX    @DPTR,A
00E0 A3                INC     DPTR
00E1 EF                MOV     A,R7
00E2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 106
00E3 120000      E     LCALL   LIN_GetByte
00E6 7E00              MOV     R6,#00H
00E8 900000      R     MOV     DPTR,#rx_sum
00EB E0                MOVX    A,@DPTR
00EC FC                MOV     R4,A
00ED A3                INC     DPTR
00EE E0                MOVX    A,@DPTR
00EF FD                MOV     R5,A
00F0 7C00              MOV     R4,#00H
00F2 ED                MOV     A,R5
00F3 6F                XRL     A,R7
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 16  

00F4 7002              JNZ     ?C0102
00F6 EC                MOV     A,R4
00F7 6E                XRL     A,R6
00F8         ?C0102:
00F8 7048              JNZ     ?C0012
                                           ; SOURCE LINE # 107
                                           ; SOURCE LINE # 108
00FA 900000      R     MOV     DPTR,#lin_rx_flag
00FD E0                MOVX    A,@DPTR
00FE FF                MOV     R7,A
00FF EF                MOV     A,R7
0100 54FB              ANL     A,#0FBH
0102 FF                MOV     R7,A
0103 900000      R     MOV     DPTR,#lin_rx_flag
0106 EF                MOV     A,R7
0107 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 109
0108 900000      R     MOV     DPTR,#lin_rx_flag
010B E0                MOVX    A,@DPTR
010C FF                MOV     R7,A
010D EF                MOV     A,R7
010E 54F7              ANL     A,#0F7H
0110 FF                MOV     R7,A
0111 900000      R     MOV     DPTR,#lin_rx_flag
0114 EF                MOV     A,R7
0115 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 110
0116 900000      R     MOV     DPTR,#lin_rx_flag
0119 E0                MOVX    A,@DPTR
011A FF                MOV     R7,A
011B EF                MOV     A,R7
011C 54EF              ANL     A,#0EFH
011E FF                MOV     R7,A
011F 900000      R     MOV     DPTR,#lin_rx_flag
0122 EF                MOV     A,R7
0123 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 111
0124 900000      R     MOV     DPTR,#lin_rx_flag
0127 E0                MOVX    A,@DPTR
0128 FF                MOV     R7,A
0129 EF                MOV     A,R7
012A 4402              ORL     A,#02H
012C FF                MOV     R7,A
012D 900000      R     MOV     DPTR,#lin_rx_flag
0130 EF                MOV     A,R7
0131 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 112
0132 900000      R     MOV     DPTR,#lin_rx_flag
0135 E0                MOVX    A,@DPTR
0136 FF                MOV     R7,A
0137 EF                MOV     A,R7
0138 4401              ORL     A,#01H
013A FF                MOV     R7,A
013B 900000      R     MOV     DPTR,#lin_rx_flag
013E EF                MOV     A,R7
013F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 113
0140 8038              SJMP    ?C0008
0142         ?C0012:
                                           ; SOURCE LINE # 115
                                           ; SOURCE LINE # 116
0142 900000      R     MOV     DPTR,#lin_rx_flag
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 17  

0145 E0                MOVX    A,@DPTR
0146 FF                MOV     R7,A
0147 EF                MOV     A,R7
0148 54FB              ANL     A,#0FBH
014A FF                MOV     R7,A
014B 900000      R     MOV     DPTR,#lin_rx_flag
014E EF                MOV     A,R7
014F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 117
0150 900000      R     MOV     DPTR,#lin_rx_flag
0153 E0                MOVX    A,@DPTR
0154 FF                MOV     R7,A
0155 EF                MOV     A,R7
0156 54FD              ANL     A,#0FDH
0158 FF                MOV     R7,A
0159 900000      R     MOV     DPTR,#lin_rx_flag
015C EF                MOV     A,R7
015D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 118
015E 900000      R     MOV     DPTR,#lin_rx_flag
0161 E0                MOVX    A,@DPTR
0162 FF                MOV     R7,A
0163 EF                MOV     A,R7
0164 4401              ORL     A,#01H
0166 FF                MOV     R7,A
0167 900000      R     MOV     DPTR,#lin_rx_flag
016A EF                MOV     A,R7
016B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 119
016C 900000      R     MOV     DPTR,#lin_rx_flag
016F E0                MOVX    A,@DPTR
0170 FF                MOV     R7,A
0171 EF                MOV     A,R7
0172 4408              ORL     A,#08H
0174 FF                MOV     R7,A
0175 900000      R     MOV     DPTR,#lin_rx_flag
0178 EF                MOV     A,R7
0179 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
                                           ; SOURCE LINE # 122
                                           ; SOURCE LINE # 123
017A         ?C0008:
017A D007              POP     AR7
017C D006              POP     AR6
017E D005              POP     AR5
0180 D004              POP     AR4
0182 D003              POP     AR3
0184 D002              POP     AR2
0186 D001              POP     AR1
0188 D000              POP     AR0
018A D0D0              POP     PSW
018C D000        E     POP     ?C?XPAGE1SFR
018E D086              POP     DPS
0190 D084              POP     DPL1
0192 D085              POP     DPH1
0194 D082              POP     DPL
0196 D083              POP     DPH
0198 D0F0              POP     B
019A D0E0              POP     ACC
019C 32                RETI    
             ; FUNCTION uart_rx_isr (END)
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 18  


             ; FUNCTION lin_timeout_isr (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C085              PUSH    DPH1
000A C084              PUSH    DPL1
000C C086              PUSH    DPS
000E 758600            MOV     DPS,#00H
0011 C000        E     PUSH    ?C?XPAGE1SFR
0013 750000      E     MOV     ?C?XPAGE1SFR,#?C?XPAGE1RST
0016 C0D0              PUSH    PSW
0018 75D000            MOV     PSW,#00H
001B C000              PUSH    AR0
001D C001              PUSH    AR1
001F C002              PUSH    AR2
0021 C003              PUSH    AR3
0023 C004              PUSH    AR4
0025 C005              PUSH    AR5
0027 C006              PUSH    AR6
0029 C007              PUSH    AR7
                                           ; SOURCE LINE # 125
                                           ; SOURCE LINE # 128
002B 900000      R     MOV     DPTR,#lin_rx_flag
002E E0                MOVX    A,@DPTR
002F FF                MOV     R7,A
0030 EF                MOV     A,R7
0031 30E240            JNB     ACC.2,?C0015
                                           ; SOURCE LINE # 129
                                           ; SOURCE LINE # 140
0034 7FFF              MOV     R7,#0FFH
0036 120000      E     LCALL   _LIN_Timer_WriteCounter
                                           ; SOURCE LINE # 141
0039 120000      E     LCALL   LIN_Timer_Stop
                                           ; SOURCE LINE # 142
003C 900000      R     MOV     DPTR,#lin_rx_flag
003F E0                MOVX    A,@DPTR
0040 FF                MOV     R7,A
0041 EF                MOV     A,R7
0042 54FB              ANL     A,#0FBH
0044 FF                MOV     R7,A
0045 900000      R     MOV     DPTR,#lin_rx_flag
0048 EF                MOV     A,R7
0049 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 143
004A 900000      R     MOV     DPTR,#lin_rx_flag
004D E0                MOVX    A,@DPTR
004E FF                MOV     R7,A
004F EF                MOV     A,R7
0050 54FD              ANL     A,#0FDH
0052 FF                MOV     R7,A
0053 900000      R     MOV     DPTR,#lin_rx_flag
0056 EF                MOV     A,R7
0057 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 144
0058 900000      R     MOV     DPTR,#lin_rx_flag
005B E0                MOVX    A,@DPTR
005C FF                MOV     R7,A
005D EF                MOV     A,R7
005E 4401              ORL     A,#01H
0060 FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 19  

0061 900000      R     MOV     DPTR,#lin_rx_flag
0064 EF                MOV     A,R7
0065 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 145
0066 900000      R     MOV     DPTR,#lin_rx_flag
0069 E0                MOVX    A,@DPTR
006A FF                MOV     R7,A
006B EF                MOV     A,R7
006C 4410              ORL     A,#010H
006E FF                MOV     R7,A
006F 900000      R     MOV     DPTR,#lin_rx_flag
0072 EF                MOV     A,R7
0073 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 166
                                           ; SOURCE LINE # 167
0074         ?C0015:
0074 D007              POP     AR7
0076 D006              POP     AR6
0078 D005              POP     AR5
007A D004              POP     AR4
007C D003              POP     AR3
007E D002              POP     AR2
0080 D001              POP     AR1
0082 D000              POP     AR0
0084 D0D0              POP     PSW
0086 D000        E     POP     ?C?XPAGE1SFR
0088 D086              POP     DPS
008A D084              POP     DPL1
008C D085              POP     DPH1
008E D082              POP     DPL
0090 D083              POP     DPH
0092 D0F0              POP     B
0094 D0E0              POP     ACC
0096 32                RETI    
             ; FUNCTION lin_timeout_isr (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 171
                                           ; SOURCE LINE # 172
                                           ; SOURCE LINE # 173
0000 7BFF              MOV     R3,#0FFH
0002 7A00        R     MOV     R2,#HIGH _?ix1000
0004 7900        R     MOV     R1,#LOW _?ix1000
0006 C003              PUSH    AR3
0008 C002              PUSH    AR2
000A C001              PUSH    AR1
000C 7B01              MOV     R3,#01H
000E 7A00        R     MOV     R2,#HIGH Txbuffer
0010 7900        R     MOV     R1,#LOW Txbuffer
0012 A801              MOV     R0,AR1
0014 AC02              MOV     R4,AR2
0016 AD03              MOV     R5,AR3
0018 D001              POP     AR1
001A D002              POP     AR2
001C D003              POP     AR3
001E 7E00              MOV     R6,#00H
0020 7F0A              MOV     R7,#0AH
0022 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 175
0025 7BFF              MOV     R3,#0FFH
0027 7A00        R     MOV     R2,#HIGH _?ix1001
0029 7900        R     MOV     R1,#LOW _?ix1001
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 20  

002B C003              PUSH    AR3
002D C002              PUSH    AR2
002F C001              PUSH    AR1
0031 7B01              MOV     R3,#01H
0033 7A00        R     MOV     R2,#HIGH err
0035 7900        R     MOV     R1,#LOW err
0037 A801              MOV     R0,AR1
0039 AC02              MOV     R4,AR2
003B AD03              MOV     R5,AR3
003D D001              POP     AR1
003F D002              POP     AR2
0041 D003              POP     AR3
0043 7E00              MOV     R6,#00H
0045 7F03              MOV     R7,#03H
0047 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 176
004A 7BFF              MOV     R3,#0FFH
004C 7A00        R     MOV     R2,#HIGH _?ix1002
004E 7900        R     MOV     R1,#LOW _?ix1002
0050 C003              PUSH    AR3
0052 C002              PUSH    AR2
0054 C001              PUSH    AR1
0056 7B01              MOV     R3,#01H
0058 7A00        R     MOV     R2,#HIGH put_data
005A 7900        R     MOV     R1,#LOW put_data
005C A801              MOV     R0,AR1
005E AC02              MOV     R4,AR2
0060 AD03              MOV     R5,AR3
0062 D001              POP     AR1
0064 D002              POP     AR2
0066 D003              POP     AR3
0068 7E00              MOV     R6,#00H
006A 7F06              MOV     R7,#06H
006C 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 177
006F 900000      R     MOV     DPTR,#rori_sts
0072 E4                CLR     A
0073 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 178
0074 900000      R     MOV     DPTR,#rori_flag
0077 E4                CLR     A
0078 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 180
0079 900000      R     MOV     DPTR,#cnt
007C E4                CLR     A
007D F0                MOVX    @DPTR,A
007E A3                INC     DPTR
007F E4                CLR     A
0080 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 186
0081 900000      R     MOV     DPTR,#air_1
0084 E4                CLR     A
0085 F0                MOVX    @DPTR,A
0086 900000      R     MOV     DPTR,#air_2
0089 E4                CLR     A
008A F0                MOVX    @DPTR,A
008B 900000      R     MOV     DPTR,#air_3
008E E4                CLR     A
008F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 187
0090 900000      R     MOV     DPTR,#air_data
0093 E4                CLR     A
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 21  

0094 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 188
0095 900000      R     MOV     DPTR,#i
0098 E4                CLR     A
0099 F0                MOVX    @DPTR,A
009A 900000      R     MOV     DPTR,#j
009D E4                CLR     A
009E F0                MOVX    @DPTR,A
009F 900000      R     MOV     DPTR,#k
00A2 E4                CLR     A
00A3 F0                MOVX    @DPTR,A
00A4 900000      R     MOV     DPTR,#x
00A7 E4                CLR     A
00A8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 189
00A9 900000      R     MOV     DPTR,#air_flag_1
00AC E4                CLR     A
00AD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 190
00AE 900000      R     MOV     DPTR,#air_flag_2
00B1 E4                CLR     A
00B2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 191
00B3 900000      R     MOV     DPTR,#air_flag_3
00B6 E4                CLR     A
00B7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 195
00B8 7BFF              MOV     R3,#0FFH
00BA 7A00        R     MOV     R2,#HIGH _?ix1003
00BC 7900        R     MOV     R1,#LOW _?ix1003
00BE C003              PUSH    AR3
00C0 C002              PUSH    AR2
00C2 C001              PUSH    AR1
00C4 7B01              MOV     R3,#01H
00C6 7A00        R     MOV     R2,#HIGH motor_data
00C8 7900        R     MOV     R1,#LOW motor_data
00CA A801              MOV     R0,AR1
00CC AC02              MOV     R4,AR2
00CE AD03              MOV     R5,AR3
00D0 D001              POP     AR1
00D2 D002              POP     AR2
00D4 D003              POP     AR3
00D6 7E00              MOV     R6,#00H
00D8 7F03              MOV     R7,#03H
00DA 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 197
00DD 900000      R     MOV     DPTR,#motor_1_rail
00E0 E4                CLR     A
00E1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 198
00E2 900000      R     MOV     DPTR,#motor_1_wrist
00E5 7420              MOV     A,#020H
00E7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 200
00E8 900000      R     MOV     DPTR,#motor_2_rail
00EB E4                CLR     A
00EC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 201
00ED 900000      R     MOV     DPTR,#motor_2_wrist
00F0 7420              MOV     A,#020H
00F2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 203
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 22  

00F3 900000      R     MOV     DPTR,#motor_c_wrist
00F6 7420              MOV     A,#020H
00F8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 206
00F9 900000      R     MOV     DPTR,#limit_data
00FC E4                CLR     A
00FD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 212
00FE D2AF              SETB    EA
0100 9044F4            MOV     DPTR,#044F4H
0103 74FD              MOV     A,#0FDH
0105 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 213
0106 120000      E     LCALL   LIN_Start
                                           ; SOURCE LINE # 214
0109 120000      E     LCALL   UART_2_Start
                                           ; SOURCE LINE # 215
010C 120000      E     LCALL   PS2_Start
                                           ; SOURCE LINE # 216
010F 120000      E     LCALL   PS2_ClearRxBuffer
                                           ; SOURCE LINE # 218
0112 7E00        R     MOV     R6,#HIGH uart_tx_isr
0114 7F00        R     MOV     R7,#LOW uart_tx_isr
0116 120000      E     LCALL   _uart_tx_isr_StartEx
                                           ; SOURCE LINE # 219
0119 7E00        R     MOV     R6,#HIGH uart_rx_isr
011B 7F00        R     MOV     R7,#LOW uart_rx_isr
011D 120000      E     LCALL   _uart_rx_isr_StartEx
                                           ; SOURCE LINE # 220
0120 7E00        R     MOV     R6,#HIGH lin_timeout_isr
0122 7F00        R     MOV     R7,#LOW lin_timeout_isr
0124 120000      E     LCALL   _lin_timer_isr_StartEx
                                           ; SOURCE LINE # 222
0127 120000      E     LCALL   UART_2_EnableTxInt
                                           ; SOURCE LINE # 223
012A 120000      E     LCALL   LIN_EnableRxInt
                                           ; SOURCE LINE # 224
012D 120000      E     LCALL   LIN_EnableTxInt
                                           ; SOURCE LINE # 229
0130         ?C0016:
                                           ; SOURCE LINE # 230
                                           ; SOURCE LINE # 231
0130 7B01              MOV     R3,#01H
0132 7A00        R     MOV     R2,#HIGH PS_data
0134 7900        R     MOV     R1,#LOW PS_data
0136 120000      E     LCALL   _PS_Controller_get
                                           ; SOURCE LINE # 238
0139 120000      E     LCALL   UART_2_ReadTxStatus
013C EF                MOV     A,R7
013D 30E139            JNB     ACC.1,?C0018
                                           ; SOURCE LINE # 239
                                           ; SOURCE LINE # 242
0140 7B01              MOV     R3,#01H
0142 7A00        R     MOV     R2,#HIGH str
0144 7900        R     MOV     R1,#LOW str
0146 C003              PUSH    AR3
0148 C002              PUSH    AR2
014A C001              PUSH    AR1
014C 7BFF              MOV     R3,#0FFH
014E 7A00        R     MOV     R2,#HIGH ?SC_0
0150 7900        R     MOV     R1,#LOW ?SC_0
0152 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 23  

0155 120000      E     LCALL   ?C?PSTXDATA
0158 900000      R     MOV     DPTR,#motor_data
015B E0                MOVX    A,@DPTR
015C FF                MOV     R7,A
015D 7E00              MOV     R6,#00H
015F 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0162 EE                MOV     A,R6
0163 F0                MOVX    @DPTR,A
0164 A3                INC     DPTR
0165 EF                MOV     A,R7
0166 F0                MOVX    @DPTR,A
0167 D001              POP     AR1
0169 D002              POP     AR2
016B D003              POP     AR3
016D 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 244
0170 7B01              MOV     R3,#01H
0172 7A00        R     MOV     R2,#HIGH str
0174 7900        R     MOV     R1,#LOW str
0176 120000      E     LCALL   _UART_2_PutString
                                           ; SOURCE LINE # 245
0179         ?C0018:
                                           ; SOURCE LINE # 248
0179 900000      R     MOV     DPTR,#PS_data
017C E0                MOVX    A,@DPTR
017D FF                MOV     R7,A
017E EF                MOV     A,R7
017F 30E540            JNB     ACC.5,?C0019
                                           ; SOURCE LINE # 249
                                           ; SOURCE LINE # 250
0182 900000      R     MOV     DPTR,#PS_data+01H
0185 E0                MOVX    A,@DPTR
0186 FF                MOV     R7,A
0187 EF                MOV     A,R7
0188 30E203            JNB     ACC.2,?C0021
018B D3                SETB    C
018C 8001              SJMP    ?C0022
018E         ?C0021:
018E C3                CLR     C
018F         ?C0022:
018F 4011              JC      ?C0020
0191 900000      R     MOV     DPTR,#PS_data+01H
0194 E0                MOVX    A,@DPTR
0195 FF                MOV     R7,A
0196 EF                MOV     A,R7
0197 30E308            JNB     ACC.3,?C0020
                                           ; SOURCE LINE # 251
                                           ; SOURCE LINE # 252
019A 900000      R     MOV     DPTR,#motor_1_rail
019D 7402              MOV     A,#02H
019F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 253
01A0 8073              SJMP    ?C0027
01A2         ?C0020:
                                           ; SOURCE LINE # 254
01A2 900000      R     MOV     DPTR,#PS_data+01H
01A5 E0                MOVX    A,@DPTR
01A6 FF                MOV     R7,A
01A7 EF                MOV     A,R7
01A8 30E303            JNB     ACC.3,?C0025
01AB D3                SETB    C
01AC 8001              SJMP    ?C0026
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 24  

01AE         ?C0025:
01AE C3                CLR     C
01AF         ?C0026:
01AF 4064              JC      ?C0027
01B1 900000      R     MOV     DPTR,#PS_data+01H
01B4 E0                MOVX    A,@DPTR
01B5 FF                MOV     R7,A
01B6 EF                MOV     A,R7
01B7 30E25B            JNB     ACC.2,?C0027
                                           ; SOURCE LINE # 255
                                           ; SOURCE LINE # 256
01BA 900000      R     MOV     DPTR,#motor_2_rail
01BD 7402              MOV     A,#02H
01BF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 257
                                           ; SOURCE LINE # 258
01C0 8053              SJMP    ?C0027
01C2         ?C0019:
                                           ; SOURCE LINE # 259
01C2 900000      R     MOV     DPTR,#PS_data
01C5 E0                MOVX    A,@DPTR
01C6 FF                MOV     R7,A
01C7 EF                MOV     A,R7
01C8 30E740            JNB     ACC.7,?C0028
                                           ; SOURCE LINE # 260
                                           ; SOURCE LINE # 261
01CB 900000      R     MOV     DPTR,#PS_data+01H
01CE E0                MOVX    A,@DPTR
01CF FF                MOV     R7,A
01D0 EF                MOV     A,R7
01D1 30E203            JNB     ACC.2,?C0030
01D4 D3                SETB    C
01D5 8001              SJMP    ?C0031
01D7         ?C0030:
01D7 C3                CLR     C
01D8         ?C0031:
01D8 4011              JC      ?C0029
01DA 900000      R     MOV     DPTR,#PS_data+01H
01DD E0                MOVX    A,@DPTR
01DE FF                MOV     R7,A
01DF EF                MOV     A,R7
01E0 30E308            JNB     ACC.3,?C0029
                                           ; SOURCE LINE # 262
                                           ; SOURCE LINE # 263
01E3 900000      R     MOV     DPTR,#motor_1_rail
01E6 7401              MOV     A,#01H
01E8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 264
01E9 802A              SJMP    ?C0027
01EB         ?C0029:
                                           ; SOURCE LINE # 265
01EB 900000      R     MOV     DPTR,#PS_data+01H
01EE E0                MOVX    A,@DPTR
01EF FF                MOV     R7,A
01F0 EF                MOV     A,R7
01F1 30E303            JNB     ACC.3,?C0034
01F4 D3                SETB    C
01F5 8001              SJMP    ?C0035
01F7         ?C0034:
01F7 C3                CLR     C
01F8         ?C0035:
01F8 401B              JC      ?C0027
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 25  

01FA 900000      R     MOV     DPTR,#PS_data+01H
01FD E0                MOVX    A,@DPTR
01FE FF                MOV     R7,A
01FF EF                MOV     A,R7
0200 30E212            JNB     ACC.2,?C0027
                                           ; SOURCE LINE # 266
                                           ; SOURCE LINE # 267
0203 900000      R     MOV     DPTR,#motor_2_rail
0206 7401              MOV     A,#01H
0208 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 268
                                           ; SOURCE LINE # 269
0209 800A              SJMP    ?C0027
020B         ?C0028:
                                           ; SOURCE LINE # 271
                                           ; SOURCE LINE # 272
020B 900000      R     MOV     DPTR,#motor_1_rail
020E E4                CLR     A
020F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 273
0210 900000      R     MOV     DPTR,#motor_2_rail
0213 E4                CLR     A
0214 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 274
0215         ?C0027:
                                           ; SOURCE LINE # 300
0215 900000      R     MOV     DPTR,#PS_data+02H
0218 E0                MOVX    A,@DPTR
0219 FF                MOV     R7,A
021A EF                MOV     A,R7
021B D3                SETB    C
021C 94A7              SUBB    A,#0A7H
021E 4013              JC      ?C0037
                                           ; SOURCE LINE # 301
                                           ; SOURCE LINE # 302
0220 900000      R     MOV     DPTR,#motor_1_wrist
0223 E0                MOVX    A,@DPTR
0224 FF                MOV     R7,A
0225 EF                MOV     A,R7
0226 D3                SETB    C
0227 9400              SUBB    A,#00H
0229 4024              JC      ?C0039
                                           ; SOURCE LINE # 303
                                           ; SOURCE LINE # 304
022B 900000      R     MOV     DPTR,#motor_1_wrist
022E E0                MOVX    A,@DPTR
022F 14                DEC     A
0230 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 305
                                           ; SOURCE LINE # 306
0231 801C              SJMP    ?C0039
0233         ?C0037:
                                           ; SOURCE LINE # 307
0233 900000      R     MOV     DPTR,#PS_data+02H
0236 E0                MOVX    A,@DPTR
0237 FF                MOV     R7,A
0238 EF                MOV     A,R7
0239 C3                CLR     C
023A 9457              SUBB    A,#057H
023C 5011              JNC     ?C0039
                                           ; SOURCE LINE # 308
                                           ; SOURCE LINE # 309
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 26  

023E 900000      R     MOV     DPTR,#motor_1_wrist
0241 E0                MOVX    A,@DPTR
0242 FF                MOV     R7,A
0243 EF                MOV     A,R7
0244 C3                CLR     C
0245 943F              SUBB    A,#03FH
0247 5006              JNC     ?C0039
                                           ; SOURCE LINE # 310
                                           ; SOURCE LINE # 311
0249 900000      R     MOV     DPTR,#motor_1_wrist
024C E0                MOVX    A,@DPTR
024D 04                INC     A
024E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 312
                                           ; SOURCE LINE # 313
024F         ?C0039:
                                           ; SOURCE LINE # 315
024F 900000      R     MOV     DPTR,#PS_data+04H
0252 E0                MOVX    A,@DPTR
0253 FF                MOV     R7,A
0254 EF                MOV     A,R7
0255 D3                SETB    C
0256 94A7              SUBB    A,#0A7H
0258 4013              JC      ?C0042
                                           ; SOURCE LINE # 316
                                           ; SOURCE LINE # 317
025A 900000      R     MOV     DPTR,#motor_2_wrist
025D E0                MOVX    A,@DPTR
025E FF                MOV     R7,A
025F EF                MOV     A,R7
0260 D3                SETB    C
0261 9400              SUBB    A,#00H
0263 4024              JC      ?C0044
                                           ; SOURCE LINE # 318
                                           ; SOURCE LINE # 319
0265 900000      R     MOV     DPTR,#motor_2_wrist
0268 E0                MOVX    A,@DPTR
0269 14                DEC     A
026A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 320
                                           ; SOURCE LINE # 321
026B 801C              SJMP    ?C0044
026D         ?C0042:
                                           ; SOURCE LINE # 322
026D 900000      R     MOV     DPTR,#PS_data+04H
0270 E0                MOVX    A,@DPTR
0271 FF                MOV     R7,A
0272 EF                MOV     A,R7
0273 C3                CLR     C
0274 9457              SUBB    A,#057H
0276 5011              JNC     ?C0044
                                           ; SOURCE LINE # 323
                                           ; SOURCE LINE # 324
0278 900000      R     MOV     DPTR,#motor_2_wrist
027B E0                MOVX    A,@DPTR
027C FF                MOV     R7,A
027D EF                MOV     A,R7
027E C3                CLR     C
027F 943F              SUBB    A,#03FH
0281 5006              JNC     ?C0044
                                           ; SOURCE LINE # 325
                                           ; SOURCE LINE # 326
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 27  

0283 900000      R     MOV     DPTR,#motor_2_wrist
0286 E0                MOVX    A,@DPTR
0287 04                INC     A
0288 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 327
                                           ; SOURCE LINE # 328
0289         ?C0044:
                                           ; SOURCE LINE # 330
0289 900000      R     MOV     DPTR,#PS_data+01H
028C E0                MOVX    A,@DPTR
028D FF                MOV     R7,A
028E EF                MOV     A,R7
028F 30E003            JNB     ACC.0,?C0048
0292 D3                SETB    C
0293 8001              SJMP    ?C0049
0295         ?C0048:
0295 C3                CLR     C
0296         ?C0049:
0296 401C              JC      ?C0047
0298 900000      R     MOV     DPTR,#PS_data+01H
029B E0                MOVX    A,@DPTR
029C FF                MOV     R7,A
029D EF                MOV     A,R7
029E 30E113            JNB     ACC.1,?C0047
                                           ; SOURCE LINE # 331
                                           ; SOURCE LINE # 332
02A1 900000      R     MOV     DPTR,#motor_c_wrist
02A4 E0                MOVX    A,@DPTR
02A5 FF                MOV     R7,A
02A6 EF                MOV     A,R7
02A7 D3                SETB    C
02A8 9400              SUBB    A,#00H
02AA 4031              JC      ?C0051
                                           ; SOURCE LINE # 333
                                           ; SOURCE LINE # 334
02AC 900000      R     MOV     DPTR,#motor_c_wrist
02AF E0                MOVX    A,@DPTR
02B0 14                DEC     A
02B1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 335
                                           ; SOURCE LINE # 336
02B2 8029              SJMP    ?C0051
02B4         ?C0047:
                                           ; SOURCE LINE # 337
02B4 900000      R     MOV     DPTR,#PS_data+01H
02B7 E0                MOVX    A,@DPTR
02B8 FF                MOV     R7,A
02B9 EF                MOV     A,R7
02BA 30E020            JNB     ACC.0,?C0051
02BD 900000      R     MOV     DPTR,#PS_data+01H
02C0 E0                MOVX    A,@DPTR
02C1 FF                MOV     R7,A
02C2 EF                MOV     A,R7
02C3 30E103            JNB     ACC.1,?C0053
02C6 D3                SETB    C
02C7 8001              SJMP    ?C0054
02C9         ?C0053:
02C9 C3                CLR     C
02CA         ?C0054:
02CA 4011              JC      ?C0051
                                           ; SOURCE LINE # 338
                                           ; SOURCE LINE # 339
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 28  

02CC 900000      R     MOV     DPTR,#motor_c_wrist
02CF E0                MOVX    A,@DPTR
02D0 FF                MOV     R7,A
02D1 EF                MOV     A,R7
02D2 C3                CLR     C
02D3 943F              SUBB    A,#03FH
02D5 5006              JNC     ?C0051
                                           ; SOURCE LINE # 340
                                           ; SOURCE LINE # 341
02D7 900000      R     MOV     DPTR,#motor_c_wrist
02DA E0                MOVX    A,@DPTR
02DB 04                INC     A
02DC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 342
                                           ; SOURCE LINE # 343
02DD         ?C0051:
                                           ; SOURCE LINE # 346
02DD 900000      R     MOV     DPTR,#PS_data+01H
02E0 E0                MOVX    A,@DPTR
02E1 FF                MOV     R7,A
02E2 EF                MOV     A,R7
02E3 30E724            JNB     ACC.7,?C0056
                                           ; SOURCE LINE # 347
                                           ; SOURCE LINE # 348
02E6 900000      R     MOV     DPTR,#air_flag_1
02E9 E0                MOVX    A,@DPTR
02EA FF                MOV     R7,A
02EB EF                MOV     A,R7
02EC 6022              JZ      ?C0060
                                           ; SOURCE LINE # 349
                                           ; SOURCE LINE # 350
02EE 900000      R     MOV     DPTR,#air_1
02F1 E0                MOVX    A,@DPTR
02F2 FF                MOV     R7,A
02F3 EF                MOV     A,R7
02F4 6007              JZ      ?C0058
                                           ; SOURCE LINE # 351
                                           ; SOURCE LINE # 352
02F6 900000      R     MOV     DPTR,#air_1
02F9 E4                CLR     A
02FA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 353
02FB 8006              SJMP    ?C0059
02FD         ?C0058:
                                           ; SOURCE LINE # 355
                                           ; SOURCE LINE # 356
02FD 900000      R     MOV     DPTR,#air_1
0300 7401              MOV     A,#01H
0302 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 357
0303         ?C0059:
                                           ; SOURCE LINE # 358
0303 900000      R     MOV     DPTR,#air_flag_1
0306 E4                CLR     A
0307 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 359
                                           ; SOURCE LINE # 360
0308 8006              SJMP    ?C0060
030A         ?C0056:
                                           ; SOURCE LINE # 362
                                           ; SOURCE LINE # 363
030A 900000      R     MOV     DPTR,#air_flag_1
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 29  

030D 7401              MOV     A,#01H
030F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 364
0310         ?C0060:
                                           ; SOURCE LINE # 365
0310 900000      R     MOV     DPTR,#PS_data+01H
0313 E0                MOVX    A,@DPTR
0314 FF                MOV     R7,A
0315 EF                MOV     A,R7
0316 30E524            JNB     ACC.5,?C0061
                                           ; SOURCE LINE # 366
                                           ; SOURCE LINE # 367
0319 900000      R     MOV     DPTR,#air_flag_2
031C E0                MOVX    A,@DPTR
031D FF                MOV     R7,A
031E EF                MOV     A,R7
031F 6022              JZ      ?C0065
                                           ; SOURCE LINE # 368
                                           ; SOURCE LINE # 369
0321 900000      R     MOV     DPTR,#air_2
0324 E0                MOVX    A,@DPTR
0325 FF                MOV     R7,A
0326 EF                MOV     A,R7
0327 6007              JZ      ?C0063
                                           ; SOURCE LINE # 370
                                           ; SOURCE LINE # 371
0329 900000      R     MOV     DPTR,#air_2
032C E4                CLR     A
032D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 372
032E 8006              SJMP    ?C0064
0330         ?C0063:
                                           ; SOURCE LINE # 374
                                           ; SOURCE LINE # 375
0330 900000      R     MOV     DPTR,#air_2
0333 7401              MOV     A,#01H
0335 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 376
0336         ?C0064:
                                           ; SOURCE LINE # 377
0336 900000      R     MOV     DPTR,#air_flag_2
0339 E4                CLR     A
033A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 378
                                           ; SOURCE LINE # 379
033B 8006              SJMP    ?C0065
033D         ?C0061:
                                           ; SOURCE LINE # 381
                                           ; SOURCE LINE # 382
033D 900000      R     MOV     DPTR,#air_flag_2
0340 7401              MOV     A,#01H
0342 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 383
0343         ?C0065:
                                           ; SOURCE LINE # 384
0343 900000      R     MOV     DPTR,#PS_data+01H
0346 E0                MOVX    A,@DPTR
0347 FF                MOV     R7,A
0348 EF                MOV     A,R7
0349 30E424            JNB     ACC.4,?C0066
                                           ; SOURCE LINE # 385
                                           ; SOURCE LINE # 386
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 30  

034C 900000      R     MOV     DPTR,#air_flag_3
034F E0                MOVX    A,@DPTR
0350 FF                MOV     R7,A
0351 EF                MOV     A,R7
0352 6022              JZ      ?C0070
                                           ; SOURCE LINE # 387
                                           ; SOURCE LINE # 388
0354 900000      R     MOV     DPTR,#air_3
0357 E0                MOVX    A,@DPTR
0358 FF                MOV     R7,A
0359 EF                MOV     A,R7
035A 6007              JZ      ?C0068
                                           ; SOURCE LINE # 389
                                           ; SOURCE LINE # 390
035C 900000      R     MOV     DPTR,#air_3
035F E4                CLR     A
0360 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 391
0361 8006              SJMP    ?C0069
0363         ?C0068:
                                           ; SOURCE LINE # 393
                                           ; SOURCE LINE # 394
0363 900000      R     MOV     DPTR,#air_3
0366 7401              MOV     A,#01H
0368 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 395
0369         ?C0069:
                                           ; SOURCE LINE # 396
0369 900000      R     MOV     DPTR,#air_flag_3
036C E4                CLR     A
036D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 397
                                           ; SOURCE LINE # 398
036E 8006              SJMP    ?C0070
0370         ?C0066:
                                           ; SOURCE LINE # 400
                                           ; SOURCE LINE # 401
0370 900000      R     MOV     DPTR,#air_flag_3
0373 7401              MOV     A,#01H
0375 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 402
0376         ?C0070:
                                           ; SOURCE LINE # 403
0376 900000      R     MOV     DPTR,#air_1
0379 E0                MOVX    A,@DPTR
037A FF                MOV     R7,A
037B 900000      R     MOV     DPTR,#air_2
037E E0                MOVX    A,@DPTR
037F FD                MOV     R5,A
0380 900000      R     MOV     DPTR,#air_3
0383 E0                MOVX    A,@DPTR
0384 FB                MOV     R3,A
0385 120000      R     LCALL   _air
                                           ; SOURCE LINE # 406
0388 120000      R     LCALL   LIN_Master_ReadTxStatus
038B EF                MOV     A,R7
038C 6401              XRL     A,#01H
038E 7003              JNZ     $ + 5H
0390 020000      R     LJMP    ?C0016
                                           ; SOURCE LINE # 407
                                           ; SOURCE LINE # 408
0393 900000      R     MOV     DPTR,#send_data
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 31  

0396 E0                MOVX    A,@DPTR
0397 FF                MOV     R7,A
0398 EF                MOV     A,R7
0399 7063              JNZ     ?C0072
                                           ; SOURCE LINE # 409
                                           ; SOURCE LINE # 410
039B 900000      R     MOV     DPTR,#motor_1_rail
039E E0                MOVX    A,@DPTR
039F FF                MOV     R7,A
03A0 EF                MOV     A,R7
03A1 C4                SWAP    A
03A2 33                RLC     A
03A3 33                RLC     A
03A4 54C0              ANL     A,#0C0H
03A6 FF                MOV     R7,A
03A7 EF                MOV     A,R7
03A8 54C0              ANL     A,#0C0H
03AA FF                MOV     R7,A
03AB 900000      R     MOV     DPTR,#motor_1_wrist
03AE E0                MOVX    A,@DPTR
03AF FE                MOV     R6,A
03B0 EE                MOV     A,R6
03B1 543F              ANL     A,#03FH
03B3 FE                MOV     R6,A
03B4 EF                MOV     A,R7
03B5 4E                ORL     A,R6
03B6 FF                MOV     R7,A
03B7 900000      R     MOV     DPTR,#motor_data
03BA EF                MOV     A,R7
03BB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 411
03BC 900000      R     MOV     DPTR,#motor_2_rail
03BF E0                MOVX    A,@DPTR
03C0 FF                MOV     R7,A
03C1 EF                MOV     A,R7
03C2 C4                SWAP    A
03C3 33                RLC     A
03C4 33                RLC     A
03C5 54C0              ANL     A,#0C0H
03C7 FF                MOV     R7,A
03C8 EF                MOV     A,R7
03C9 54C0              ANL     A,#0C0H
03CB FF                MOV     R7,A
03CC 900000      R     MOV     DPTR,#motor_2_wrist
03CF E0                MOVX    A,@DPTR
03D0 FE                MOV     R6,A
03D1 EE                MOV     A,R6
03D2 543F              ANL     A,#03FH
03D4 FE                MOV     R6,A
03D5 EF                MOV     A,R7
03D6 4E                ORL     A,R6
03D7 FF                MOV     R7,A
03D8 900000      R     MOV     DPTR,#motor_data+01H
03DB EF                MOV     A,R7
03DC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 412
03DD 900000      R     MOV     DPTR,#motor_c_wrist
03E0 E0                MOVX    A,@DPTR
03E1 FF                MOV     R7,A
03E2 EF                MOV     A,R7
03E3 543F              ANL     A,#03FH
03E5 FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 32  

03E6 900000      R     MOV     DPTR,#motor_data+02H
03E9 EF                MOV     A,R7
03EA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 413
03EB 7B01              MOV     R3,#01H
03ED 7A00        R     MOV     R2,#HIGH motor_data
03EF 7900        R     MOV     R1,#LOW motor_data
03F1 7D03              MOV     R5,#03H
03F3 7F02              MOV     R7,#02H
03F5 120000      R     LCALL   _LIN_Master_PutArray
                                           ; SOURCE LINE # 414
03F8 900000      R     MOV     DPTR,#send_data
03FB 7401              MOV     A,#01H
03FD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 415
03FE         ?C0072:
                                           ; SOURCE LINE # 416
03FE 900000      R     MOV     DPTR,#send_data
0401 E0                MOVX    A,@DPTR
0402 FF                MOV     R7,A
0403 EF                MOV     A,R7
0404 6401              XRL     A,#01H
0406 6003              JZ      $ + 5H
0408 020000      R     LJMP    ?C0016
                                           ; SOURCE LINE # 417
                                           ; SOURCE LINE # 419
040B 900000      R     MOV     DPTR,#send_data
040E E4                CLR     A
040F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 420
                                           ; SOURCE LINE # 421
                                           ; SOURCE LINE # 422
0410 020000      R     LJMP    ?C0016
0413 22                RET     
             ; FUNCTION main (END)

             ; FUNCTION _LIN_Master_id_send (BEGIN)
                                           ; SOURCE LINE # 425
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 426
                                           ; SOURCE LINE # 427
0005 900000      R     MOV     DPTR,#p0
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 428
000A 900000      R     MOV     DPTR,#p1
000D E4                CLR     A
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 429
000F 900000      R     MOV     DPTR,#lin_id_flag
0012 E0                MOVX    A,@DPTR
0013 FF                MOV     R7,A
0014 EF                MOV     A,R7
0015 6003              JZ      $ + 5H
0017 020000      R     LJMP    ?C0075
                                           ; SOURCE LINE # 430
                                           ; SOURCE LINE # 431
001A 900000      R     MOV     DPTR,#id
001D E0                MOVX    A,@DPTR
001E FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 33  

001F EF                MOV     A,R7
0020 C3                CLR     C
0021 13                RRC     A
0022 FF                MOV     R7,A
0023 EF                MOV     A,R7
0024 5401              ANL     A,#01H
0026 FF                MOV     R7,A
0027 900000      R     MOV     DPTR,#id
002A E0                MOVX    A,@DPTR
002B FE                MOV     R6,A
002C EE                MOV     A,R6
002D 5401              ANL     A,#01H
002F FE                MOV     R6,A
0030 EE                MOV     A,R6
0031 6F                XRL     A,R7
0032 FF                MOV     R7,A
0033 900000      R     MOV     DPTR,#id
0036 E0                MOVX    A,@DPTR
0037 FE                MOV     R6,A
0038 EE                MOV     A,R6
0039 13                RRC     A
003A 13                RRC     A
003B 543F              ANL     A,#03FH
003D FE                MOV     R6,A
003E EE                MOV     A,R6
003F 5401              ANL     A,#01H
0041 FE                MOV     R6,A
0042 EF                MOV     A,R7
0043 6E                XRL     A,R6
0044 FF                MOV     R7,A
0045 900000      R     MOV     DPTR,#id
0048 E0                MOVX    A,@DPTR
0049 FE                MOV     R6,A
004A EE                MOV     A,R6
004B C4                SWAP    A
004C 540F              ANL     A,#0FH
004E FE                MOV     R6,A
004F EE                MOV     A,R6
0050 5401              ANL     A,#01H
0052 FE                MOV     R6,A
0053 EF                MOV     A,R7
0054 6E                XRL     A,R6
0055 FF                MOV     R7,A
0056 900000      R     MOV     DPTR,#p0
0059 EF                MOV     A,R7
005A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 432
005B 900000      R     MOV     DPTR,#id
005E E0                MOVX    A,@DPTR
005F FF                MOV     R7,A
0060 EF                MOV     A,R7
0061 13                RRC     A
0062 13                RRC     A
0063 13                RRC     A
0064 541F              ANL     A,#01FH
0066 FF                MOV     R7,A
0067 EF                MOV     A,R7
0068 5401              ANL     A,#01H
006A FF                MOV     R7,A
006B 900000      R     MOV     DPTR,#id
006E E0                MOVX    A,@DPTR
006F FE                MOV     R6,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 34  

0070 EE                MOV     A,R6
0071 C3                CLR     C
0072 13                RRC     A
0073 FE                MOV     R6,A
0074 EE                MOV     A,R6
0075 5401              ANL     A,#01H
0077 FE                MOV     R6,A
0078 EE                MOV     A,R6
0079 6F                XRL     A,R7
007A FF                MOV     R7,A
007B 900000      R     MOV     DPTR,#id
007E E0                MOVX    A,@DPTR
007F FE                MOV     R6,A
0080 EE                MOV     A,R6
0081 C4                SWAP    A
0082 540F              ANL     A,#0FH
0084 FE                MOV     R6,A
0085 EE                MOV     A,R6
0086 5401              ANL     A,#01H
0088 FE                MOV     R6,A
0089 EF                MOV     A,R7
008A 6E                XRL     A,R6
008B FF                MOV     R7,A
008C 900000      R     MOV     DPTR,#id
008F E0                MOVX    A,@DPTR
0090 FE                MOV     R6,A
0091 EE                MOV     A,R6
0092 C4                SWAP    A
0093 13                RRC     A
0094 5407              ANL     A,#07H
0096 FE                MOV     R6,A
0097 EE                MOV     A,R6
0098 5401              ANL     A,#01H
009A FE                MOV     R6,A
009B EF                MOV     A,R7
009C 6E                XRL     A,R6
009D FF                MOV     R7,A
009E EF                MOV     A,R7
009F F4                CPL     A
00A0 FF                MOV     R7,A
00A1 900000      R     MOV     DPTR,#p1
00A4 EF                MOV     A,R7
00A5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 433
00A6 900000      R     MOV     DPTR,#p0
00A9 E0                MOVX    A,@DPTR
00AA FF                MOV     R7,A
00AB EF                MOV     A,R7
00AC C4                SWAP    A
00AD 33                RLC     A
00AE 33                RLC     A
00AF 54C0              ANL     A,#0C0H
00B1 FF                MOV     R7,A
00B2 EF                MOV     A,R7
00B3 5440              ANL     A,#040H
00B5 FF                MOV     R7,A
00B6 900000      R     MOV     DPTR,#id
00B9 E0                MOVX    A,@DPTR
00BA FE                MOV     R6,A
00BB EE                MOV     A,R6
00BC 543F              ANL     A,#03FH
00BE FE                MOV     R6,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 35  

00BF EE                MOV     A,R6
00C0 4F                ORL     A,R7
00C1 FF                MOV     R7,A
00C2 900000      R     MOV     DPTR,#p1
00C5 E0                MOVX    A,@DPTR
00C6 FE                MOV     R6,A
00C7 EE                MOV     A,R6
00C8 C4                SWAP    A
00C9 33                RLC     A
00CA 33                RLC     A
00CB 33                RLC     A
00CC 5480              ANL     A,#080H
00CE FE                MOV     R6,A
00CF EE                MOV     A,R6
00D0 5480              ANL     A,#080H
00D2 FE                MOV     R6,A
00D3 EF                MOV     A,R7
00D4 4E                ORL     A,R6
00D5 FF                MOV     R7,A
00D6 900000      R     MOV     DPTR,#id
00D9 EF                MOV     A,R7
00DA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 434
00DB 7F03              MOV     R7,#03H
00DD 120000      E     LCALL   _LIN_SendBreak
                                           ; SOURCE LINE # 435
00E0 120000      E     LCALL   LIN_ClearTxBuffer
                                           ; SOURCE LINE # 436
00E3 120000      E     LCALL   LIN_ClearRxBuffer
                                           ; SOURCE LINE # 437
00E6 7F55              MOV     R7,#055H
00E8 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 438
00EB 900000      R     MOV     DPTR,#id
00EE E0                MOVX    A,@DPTR
00EF FF                MOV     R7,A
00F0 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 439
00F3 900000      R     MOV     DPTR,#lin_id_flag
00F6 7401              MOV     A,#01H
00F8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 440
00F9 900000      R     MOV     DPTR,#id
00FC E0                MOVX    A,@DPTR
00FD FF                MOV     R7,A
00FE EF                MOV     A,R7
00FF 54FF              ANL     A,#0FFH
0101 FF                MOV     R7,A
0102 7E00              MOV     R6,#00H
0104 22                RET     
                                           ; SOURCE LINE # 441
0105         ?C0075:
                                           ; SOURCE LINE # 443
                                           ; SOURCE LINE # 444
0105 7E01              MOV     R6,#01H
0107 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 445
                                           ; SOURCE LINE # 446
0109         ?C0076:
0109 22                RET     
             ; FUNCTION _LIN_Master_id_send (END)

C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 36  

             ; FUNCTION _LIN_Master_GetArray (BEGIN)
                                           ; SOURCE LINE # 448
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#length
0008 ED                MOV     A,R5
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#buffer
000D 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 449
                                           ; SOURCE LINE # 450
0010 900000      R     MOV     DPTR,#lin_rx_flag
0013 E0                MOVX    A,@DPTR
0014 FF                MOV     R7,A
0015 EF                MOV     A,R7
0016 5401              ANL     A,#01H
0018 FF                MOV     R7,A
0019 900000      R     MOV     DPTR,#lin_tx_flag
001C E0                MOVX    A,@DPTR
001D FE                MOV     R6,A
001E EE                MOV     A,R6
001F 7004              JNZ     ?C0079
0021 7E01              MOV     R6,#01H
0023 8002              SJMP    ?C0080
0025         ?C0079:
0025 7E00              MOV     R6,#00H
0027         ?C0080:
0027 EE                MOV     A,R6
0028 5F                ANL     A,R7
0029 FF                MOV     R7,A
002A EF                MOV     A,R7
002B 7003              JNZ     $ + 5H
002D 020000      R     LJMP    ?C0078
                                           ; SOURCE LINE # 451
                                           ; SOURCE LINE # 452
0030 900000      R     MOV     DPTR,#id
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 120000      R     LCALL   _LIN_Master_id_send
0038 900000      R     MOV     DPTR,#rx_sum
003B EE                MOV     A,R6
003C F0                MOVX    @DPTR,A
003D A3                INC     DPTR
003E EF                MOV     A,R7
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 453
0040 900000      R     MOV     DPTR,#rx_sum
0043 E0                MOVX    A,@DPTR
0044 FE                MOV     R6,A
0045 A3                INC     DPTR
0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 EF                MOV     A,R7
0049 B40026            CJNE    A,#00H,?C0081
004C EE                MOV     A,R6
004D B40122            CJNE    A,#01H,?C0081
                                           ; SOURCE LINE # 454
                                           ; SOURCE LINE # 455
0050 900000      R     MOV     DPTR,#lin_rx_flag
0053 E0                MOVX    A,@DPTR
0054 FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 37  

0055 EF                MOV     A,R7
0056 4401              ORL     A,#01H
0058 FF                MOV     R7,A
0059 900000      R     MOV     DPTR,#lin_rx_flag
005C EF                MOV     A,R7
005D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 456
005E 900000      R     MOV     DPTR,#lin_rx_flag
0061 E0                MOVX    A,@DPTR
0062 FF                MOV     R7,A
0063 EF                MOV     A,R7
0064 54FB              ANL     A,#0FBH
0066 FF                MOV     R7,A
0067 900000      R     MOV     DPTR,#lin_rx_flag
006A EF                MOV     A,R7
006B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 457
006C 120000      E     LCALL   LIN_Timer_Stop
                                           ; SOURCE LINE # 458
006F 7F01              MOV     R7,#01H
0071 22                RET     
                                           ; SOURCE LINE # 459
0072         ?C0081:
                                           ; SOURCE LINE # 460
0072 120000      E     LCALL   LIN_ClearRxBuffer
                                           ; SOURCE LINE # 461
0075 900000      R     MOV     DPTR,#length
0078 E0                MOVX    A,@DPTR
0079 FF                MOV     R7,A
007A 900000      R     MOV     DPTR,#rx_length
007D EF                MOV     A,R7
007E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 462
007F 900000      R     MOV     DPTR,#buffer
0082 120000      E     LCALL   ?C?PLDXDATA
0085 900000      R     MOV     DPTR,#rx_buffer
0088 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 463
008B 900000      R     MOV     DPTR,#rx_i
008E E4                CLR     A
008F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 464
0090 900000      R     MOV     DPTR,#lin_rx_sync_flag
0093 E4                CLR     A
0094 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 465
0095 900000      R     MOV     DPTR,#lin_rx_flag
0098 E0                MOVX    A,@DPTR
0099 FF                MOV     R7,A
009A EF                MOV     A,R7
009B 54FE              ANL     A,#0FEH
009D FF                MOV     R7,A
009E 900000      R     MOV     DPTR,#lin_rx_flag
00A1 EF                MOV     A,R7
00A2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 466
00A3 900000      R     MOV     DPTR,#lin_rx_flag
00A6 E0                MOVX    A,@DPTR
00A7 FF                MOV     R7,A
00A8 EF                MOV     A,R7
00A9 54FD              ANL     A,#0FDH
00AB FF                MOV     R7,A
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 38  

00AC 900000      R     MOV     DPTR,#lin_rx_flag
00AF EF                MOV     A,R7
00B0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 467
00B1 900000      R     MOV     DPTR,#lin_rx_flag
00B4 E0                MOVX    A,@DPTR
00B5 FF                MOV     R7,A
00B6 EF                MOV     A,R7
00B7 4404              ORL     A,#04H
00B9 FF                MOV     R7,A
00BA 900000      R     MOV     DPTR,#lin_rx_flag
00BD EF                MOV     A,R7
00BE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 468
00BF 7FFF              MOV     R7,#0FFH
00C1 120000      E     LCALL   _LIN_Timer_WriteCounter
                                           ; SOURCE LINE # 469
00C4 120000      E     LCALL   LIN_Timer_Start
                                           ; SOURCE LINE # 471
00C7 8003              SJMP    ?C0083
00C9         ?C0078:
                                           ; SOURCE LINE # 473
                                           ; SOURCE LINE # 474
00C9 7F01              MOV     R7,#01H
00CB 22                RET     
                                           ; SOURCE LINE # 475
00CC         ?C0083:
                                           ; SOURCE LINE # 476
00CC 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 477
00CE         ?C0082:
00CE 22                RET     
             ; FUNCTION _LIN_Master_GetArray (END)

             ; FUNCTION LIN_Master_ReadRxStatus (BEGIN)
                                           ; SOURCE LINE # 479
                                           ; SOURCE LINE # 480
                                           ; SOURCE LINE # 481
0000 900000      R     MOV     DPTR,#lin_rx_flag
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
0005 900000      R     MOV     DPTR,#flag
0008 EF                MOV     A,R7
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 483
000A 900000      R     MOV     DPTR,#flag
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
                                           ; SOURCE LINE # 484
000F         ?C0084:
000F 22                RET     
             ; FUNCTION LIN_Master_ReadRxStatus (END)

             ; FUNCTION LIN_Master_ReadTxStatus (BEGIN)
                                           ; SOURCE LINE # 486
                                           ; SOURCE LINE # 487
                                           ; SOURCE LINE # 488
0000 900000      R     MOV     DPTR,#lin_tx_flag
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
                                           ; SOURCE LINE # 489
0005         ?C0085:
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 39  

0005 22                RET     
             ; FUNCTION LIN_Master_ReadTxStatus (END)

             ; FUNCTION _LIN_Master_PutArray (BEGIN)
                                           ; SOURCE LINE # 491
0000 900000      R     MOV     DPTR,#id
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#length
0008 ED                MOV     A,R5
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#buffer
000D 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 492
                                           ; SOURCE LINE # 493
0010 900000      R     MOV     DPTR,#lin_rx_flag
0013 E0                MOVX    A,@DPTR
0014 FF                MOV     R7,A
0015 EF                MOV     A,R7
0016 5401              ANL     A,#01H
0018 FF                MOV     R7,A
0019 900000      R     MOV     DPTR,#lin_tx_flag
001C E0                MOVX    A,@DPTR
001D FE                MOV     R6,A
001E EE                MOV     A,R6
001F 7004              JNZ     ?C0087
0021 7E01              MOV     R6,#01H
0023 8002              SJMP    ?C0088
0025         ?C0087:
0025 7E00              MOV     R6,#00H
0027         ?C0088:
0027 EE                MOV     A,R6
0028 5F                ANL     A,R7
0029 FF                MOV     R7,A
002A EF                MOV     A,R7
002B 7003              JNZ     $ + 5H
002D 020000      R     LJMP    ?C0086
                                           ; SOURCE LINE # 494
                                           ; SOURCE LINE # 496
0030 900000      R     MOV     DPTR,#id
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 120000      R     LCALL   _LIN_Master_id_send
0038 900000      R     MOV     DPTR,#sum
003B EE                MOV     A,R6
003C F0                MOVX    @DPTR,A
003D A3                INC     DPTR
003E EF                MOV     A,R7
003F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 497
0040 900000      R     MOV     DPTR,#sum
0043 E0                MOVX    A,@DPTR
0044 FE                MOV     R6,A
0045 A3                INC     DPTR
0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 EF                MOV     A,R7
0049 B40007            CJNE    A,#00H,?C0089
004C EE                MOV     A,R6
004D B40103            CJNE    A,#01H,?C0089
                                           ; SOURCE LINE # 498
                                           ; SOURCE LINE # 499
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 40  

0050 7F01              MOV     R7,#01H
0052 22                RET     
                                           ; SOURCE LINE # 500
0053         ?C0089:
                                           ; SOURCE LINE # 503
0053 900000      R     MOV     DPTR,#i
0056 E4                CLR     A
0057 F0                MOVX    @DPTR,A
0058         ?C0091:
0058 900000      R     MOV     DPTR,#length
005B E0                MOVX    A,@DPTR
005C FF                MOV     R7,A
005D 900000      R     MOV     DPTR,#i
0060 E0                MOVX    A,@DPTR
0061 FE                MOV     R6,A
0062 EE                MOV     A,R6
0063 C3                CLR     C
0064 9F                SUBB    A,R7
0065 5040              JNC     ?C0092
                                           ; SOURCE LINE # 504
                                           ; SOURCE LINE # 505
0067 900000      R     MOV     DPTR,#buffer
006A 120000      E     LCALL   ?C?PLDXDATA
006D 900000      R     MOV     DPTR,#i
0070 E0                MOVX    A,@DPTR
0071 FF                MOV     R7,A
0072 E9                MOV     A,R1
0073 2F                ADD     A,R7
0074 F9                MOV     R1,A
0075 E4                CLR     A
0076 3A                ADDC    A,R2
0077 FA                MOV     R2,A
0078 120000      E     LCALL   ?C?CLDPTR
007B FF                MOV     R7,A
007C 7E00              MOV     R6,#00H
007E 900000      R     MOV     DPTR,#sum
0081 EE                MOV     A,R6
0082 8FF0              MOV     B,R7
0084 120000      E     LCALL   ?C?IILDX
                                           ; SOURCE LINE # 506
0087 900000      R     MOV     DPTR,#buffer
008A 120000      E     LCALL   ?C?PLDXDATA
008D 900000      R     MOV     DPTR,#i
0090 E0                MOVX    A,@DPTR
0091 FF                MOV     R7,A
0092 E9                MOV     A,R1
0093 2F                ADD     A,R7
0094 F9                MOV     R1,A
0095 E4                CLR     A
0096 3A                ADDC    A,R2
0097 FA                MOV     R2,A
0098 120000      E     LCALL   ?C?CLDPTR
009B FF                MOV     R7,A
009C 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 508
009F 900000      R     MOV     DPTR,#i
00A2 E0                MOVX    A,@DPTR
00A3 04                INC     A
00A4 F0                MOVX    @DPTR,A
00A5 80B1              SJMP    ?C0091
00A7         ?C0092:
                                           ; SOURCE LINE # 510
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 41  

00A7 900000      R     MOV     DPTR,#sum
00AA E0                MOVX    A,@DPTR
00AB FE                MOV     R6,A
00AC A3                INC     DPTR
00AD E0                MOVX    A,@DPTR
00AE FF                MOV     R7,A
00AF EE                MOV     A,R6
00B0 FF                MOV     R7,A
00B1 7E00              MOV     R6,#00H
00B3 7E00              MOV     R6,#00H
00B5 EF                MOV     A,R7
00B6 5407              ANL     A,#07H
00B8 FF                MOV     R7,A
00B9 900000      R     MOV     DPTR,#sum
00BC E0                MOVX    A,@DPTR
00BD FC                MOV     R4,A
00BE A3                INC     DPTR
00BF E0                MOVX    A,@DPTR
00C0 FD                MOV     R5,A
00C1 7C00              MOV     R4,#00H
00C3 EF                MOV     A,R7
00C4 2D                ADD     A,R5
00C5 FF                MOV     R7,A
00C6 EE                MOV     A,R6
00C7 3C                ADDC    A,R4
00C8 FE                MOV     R6,A
00C9 EF                MOV     A,R7
00CA F4                CPL     A
00CB FF                MOV     R7,A
00CC EE                MOV     A,R6
00CD F4                CPL     A
00CE FE                MOV     R6,A
00CF 7E00              MOV     R6,#00H
00D1 900000      R     MOV     DPTR,#sum
00D4 EE                MOV     A,R6
00D5 F0                MOVX    @DPTR,A
00D6 A3                INC     DPTR
00D7 EF                MOV     A,R7
00D8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 511
00D9 900000      R     MOV     DPTR,#sum
00DC E0                MOVX    A,@DPTR
00DD FE                MOV     R6,A
00DE A3                INC     DPTR
00DF E0                MOVX    A,@DPTR
00E0 FF                MOV     R7,A
00E1 120000      E     LCALL   _LIN_PutChar
                                           ; SOURCE LINE # 512
00E4 900000      R     MOV     DPTR,#lin_tx_flag
00E7 7401              MOV     A,#01H
00E9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 514
00EA 7F00              MOV     R7,#00H
00EC 22                RET     
                                           ; SOURCE LINE # 515
00ED         ?C0086:
                                           ; SOURCE LINE # 517
                                           ; SOURCE LINE # 518
00ED 7F01              MOV     R7,#01H
                                           ; SOURCE LINE # 519
                                           ; SOURCE LINE # 520
00EF         ?C0090:
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 42  

00EF 22                RET     
             ; FUNCTION _LIN_Master_PutArray (END)

             ; FUNCTION _air (BEGIN)
                                           ; SOURCE LINE # 522
0000 900000      R     MOV     DPTR,#arm_left
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#arm_right
0008 ED                MOV     A,R5
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#pol
000D EB                MOV     A,R3
000E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 523
                                           ; SOURCE LINE # 524
000F 900000      R     MOV     DPTR,#arm_left
0012 E0                MOVX    A,@DPTR
0013 FF                MOV     R7,A
0014 EF                MOV     A,R7
0015 600C              JZ      ?C0095
                                           ; SOURCE LINE # 525
                                           ; SOURCE LINE # 526
0017 7F01              MOV     R7,#01H
0019 120000      E     LCALL   _air_2_Write
                                           ; SOURCE LINE # 527
001C 7F00              MOV     R7,#00H
001E 120000      E     LCALL   _air_7_Write
                                           ; SOURCE LINE # 528
0021 800A              SJMP    ?C0096
0023         ?C0095:
                                           ; SOURCE LINE # 530
                                           ; SOURCE LINE # 531
0023 7F00              MOV     R7,#00H
0025 120000      E     LCALL   _air_2_Write
                                           ; SOURCE LINE # 532
0028 7F01              MOV     R7,#01H
002A 120000      E     LCALL   _air_7_Write
                                           ; SOURCE LINE # 533
002D         ?C0096:
                                           ; SOURCE LINE # 535
002D 900000      R     MOV     DPTR,#arm_right
0030 E0                MOVX    A,@DPTR
0031 FF                MOV     R7,A
0032 EF                MOV     A,R7
0033 600C              JZ      ?C0097
                                           ; SOURCE LINE # 536
                                           ; SOURCE LINE # 537
0035 7F01              MOV     R7,#01H
0037 120000      E     LCALL   _air_1_Write
                                           ; SOURCE LINE # 538
003A 7F00              MOV     R7,#00H
003C 120000      E     LCALL   _air_8_Write
                                           ; SOURCE LINE # 539
003F 800A              SJMP    ?C0098
0041         ?C0097:
                                           ; SOURCE LINE # 541
                                           ; SOURCE LINE # 542
0041 7F00              MOV     R7,#00H
0043 120000      E     LCALL   _air_1_Write
                                           ; SOURCE LINE # 543
0046 7F01              MOV     R7,#01H
C51 COMPILER V9.51   MAIN_ISR_3                                                            01/14/2014 05:21:08 PAGE 43  

0048 120000      E     LCALL   _air_8_Write
                                           ; SOURCE LINE # 544
004B         ?C0098:
                                           ; SOURCE LINE # 546
004B 900000      R     MOV     DPTR,#pol
004E E0                MOVX    A,@DPTR
004F FF                MOV     R7,A
0050 EF                MOV     A,R7
0051 600B              JZ      ?C0099
                                           ; SOURCE LINE # 547
                                           ; SOURCE LINE # 548
0053 7F01              MOV     R7,#01H
0055 120000      E     LCALL   _air_3_Write
                                           ; SOURCE LINE # 549
0058 7F00              MOV     R7,#00H
005A 120000      E     LCALL   _air_6_Write
                                           ; SOURCE LINE # 550
005D 22                RET     
005E         ?C0099:
                                           ; SOURCE LINE # 552
                                           ; SOURCE LINE # 553
005E 7F00              MOV     R7,#00H
0060 120000      E     LCALL   _air_3_Write
                                           ; SOURCE LINE # 554
0063 7F01              MOV     R7,#01H
0065 120000      E     LCALL   _air_6_Write
                                           ; SOURCE LINE # 556
                                           ; SOURCE LINE # 557
0068         ?C0101:
0068 22                RET     
             ; FUNCTION _air (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2561    ----
   CONSTANT SIZE    =     40    ----
   XDATA SIZE       =     24     104
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
