 0000                   cpu LMM
                        .module mbm_1.c
                        .area text(rom, con, rel)
 0000                   .dbfile lib/mbm_1.c
 0000                   .dbfile C:\Users\MATSUD~1\Dropbox\基盤班\プログ~1\PSoC\Designer\DC_MOT~1\DC_MOT~1\lib\mbm_1.c
 0000                   .dbfunc e MBM_1_InitializeMailbox _MBM_1_InitializeMailbox fV
 0000           _MBM_1_InitializeMailbox::
 0000                   .dbline -1
 0000                   .dbline 24
 0000           ; //*****************************************************************************
 0000           ; //*****************************************************************************
 0000           ; //  FILENAME: MBM_1.c
 0000           ; //  Version: 1.1, Updated on 2013/5/19 at 10:43:55
 0000           ; //  Generated by PSoC Designer 5.4.2946
 0000           ; //
 0000           ; //  DESCRIPTION: MBM_1 User Module C Language implementation file
 0000           ; //-----------------------------------------------------------------------------
 0000           ; //  Copyright (c) Cypress Semiconductor 2013. All Rights Reserved.
 0000           ; //*****************************************************************************
 0000           ; //*****************************************************************************
 0000           ; 
 0000           ; #include "MBM_1.h"
 0000           ; 
 0000           ; // ---------------------------------------------------------------------------
 0000           ; //
 0000           ; // MBM_1_InitializeMailbox() - initializes mailbox
 0000           ; //
 0000           ; // arguments: 
 0000           ; //      pointer mailbox to initialize
 0000           ; //
 0000           ; // ---------------------------------------------------------------------------
 0000           ; void MBM_1_InitializeMailbox(void)
 0000           ; {
 0000                   .dbline 26
 0000           ;     // initialize flags
 0000           ;     MBM_1_MyMailbox.MailboxConfig0 &= ~MBM_1_BUSY ;             // clear busy flag
 0000 62D000            mov REG[0xd0],>_MBM_1_MyMailbox
 0003 26003F            and [_MBM_1_MyMailbox],63
 0006                   .dbline 27
 0006           ;     MBM_1_MyMailbox.MailboxConfig0 &= ~MBM_1_DIRTY ;            // clear dirty flag
 0006                   .dbline 29
 0006           ;     // set mailbox size as identifier
 0006           ;     MBM_1_MyMailbox.MailboxConfig0 = sizeof(MBM_1_MyMailbox) ;           
 0006 550010            mov [_MBM_1_MyMailbox],16
 0009                   .dbline -2
 0009           L4:
 0009                   .dbline 0 ; func end
 0009 7F                ret
 000A                   .dbend
 000A                   .dbfunc e MBM_1_SetBusyFlag _MBM_1_SetBusyFlag fV
 000A           _MBM_1_SetBusyFlag::
 000A                   .dbline -1
 000A                   .dbline 41
 000A           ; }
 000A           ; 
 000A           ; // ---------------------------------------------------------------------------
 000A           ; //
 000A           ; // MBM_1_SetBusyFlag() - sets BUSY flag for mailbox.
 000A           ; //
 000A           ; // arguments: 
 000A           ; //      pointer mailbox where the BUSY flag needs to be set
 000A           ; //
 000A           ; // ---------------------------------------------------------------------------
 000A           ; void MBM_1_SetBusyFlag(void)
 000A           ; {
 000A                   .dbline 42
 000A           ;     MBM_1_MyMailbox.MailboxConfig0 |= MBM_1_BUSY ;        /* Set busy flag. */
 000A 62D000            mov REG[0xd0],>_MBM_1_MyMailbox
 000D 2E0080            or [_MBM_1_MyMailbox],-128
 0010                   .dbline -2
 0010           L5:
 0010                   .dbline 0 ; func end
 0010 7F                ret
 0011                   .dbend
 0011                   .dbfunc e MBM_1_ClearBusyFlag _MBM_1_ClearBusyFlag fV
 0011           _MBM_1_ClearBusyFlag::
 0011                   .dbline -1
 0011                   .dbline 54
 0011           ; }
 0011           ; 
 0011           ; // ---------------------------------------------------------------------------
 0011           ; //
 0011           ; // MBM_1_ClearBusyFlag() - clears BUSY flag in desired mailbox.
 0011           ; //
 0011           ; // arguments: 
 0011           ; //      pointer mailbox where the BUSY flag needs to be cleared
 0011           ; //
 0011           ; // ---------------------------------------------------------------------------
 0011           ; void MBM_1_ClearBusyFlag(void)
 0011           ; {
 0011                   .dbline 55
 0011           ;    MBM_1_MyMailbox.MailboxConfig0 &= ~MBM_1_BUSY ;        /* Set busy flag. */
 0011 62D000            mov REG[0xd0],>_MBM_1_MyMailbox
 0014 26007F            and [_MBM_1_MyMailbox],127
 0017                   .dbline -2
 0017           L6:
 0017                   .dbline 0 ; func end
 0017 7F                ret
 0018                   .dbend
 0018                   .dbfunc e MBM_1_CheckDirtyFlag _MBM_1_CheckDirtyFlag fc
 0018           _MBM_1_CheckDirtyFlag::
 0018                   .dbline -1
 0018                   .dbline 67
 0018           ; }
 0018           ; 
 0018           ; // ---------------------------------------------------------------------------
 0018           ; //
 0018           ; // MBM_1_CheckDirtyFlag() - checks for DIRTY flag in desired mailbox.
 0018           ; //
 0018           ; // arguments: 
 0018           ; //      pointer mailbox where the check for DIRTY flag needs to be done
 0018           ; //
 0018           ; // ---------------------------------------------------------------------------
 0018           ; BYTE MBM_1_CheckDirtyFlag(void)
 0018           ; {
 0018                   .dbline 68
 0018           ;     if(MBM_1_MyMailbox.MailboxConfig0 & MBM_1_DIRTY)
 0018 62D000            mov REG[0xd0],>_MBM_1_MyMailbox
 001B 470040            tst [_MBM_1_MyMailbox],64
 001E A008              jz L8
 0020                   .dbline 69
 0020           ;               return TRUE;
 0020 62D000            mov REG[0xd0],>__r0
 0023 5001              mov A,1
 0025 8006              xjmp L7
 0027           L8:
 0027                   .dbline 71
 0027           ;       else
 0027           ;               return FALSE;
 0027 62D000            mov REG[0xd0],>__r0
 002A 5000              mov A,0
 002C                   .dbline -2
 002C           L7:
 002C                   .dbline 0 ; func end
 002C 7F                ret
 002D                   .dbend
                        .area data(ram, con, rel)
 0000                   .dbfile C:\Users\MATSUD~1\Dropbox\基盤班\プログ~1\PSoC\Designer\DC_MOT~1\DC_MOT~1\lib\mbm_1.c
 0000           _MBM_1_pMyMailbox::
 0000 0000              .byte 0,0
 0002                   .dbstruct 0 7 .1
 0002                   .dbfield 0 outbox_flag c
 0002                   .dbfield 1 x_trd c
 0002                   .dbfield 2 x_speed c
 0002                   .dbfield 3 y_trd c
 0002                   .dbfield 4 y_speed c
 0002                   .dbfield 5 z_trd c
 0002                   .dbfield 6 z_speed c
 0002                   .dbend
 0002                   .dbstruct 0 7 .2
 0002                   .dbfield 0 inbox_flag c
 0002                   .dbfield 1 x_crd c
 0002                   .dbfield 2 x_cspeed c
 0002                   .dbfield 3 y_crd c
 0002                   .dbfield 4 y_cspeed c
 0002                   .dbfield 5 z_crd c
 0002                   .dbfield 6 z_cspeed c
 0002                   .dbend
 0002                   .dbstruct 0 16 .3
 0002                   .dbfield 0 MailboxConfig0 c
 0002                   .dbfield 1 MailboxConfig1 c
 0002                   .dbfield 2 Outbox S[.1]
 0002                   .dbfield 9 Inbox S[.2]
 0002                   .dbend
 0002                   .dbsym e MBM_1_pMyMailbox _MBM_1_pMyMailbox pS[.3]
                        .area data(ram, con, rel)
 0000                   .dbfile C:\Users\MATSUD~1\Dropbox\基盤班\プログ~1\PSoC\Designer\DC_MOT~1\DC_MOT~1\lib\mbm_1.c
 0000           _MBM_1_MyMailbox::
 0000 00000000000000000000      .word 0,0,0,0,0
 000A 000000000000      .byte 0,0,0,0,0,0
 0010                   .dbsym e MBM_1_MyMailbox _MBM_1_MyMailbox S[.3]
